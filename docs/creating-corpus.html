<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Creating Corpus | Corpus Linguistics</title>
  <meta name="description" content="ENC2036 Course material first edition" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Creating Corpus | Corpus Linguistics" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="ENC2036 Course material first edition" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Creating Corpus | Corpus Linguistics" />
  
  <meta name="twitter:description" content="ENC2036 Course material first edition" />
  

<meta name="author" content="Alvin Cheng-Hsien Chen" />


<meta name="date" content="2022-02-22" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="r-fundamentals.html"/>
<link rel="next" href="corpus-analysis-a-start.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="libs/pagedtable-1.1/js/pagedtable.js"></script>
<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style-new.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://alvinntnu.github.io/NTNU_ENC2036/"><img src="images/alerts/home.svg" height = "20" width = "20"> Course Website</a></li>
<li><a href="./"><img src="images/alerts/book-solid.svg" height = "20" width = "20"> ENC 2036 Corpus Linguistics</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#course-objective"><i class="fa fa-check"></i>Course Objective</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#reading-materials"><i class="fa fa-check"></i>Reading Materials</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#course-requirement"><i class="fa fa-check"></i>Course Requirement</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#exams"><i class="fa fa-check"></i>Exams</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#course-website"><i class="fa fa-check"></i>Course Website</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#contributing-to-the-lecture-notes"><i class="fa fa-check"></i>Contributing to the Lecture Notes</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#course-demo-data"><i class="fa fa-check"></i>Course Demo Data</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#academic-integrity"><i class="fa fa-check"></i>Academic Integrity</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#house-keeping-guidelines"><i class="fa fa-check"></i>House-keeping Guidelines</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#necessary-packages"><i class="fa fa-check"></i>Necessary Packages</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#environment-settings"><i class="fa fa-check"></i>Environment Settings</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="what-is-corpus-linguistics.html"><a href="what-is-corpus-linguistics.html"><i class="fa fa-check"></i><b>1</b> What is Corpus Linguistics?</a>
<ul>
<li class="chapter" data-level="1.1" data-path="what-is-corpus-linguistics.html"><a href="what-is-corpus-linguistics.html#why-do-we-need-corpus-data"><i class="fa fa-check"></i><b>1.1</b> Why do we need corpus data?</a></li>
<li class="chapter" data-level="1.2" data-path="what-is-corpus-linguistics.html"><a href="what-is-corpus-linguistics.html#what-is-corpus"><i class="fa fa-check"></i><b>1.2</b> What is corpus?</a></li>
<li class="chapter" data-level="1.3" data-path="what-is-corpus-linguistics.html"><a href="what-is-corpus-linguistics.html#what-is-a-corpus-linguistic-study"><i class="fa fa-check"></i><b>1.3</b> What is a corpus linguistic study?</a></li>
<li class="chapter" data-level="1.4" data-path="what-is-corpus-linguistics.html"><a href="what-is-corpus-linguistics.html#additional-information-on-cl"><i class="fa fa-check"></i><b>1.4</b> Additional Information on CL</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="r-fundamentals.html"><a href="r-fundamentals.html"><i class="fa fa-check"></i><b>2</b> R Fundamentals</a>
<ul>
<li class="chapter" data-level="" data-path="r-fundamentals.html"><a href="r-fundamentals.html#a-quick-note"><i class="fa fa-check"></i>A Quick Note</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="creating-corpus.html"><a href="creating-corpus.html"><i class="fa fa-check"></i><b>3</b> Creating Corpus</a>
<ul>
<li class="chapter" data-level="3.1" data-path="creating-corpus.html"><a href="creating-corpus.html#html-structure"><i class="fa fa-check"></i><b>3.1</b> HTML Structure</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="creating-corpus.html"><a href="creating-corpus.html#html-syntax"><i class="fa fa-check"></i><b>3.1.1</b> HTML Syntax</a></li>
<li class="chapter" data-level="3.1.2" data-path="creating-corpus.html"><a href="creating-corpus.html#tags-and-attributes"><i class="fa fa-check"></i><b>3.1.2</b> Tags and Attributes</a></li>
<li class="chapter" data-level="3.1.3" data-path="creating-corpus.html"><a href="creating-corpus.html#css"><i class="fa fa-check"></i><b>3.1.3</b> CSS</a></li>
<li class="chapter" data-level="3.1.4" data-path="creating-corpus.html"><a href="creating-corpus.html#html-css-javascript"><i class="fa fa-check"></i><b>3.1.4</b> HTML + CSS ( + JavaScript)</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="creating-corpus.html"><a href="creating-corpus.html#web-crawling"><i class="fa fa-check"></i><b>3.2</b> Web Crawling</a></li>
<li class="chapter" data-level="3.3" data-path="creating-corpus.html"><a href="creating-corpus.html#functional-programming"><i class="fa fa-check"></i><b>3.3</b> Functional Programming</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="creating-corpus.html"><a href="creating-corpus.html#extract_art_links"><i class="fa fa-check"></i><b>3.3.1</b> <code>extract_art_links()</code></a></li>
<li class="chapter" data-level="3.3.2" data-path="creating-corpus.html"><a href="creating-corpus.html#extract_article_push_tables"><i class="fa fa-check"></i><b>3.3.2</b> <code>extract_article_push_tables()</code></a></li>
<li class="chapter" data-level="3.3.3" data-path="creating-corpus.html"><a href="creating-corpus.html#streamline-the-codes"><i class="fa fa-check"></i><b>3.3.3</b> Streamline the Codes</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="creating-corpus.html"><a href="creating-corpus.html#save-corpus"><i class="fa fa-check"></i><b>3.4</b> Save Corpus</a></li>
<li class="chapter" data-level="3.5" data-path="creating-corpus.html"><a href="creating-corpus.html#additional-resources"><i class="fa fa-check"></i><b>3.5</b> Additional Resources</a></li>
<li class="chapter" data-level="3.6" data-path="creating-corpus.html"><a href="creating-corpus.html#final-remarks"><i class="fa fa-check"></i><b>3.6</b> Final Remarks</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="corpus-analysis-a-start.html"><a href="corpus-analysis-a-start.html"><i class="fa fa-check"></i><b>4</b> Corpus Analysis: A Start</a>
<ul>
<li class="chapter" data-level="4.1" data-path="corpus-analysis-a-start.html"><a href="corpus-analysis-a-start.html#installing-quanteda"><i class="fa fa-check"></i><b>4.1</b> Installing <code>quanteda</code></a></li>
<li class="chapter" data-level="4.2" data-path="corpus-analysis-a-start.html"><a href="corpus-analysis-a-start.html#building-a-corpus-from-character-vector"><i class="fa fa-check"></i><b>4.2</b> Building a <code>corpus</code> from character vector</a></li>
<li class="chapter" data-level="4.3" data-path="corpus-analysis-a-start.html"><a href="corpus-analysis-a-start.html#keyword-in-context-kwic"><i class="fa fa-check"></i><b>4.3</b> Keyword-in-Context (KWIC)</a></li>
<li class="chapter" data-level="4.4" data-path="corpus-analysis-a-start.html"><a href="corpus-analysis-a-start.html#kwic-with-regular-expressions"><i class="fa fa-check"></i><b>4.4</b> KWIC with Regular Expressions</a></li>
<li class="chapter" data-level="4.5" data-path="corpus-analysis-a-start.html"><a href="corpus-analysis-a-start.html#tidy-text-format-of-the-corpus"><i class="fa fa-check"></i><b>4.5</b> Tidy Text Format of the Corpus</a></li>
<li class="chapter" data-level="4.6" data-path="corpus-analysis-a-start.html"><a href="corpus-analysis-a-start.html#frequency-lists"><i class="fa fa-check"></i><b>4.6</b> Frequency Lists</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="corpus-analysis-a-start.html"><a href="corpus-analysis-a-start.html#word-unigram"><i class="fa fa-check"></i><b>4.6.1</b> Word (Unigram)</a></li>
<li class="chapter" data-level="4.6.2" data-path="corpus-analysis-a-start.html"><a href="corpus-analysis-a-start.html#bigrams"><i class="fa fa-check"></i><b>4.6.2</b> Bigrams</a></li>
<li class="chapter" data-level="4.6.3" data-path="corpus-analysis-a-start.html"><a href="corpus-analysis-a-start.html#ngrams-lexical-bundles"><i class="fa fa-check"></i><b>4.6.3</b> Ngrams (Lexical Bundles)</a></li>
<li class="chapter" data-level="4.6.4" data-path="corpus-analysis-a-start.html"><a href="corpus-analysis-a-start.html#frequency-and-dispersion"><i class="fa fa-check"></i><b>4.6.4</b> Frequency and Dispersion</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="corpus-analysis-a-start.html"><a href="corpus-analysis-a-start.html#word-cloud"><i class="fa fa-check"></i><b>4.7</b> Word Cloud</a></li>
<li class="chapter" data-level="4.8" data-path="corpus-analysis-a-start.html"><a href="corpus-analysis-a-start.html#collocations"><i class="fa fa-check"></i><b>4.8</b> Collocations</a>
<ul>
<li class="chapter" data-level="4.8.1" data-path="corpus-analysis-a-start.html"><a href="corpus-analysis-a-start.html#cooccurrence-table-and-observed-frequencies"><i class="fa fa-check"></i><b>4.8.1</b> Cooccurrence Table and Observed Frequencies</a></li>
<li class="chapter" data-level="4.8.2" data-path="corpus-analysis-a-start.html"><a href="corpus-analysis-a-start.html#expected-frequencies"><i class="fa fa-check"></i><b>4.8.2</b> Expected Frequencies</a></li>
<li class="chapter" data-level="4.8.3" data-path="corpus-analysis-a-start.html"><a href="corpus-analysis-a-start.html#association-measures"><i class="fa fa-check"></i><b>4.8.3</b> Association Measures</a></li>
</ul></li>
<li class="chapter" data-level="4.9" data-path="corpus-analysis-a-start.html"><a href="corpus-analysis-a-start.html#constructions"><i class="fa fa-check"></i><b>4.9</b> Constructions</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="parts-of-speech-tagging.html"><a href="parts-of-speech-tagging.html"><i class="fa fa-check"></i><b>5</b> Parts-of-Speech Tagging</a>
<ul>
<li class="chapter" data-level="5.1" data-path="parts-of-speech-tagging.html"><a href="parts-of-speech-tagging.html#installing-the-package"><i class="fa fa-check"></i><b>5.1</b> Installing the Package</a></li>
<li class="chapter" data-level="5.2" data-path="parts-of-speech-tagging.html"><a href="parts-of-speech-tagging.html#quick-overview"><i class="fa fa-check"></i><b>5.2</b> Quick Overview</a></li>
<li class="chapter" data-level="5.3" data-path="parts-of-speech-tagging.html"><a href="parts-of-speech-tagging.html#working-pipeline"><i class="fa fa-check"></i><b>5.3</b> Working Pipeline</a></li>
<li class="chapter" data-level="5.4" data-path="parts-of-speech-tagging.html"><a href="parts-of-speech-tagging.html#parsing-your-texts"><i class="fa fa-check"></i><b>5.4</b> Parsing Your Texts</a></li>
<li class="chapter" data-level="5.5" data-path="parts-of-speech-tagging.html"><a href="parts-of-speech-tagging.html#metalingusitic-analysis"><i class="fa fa-check"></i><b>5.5</b> Metalingusitic Analysis</a></li>
<li class="chapter" data-level="5.6" data-path="parts-of-speech-tagging.html"><a href="parts-of-speech-tagging.html#construction-analysis"><i class="fa fa-check"></i><b>5.6</b> Construction Analysis</a></li>
<li class="chapter" data-level="5.7" data-path="parts-of-speech-tagging.html"><a href="parts-of-speech-tagging.html#issues-on-pattern-retrieval"><i class="fa fa-check"></i><b>5.7</b> Issues on Pattern Retrieval</a></li>
<li class="chapter" data-level="5.8" data-path="parts-of-speech-tagging.html"><a href="parts-of-speech-tagging.html#saving-pos-tagged-texts"><i class="fa fa-check"></i><b>5.8</b> Saving POS-tagged Texts</a></li>
<li class="chapter" data-level="5.9" data-path="parts-of-speech-tagging.html"><a href="parts-of-speech-tagging.html#finalize-spacy"><i class="fa fa-check"></i><b>5.9</b> Finalize spaCy</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="keyword-analysis.html"><a href="keyword-analysis.html"><i class="fa fa-check"></i><b>6</b> Keyword Analysis</a>
<ul>
<li class="chapter" data-level="6.1" data-path="keyword-analysis.html"><a href="keyword-analysis.html#about-keywords"><i class="fa fa-check"></i><b>6.1</b> About Keywords</a></li>
<li class="chapter" data-level="6.2" data-path="keyword-analysis.html"><a href="keyword-analysis.html#statistics-for-keyness"><i class="fa fa-check"></i><b>6.2</b> Statistics for Keyness</a></li>
<li class="chapter" data-level="6.3" data-path="keyword-analysis.html"><a href="keyword-analysis.html#implementation"><i class="fa fa-check"></i><b>6.3</b> Implementation</a></li>
<li class="chapter" data-level="6.4" data-path="keyword-analysis.html"><a href="keyword-analysis.html#tidy-data"><i class="fa fa-check"></i><b>6.4</b> Tidy Data</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="keyword-analysis.html"><a href="keyword-analysis.html#an-long-to-wide-example"><i class="fa fa-check"></i><b>6.4.1</b> An Long-to-Wide Example</a></li>
<li class="chapter" data-level="6.4.2" data-path="keyword-analysis.html"><a href="keyword-analysis.html#a-wide-to-long-example"><i class="fa fa-check"></i><b>6.4.2</b> A Wide-to-Long Example</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="keyword-analysis.html"><a href="keyword-analysis.html#word-frequency-transformation"><i class="fa fa-check"></i><b>6.5</b> Word Frequency Transformation</a></li>
<li class="chapter" data-level="6.6" data-path="keyword-analysis.html"><a href="keyword-analysis.html#computing-keynesss"><i class="fa fa-check"></i><b>6.6</b> Computing Keynesss</a></li>
<li class="chapter" data-level="6.7" data-path="keyword-analysis.html"><a href="keyword-analysis.html#conclusion"><i class="fa fa-check"></i><b>6.7</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html"><i class="fa fa-check"></i><b>7</b> Chinese Text Processing</a>
<ul>
<li class="chapter" data-level="7.1" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#chinese-word-segmenter-jiebar"><i class="fa fa-check"></i><b>7.1</b> Chinese Word Segmenter <code>jiebaR</code></a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#start"><i class="fa fa-check"></i><b>7.1.1</b> Start</a></li>
<li class="chapter" data-level="7.1.2" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#parameters-setting"><i class="fa fa-check"></i><b>7.1.2</b> Parameters Setting</a></li>
<li class="chapter" data-level="7.1.3" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#user-defined-dictionary"><i class="fa fa-check"></i><b>7.1.3</b> User-defined dictionary</a></li>
<li class="chapter" data-level="7.1.4" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#stopwords"><i class="fa fa-check"></i><b>7.1.4</b> Stopwords</a></li>
<li class="chapter" data-level="7.1.5" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#pos-tagging"><i class="fa fa-check"></i><b>7.1.5</b> POS Tagging</a></li>
<li class="chapter" data-level="7.1.6" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#default-word-lists-in-jiebar"><i class="fa fa-check"></i><b>7.1.6</b> Default Word Lists in JiebaR</a></li>
<li class="chapter" data-level="7.1.7" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#reminders"><i class="fa fa-check"></i><b>7.1.7</b> Reminders</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#chinese-text-analytics-pipeline"><i class="fa fa-check"></i><b>7.2</b> Chinese Text Analytics Pipeline</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#creating-a-corpus-object"><i class="fa fa-check"></i><b>7.2.1</b> Creating a Corpus Object</a></li>
<li class="chapter" data-level="7.2.2" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#tidy-structure-framework"><i class="fa fa-check"></i><b>7.2.2</b> Tidy Structure Framework</a></li>
<li class="chapter" data-level="7.2.3" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#quanteda-framework"><i class="fa fa-check"></i><b>7.2.3</b> <code>Quanteda</code> Framework</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#comparing-tokenization-methods"><i class="fa fa-check"></i><b>7.3</b> Comparing Tokenization Methods</a></li>
<li class="chapter" data-level="7.4" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#data"><i class="fa fa-check"></i><b>7.4</b> Data</a></li>
<li class="chapter" data-level="7.5" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#loading-text-data"><i class="fa fa-check"></i><b>7.5</b> Loading Text Data</a></li>
<li class="chapter" data-level="7.6" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#quantedatokens-vs.-jiebarsegment"><i class="fa fa-check"></i><b>7.6</b> <code>quanteda::tokens()</code> vs. <code>jiebaR::segment()</code></a></li>
<li class="chapter" data-level="7.7" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#case-study-1-word-frequency-and-wordcloud"><i class="fa fa-check"></i><b>7.7</b> Case Study 1: Word Frequency and Wordcloud</a></li>
<li class="chapter" data-level="7.8" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#case-study-2-patterns"><i class="fa fa-check"></i><b>7.8</b> Case Study 2: Patterns</a>
<ul>
<li class="chapter" data-level="7.8.1" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#bei-construction"><i class="fa fa-check"></i><b>7.8.1</b> BEI Construction</a></li>
</ul></li>
<li class="chapter" data-level="7.9" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#case-study-3-lexical-bundles"><i class="fa fa-check"></i><b>7.9</b> Case Study 3: Lexical Bundles</a>
<ul>
<li class="chapter" data-level="7.9.1" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#n-grams-extraction"><i class="fa fa-check"></i><b>7.9.1</b> N-grams Extraction</a></li>
<li class="chapter" data-level="7.9.2" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#frequency-and-dispersion-1"><i class="fa fa-check"></i><b>7.9.2</b> Frequency and Dispersion</a></li>
</ul></li>
<li class="chapter" data-level="7.10" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#afterwords"><i class="fa fa-check"></i><b>7.10</b> Afterwords</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="constructions-and-idioms.html"><a href="constructions-and-idioms.html"><i class="fa fa-check"></i><b>8</b> Constructions and Idioms</a>
<ul>
<li class="chapter" data-level="8.1" data-path="constructions-and-idioms.html"><a href="constructions-and-idioms.html#collostruction"><i class="fa fa-check"></i><b>8.1</b> Collostruction</a></li>
<li class="chapter" data-level="8.2" data-path="constructions-and-idioms.html"><a href="constructions-and-idioms.html#corpus"><i class="fa fa-check"></i><b>8.2</b> Corpus</a></li>
<li class="chapter" data-level="8.3" data-path="constructions-and-idioms.html"><a href="constructions-and-idioms.html#word-segmentation"><i class="fa fa-check"></i><b>8.3</b> Word Segmentation</a></li>
<li class="chapter" data-level="8.4" data-path="constructions-and-idioms.html"><a href="constructions-and-idioms.html#extract-constructions"><i class="fa fa-check"></i><b>8.4</b> Extract Constructions</a></li>
<li class="chapter" data-level="8.5" data-path="constructions-and-idioms.html"><a href="constructions-and-idioms.html#distributional-information-needed-for-ca"><i class="fa fa-check"></i><b>8.5</b> Distributional Information Needed for CA</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="constructions-and-idioms.html"><a href="constructions-and-idioms.html#word-frequency-list"><i class="fa fa-check"></i><b>8.5.1</b> Word Frequency List</a></li>
<li class="chapter" data-level="8.5.2" data-path="constructions-and-idioms.html"><a href="constructions-and-idioms.html#joint-frequencies"><i class="fa fa-check"></i><b>8.5.2</b> Joint Frequencies</a></li>
<li class="chapter" data-level="8.5.3" data-path="constructions-and-idioms.html"><a href="constructions-and-idioms.html#input-for-coll.analysis.r"><i class="fa fa-check"></i><b>8.5.3</b> Input for <code>coll.analysis.r</code></a></li>
<li class="chapter" data-level="8.5.4" data-path="constructions-and-idioms.html"><a href="constructions-and-idioms.html#other-information"><i class="fa fa-check"></i><b>8.5.4</b> Other Information</a></li>
<li class="chapter" data-level="8.5.5" data-path="constructions-and-idioms.html"><a href="constructions-and-idioms.html#create-output-file"><i class="fa fa-check"></i><b>8.5.5</b> Create Output File</a></li>
<li class="chapter" data-level="8.5.6" data-path="constructions-and-idioms.html"><a href="constructions-and-idioms.html#run-coll.analysis.r"><i class="fa fa-check"></i><b>8.5.6</b> Run <code>coll.analysis.r</code></a></li>
<li class="chapter" data-level="8.5.7" data-path="constructions-and-idioms.html"><a href="constructions-and-idioms.html#interpretations"><i class="fa fa-check"></i><b>8.5.7</b> Interpretations</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="constructions-and-idioms.html"><a href="constructions-and-idioms.html#exercises"><i class="fa fa-check"></i><b>8.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="ckiptagger.html"><a href="ckiptagger.html"><i class="fa fa-check"></i><b>9</b> CKIP Tagger</a>
<ul>
<li class="chapter" data-level="9.1" data-path="ckiptagger.html"><a href="ckiptagger.html#installation"><i class="fa fa-check"></i><b>9.1</b> Installation</a></li>
<li class="chapter" data-level="9.2" data-path="ckiptagger.html"><a href="ckiptagger.html#download-the-model-files"><i class="fa fa-check"></i><b>9.2</b> Download the Model Files</a></li>
<li class="chapter" data-level="9.3" data-path="ckiptagger.html"><a href="ckiptagger.html#r-python-communication"><i class="fa fa-check"></i><b>9.3</b> R-Python Communication</a></li>
<li class="chapter" data-level="9.4" data-path="ckiptagger.html"><a href="ckiptagger.html#word-segmentation-in-r"><i class="fa fa-check"></i><b>9.4</b> Word Segmentation in R</a></li>
<li class="chapter" data-level="9.5" data-path="ckiptagger.html"><a href="ckiptagger.html#r-environment-setting"><i class="fa fa-check"></i><b>9.5</b> R Environment Setting</a></li>
<li class="chapter" data-level="9.6" data-path="ckiptagger.html"><a href="ckiptagger.html#creating-conda-environment-for-ckiptagger"><i class="fa fa-check"></i><b>9.6</b> Creating Conda Environment for <code>ckiptagger</code></a></li>
<li class="chapter" data-level="9.7" data-path="ckiptagger.html"><a href="ckiptagger.html#initialization"><i class="fa fa-check"></i><b>9.7</b> Initialization</a></li>
<li class="chapter" data-level="9.8" data-path="ckiptagger.html"><a href="ckiptagger.html#segmenting-texts"><i class="fa fa-check"></i><b>9.8</b> Segmenting Texts</a></li>
<li class="chapter" data-level="9.9" data-path="ckiptagger.html"><a href="ckiptagger.html#define-own-dictionary"><i class="fa fa-check"></i><b>9.9</b> Define Own Dictionary</a></li>
<li class="chapter" data-level="9.10" data-path="ckiptagger.html"><a href="ckiptagger.html#beyond-word-boundaries"><i class="fa fa-check"></i><b>9.10</b> Beyond Word Boundaries</a></li>
<li class="chapter" data-level="9.11" data-path="ckiptagger.html"><a href="ckiptagger.html#tidy-up-the-results"><i class="fa fa-check"></i><b>9.11</b> Tidy Up the Results</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="structured-corpus.html"><a href="structured-corpus.html"><i class="fa fa-check"></i><b>10</b> Structured Corpus</a>
<ul>
<li class="chapter" data-level="10.1" data-path="structured-corpus.html"><a href="structured-corpus.html#nccu-spoken-mandarin"><i class="fa fa-check"></i><b>10.1</b> NCCU Spoken Mandarin</a></li>
<li class="chapter" data-level="10.2" data-path="structured-corpus.html"><a href="structured-corpus.html#childes-format"><i class="fa fa-check"></i><b>10.2</b> CHILDES Format</a></li>
<li class="chapter" data-level="10.3" data-path="structured-corpus.html"><a href="structured-corpus.html#loading-the-corpus"><i class="fa fa-check"></i><b>10.3</b> Loading the Corpus</a></li>
<li class="chapter" data-level="10.4" data-path="structured-corpus.html"><a href="structured-corpus.html#from-text-based-to-turn-based-df"><i class="fa fa-check"></i><b>10.4</b> From Text-based to Turn-based DF</a></li>
<li class="chapter" data-level="10.5" data-path="structured-corpus.html"><a href="structured-corpus.html#metadata-vs.-utterances"><i class="fa fa-check"></i><b>10.5</b> Metadata vs. Utterances</a></li>
<li class="chapter" data-level="10.6" data-path="structured-corpus.html"><a href="structured-corpus.html#word-based-df-and-frequency-list"><i class="fa fa-check"></i><b>10.6</b> Word-based DF and Frequency List</a></li>
<li class="chapter" data-level="10.7" data-path="structured-corpus.html"><a href="structured-corpus.html#concordances"><i class="fa fa-check"></i><b>10.7</b> Concordances</a></li>
<li class="chapter" data-level="10.8" data-path="structured-corpus.html"><a href="structured-corpus.html#collocations-bigrams"><i class="fa fa-check"></i><b>10.8</b> Collocations (Bigrams)</a></li>
<li class="chapter" data-level="10.9" data-path="structured-corpus.html"><a href="structured-corpus.html#n-grams-lexical-bundles"><i class="fa fa-check"></i><b>10.9</b> N-grams (Lexical Bundles)</a></li>
<li class="chapter" data-level="10.10" data-path="structured-corpus.html"><a href="structured-corpus.html#connecting-spid-to-metadata"><i class="fa fa-check"></i><b>10.10</b> Connecting SPID to Metadata</a></li>
<li class="chapter" data-level="10.11" data-path="structured-corpus.html"><a href="structured-corpus.html#corpus-headers"><i class="fa fa-check"></i><b>10.11</b> Corpus Headers</a></li>
<li class="chapter" data-level="10.12" data-path="structured-corpus.html"><a href="structured-corpus.html#sociolinguistic-analyses"><i class="fa fa-check"></i><b>10.12</b> Sociolinguistic Analyses</a>
<ul>
<li class="chapter" data-level="10.12.1" data-path="structured-corpus.html"><a href="structured-corpus.html#check-bigrams-distribution-by-age-groups"><i class="fa fa-check"></i><b>10.12.1</b> Check Bigrams Distribution By Age Groups</a></li>
<li class="chapter" data-level="10.12.2" data-path="structured-corpus.html"><a href="structured-corpus.html#numbers-of-bigrams-above-cut-off-by-age"><i class="fa fa-check"></i><b>10.12.2</b> Numbers of Bigrams above Cut-off by Age</a></li>
<li class="chapter" data-level="10.12.3" data-path="structured-corpus.html"><a href="structured-corpus.html#bigram-word-clouds-by-age"><i class="fa fa-check"></i><b>10.12.3</b> Bigram Word clouds by Age</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="xml.html"><a href="xml.html"><i class="fa fa-check"></i><b>11</b> XML</a>
<ul>
<li class="chapter" data-level="11.1" data-path="xml.html"><a href="xml.html#bnc-spoken-2014"><i class="fa fa-check"></i><b>11.1</b> BNC Spoken 2014</a></li>
<li class="chapter" data-level="11.2" data-path="xml.html"><a href="xml.html#process-the-whole-directory-of-bnc2014-sample"><i class="fa fa-check"></i><b>11.2</b> Process the Whole Directory of BNC2014 Sample</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="xml.html"><a href="xml.html#define-function"><i class="fa fa-check"></i><b>11.2.1</b> Define Function</a></li>
<li class="chapter" data-level="11.2.2" data-path="xml.html"><a href="xml.html#process-the-all-files-in-the-directory"><i class="fa fa-check"></i><b>11.2.2</b> Process the all files in the Directory</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="xml.html"><a href="xml.html#metadata"><i class="fa fa-check"></i><b>11.3</b> Metadata</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="xml.html"><a href="xml.html#text-metadata"><i class="fa fa-check"></i><b>11.3.1</b> Text Metadata</a></li>
<li class="chapter" data-level="11.3.2" data-path="xml.html"><a href="xml.html#speaker-metadata"><i class="fa fa-check"></i><b>11.3.2</b> Speaker Metadata</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="xml.html"><a href="xml.html#bnc2014-for-socio-linguistic-variation"><i class="fa fa-check"></i><b>11.4</b> BNC2014 for Socio-linguistic Variation</a></li>
<li class="chapter" data-level="11.5" data-path="xml.html"><a href="xml.html#lexical-analysis"><i class="fa fa-check"></i><b>11.5</b> Lexical Analysis</a>
<ul>
<li class="chapter" data-level="11.5.1" data-path="xml.html"><a href="xml.html#word-frequency-vs.-gender"><i class="fa fa-check"></i><b>11.5.1</b> Word Frequency vs. Gender</a></li>
<li class="chapter" data-level="11.5.2" data-path="xml.html"><a href="xml.html#frequency-and-keyword-analysis"><i class="fa fa-check"></i><b>11.5.2</b> Frequency and Keyword Analysis</a></li>
</ul></li>
<li class="chapter" data-level="11.6" data-path="xml.html"><a href="xml.html#constructions-analysis"><i class="fa fa-check"></i><b>11.6</b> Constructions Analysis</a>
<ul>
<li class="chapter" data-level="11.6.1" data-path="xml.html"><a href="xml.html#from-token-based-to-turn-based-data-frame"><i class="fa fa-check"></i><b>11.6.1</b> From Token-based to Turn-based Data Frame</a></li>
<li class="chapter" data-level="11.6.2" data-path="xml.html"><a href="xml.html#degree-adv-adj"><i class="fa fa-check"></i><b>11.6.2</b> Degree ADV + ADJ</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="vector-space-representation.html"><a href="vector-space-representation.html"><i class="fa fa-check"></i><b>12</b> Vector Space Representation</a>
<ul>
<li class="chapter" data-level="12.1" data-path="vector-space-representation.html"><a href="vector-space-representation.html#distributional-semantics"><i class="fa fa-check"></i><b>12.1</b> Distributional Semantics</a></li>
<li class="chapter" data-level="12.2" data-path="vector-space-representation.html"><a href="vector-space-representation.html#vector-space-semantics-parameters"><i class="fa fa-check"></i><b>12.2</b> Vector Space Semantics: Parameters</a></li>
<li class="chapter" data-level="12.3" data-path="vector-space-representation.html"><a href="vector-space-representation.html#vector-space-model-for-documents"><i class="fa fa-check"></i><b>12.3</b> Vector Space Model for Documents</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="vector-space-representation.html"><a href="vector-space-representation.html#data-processing-flowchart"><i class="fa fa-check"></i><b>12.3.1</b> Data Processing Flowchart</a></li>
<li class="chapter" data-level="12.3.2" data-path="vector-space-representation.html"><a href="vector-space-representation.html#document-feature-matrix-dfm"><i class="fa fa-check"></i><b>12.3.2</b> Document-Feature Matrix (<code>dfm</code>)</a></li>
<li class="chapter" data-level="12.3.3" data-path="vector-space-representation.html"><a href="vector-space-representation.html#corpus-1"><i class="fa fa-check"></i><b>12.3.3</b> Corpus</a></li>
<li class="chapter" data-level="12.3.4" data-path="vector-space-representation.html"><a href="vector-space-representation.html#document-feature-matrix-dfm-1"><i class="fa fa-check"></i><b>12.3.4</b> Document-Feature Matrix (<code>dfm</code>)</a></li>
<li class="chapter" data-level="12.3.5" data-path="vector-space-representation.html"><a href="vector-space-representation.html#distance-similarity-metrics"><i class="fa fa-check"></i><b>12.3.5</b> Distributional Hypothesis and Distance/Similarity Metrics</a></li>
<li class="chapter" data-level="12.3.6" data-path="vector-space-representation.html"><a href="vector-space-representation.html#multidimensiona-space"><i class="fa fa-check"></i><b>12.3.6</b> Multidimensiona Space</a></li>
<li class="chapter" data-level="12.3.7" data-path="vector-space-representation.html"><a href="vector-space-representation.html#vector-semantics-considerations"><i class="fa fa-check"></i><b>12.3.7</b> Vector Semantics Considerations</a></li>
<li class="chapter" data-level="12.3.8" data-path="vector-space-representation.html"><a href="vector-space-representation.html#feature-selection"><i class="fa fa-check"></i><b>12.3.8</b> Feature Selection</a></li>
<li class="chapter" data-level="12.3.9" data-path="vector-space-representation.html"><a href="vector-space-representation.html#exploratory-analysis-of-dfm"><i class="fa fa-check"></i><b>12.3.9</b> Exploratory Analysis of <code>dfm</code></a></li>
<li class="chapter" data-level="12.3.10" data-path="vector-space-representation.html"><a href="vector-space-representation.html#document-similarity"><i class="fa fa-check"></i><b>12.3.10</b> Document Similarity</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="vector-space-representation.html"><a href="vector-space-representation.html#vector-space-model-for-words"><i class="fa fa-check"></i><b>12.4</b> Vector Space Model for Words</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="vector-space-representation.html"><a href="vector-space-representation.html#feature-coocurrence-matrix-fcm"><i class="fa fa-check"></i><b>12.4.1</b> Feature-Coocurrence Matrix (<code>fcm</code>)</a></li>
<li class="chapter" data-level="12.4.2" data-path="vector-space-representation.html"><a href="vector-space-representation.html#from-corpustokens-to-fcm"><i class="fa fa-check"></i><b>12.4.2</b> From <code>corpus/tokens</code> to <code>fcm</code></a></li>
<li class="chapter" data-level="12.4.3" data-path="vector-space-representation.html"><a href="vector-space-representation.html#from-dfm-to-fcm"><i class="fa fa-check"></i><b>12.4.3</b> From <code>dfm</code> to <code>fcm</code></a></li>
<li class="chapter" data-level="12.4.4" data-path="vector-space-representation.html"><a href="vector-space-representation.html#which-method-to-choose"><i class="fa fa-check"></i><b>12.4.4</b> Which method to choose?</a></li>
<li class="chapter" data-level="12.4.5" data-path="vector-space-representation.html"><a href="vector-space-representation.html#lexical-similarity"><i class="fa fa-check"></i><b>12.4.5</b> Lexical Similarity</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="vector-space-representation.html"><a href="vector-space-representation.html#exercises-1"><i class="fa fa-check"></i><b>12.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>13</b> References</a></li>
<li class="divider"></li>
<li><a href="https://web.ntnu.edu.tw/~alvinchen" target ="blank">Alvin Chen </a></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Corpus Linguistics</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<script src="https://hypothes.is/embed.js" async></script>
<div id="creating-corpus" class="section level1" number="3">
<h1><span class="header-section-number">Chapter 3</span> Creating Corpus</h1>
<p>Linguistic data are important to us linguists. Data usually tell us something we don’t know, or something we are not sure of. In this chapter, I would like to show you a quick way to extract lingusitic data from web pages, which is by now undoubtedly the largest source of textual data available.</p>
<p>While there are many existing text data collections (cf. <a href="#structured-coprus">Structured Corpus</a> and <a href="xml.html#xml">XML</a>), chances are that sometimes you still need to collect your own data for a particular research question. But please note that when you are creating your own corpus for specific research questions, always pay attention to the three important criteria: <strong>representativeness</strong>, <strong>authenticity</strong>, and <strong>size</strong>.</p>
<p>Following the spirit of tidy <svg viewBox="0 0 581 512" style="height:1em;position:relative;display:inline-block;top:.1em;" xmlns="http://www.w3.org/2000/svg"> <path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"></path></svg>, we will mainly do our tasks with the libraries of <code>tidyverse</code> and <code>rvests</code>.</p>
<div class="info">
<p>If you are new to <strong>tidyverse</strong> R, please check its <a href="https://www.tidyverse.org/learn/">official webpage</a> for learning resources.</p>
</div>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="creating-corpus.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Uncomment the following line for installation</span></span>
<span id="cb1-2"><a href="creating-corpus.html#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages(c(&quot;tidyverse&quot;, &quot;rvest&quot;))</span></span>
<span id="cb1-3"><a href="creating-corpus.html#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-4"><a href="creating-corpus.html#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rvest)</span></code></pre></div>
<div id="html-structure" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> HTML Structure</h2>
<p>The <strong>H</strong>yper<strong>T</strong>ext <strong>M</strong>arkup <strong>L</strong>anguage, or HTML is the standard markup language for documents designed to be displayed in a web browser.</p>
<div id="html-syntax" class="section level3" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> HTML Syntax</h3>
<p>To illustrate the structure of the HTML, please download the sample <code>html</code> file from: <code>demo_data/data-sample-html.html</code> and first open it with your browser.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb2-1"><a href="creating-corpus.html#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;!DOCTYPE </span>html<span class="dt">&gt;</span></span>
<span id="cb2-2"><a href="creating-corpus.html#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;html&gt;</span></span>
<span id="cb2-3"><a href="creating-corpus.html#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;head&gt;</span></span>
<span id="cb2-4"><a href="creating-corpus.html#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;title&gt;</span>My First HTML <span class="kw">&lt;/title&gt;</span></span>
<span id="cb2-5"><a href="creating-corpus.html#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;/head&gt;</span></span>
<span id="cb2-6"><a href="creating-corpus.html#cb2-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-7"><a href="creating-corpus.html#cb2-7" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;body&gt;</span></span>
<span id="cb2-8"><a href="creating-corpus.html#cb2-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;h1&gt;</span> Introduction <span class="kw">&lt;/h1&gt;</span></span>
<span id="cb2-9"><a href="creating-corpus.html#cb2-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;p&gt;</span> Have you ever read the source code of a html page? <span class="kw">&lt;/p&gt;</span></span>
<span id="cb2-10"><a href="creating-corpus.html#cb2-10" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;/body&gt;</span></span>
<span id="cb2-11"><a href="creating-corpus.html#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/html&gt;</span></span></code></pre></div>
<p>An <code>HTML</code> document includes several important elements (cf. Figure <a href="creating-corpus.html#fig:htmltag">3.1</a>):</p>
<ul>
<li><code>DTD</code>: document type definition which informs the browser about the version of the HTML standard that the document adheres to (e.g., <code>&lt;!DOCTYPE HTML&gt;</code>)</li>
<li><code>element</code>: the combination of start tag, content, and end tag (e.g, <code>&lt;title&gt;My First HTML&lt;/title&gt;</code>)</li>
<li><code>tag</code>: named braces that enclose the content and define its structural function (e.g., <code>title</code>, <code>body</code>, <code>p</code>)</li>
<li><code>attribute</code>: specific properties of the tag, which are often placed in the start end of the element (e.g., <code>&lt;a href= "index.html"&gt; Homepage &lt;/a&gt;</code>). They are expressed as <code>name = "value"</code> pairs.</li>
</ul>
<!-- ```{r echo=F, purl = F, out.width = "70%"} -->
<!-- htmltools::includeHTML("demo_data/my-first-html.html") -->
<!-- ``` -->
<div class="figure"><span style="display:block;" id="fig:htmltag"></span>
<img src="images/html-tag.png" alt="Syntax of An HTML Tag Element" width="90%" />
<p class="caption">
Figure 3.1: Syntax of An HTML Tag Element
</p>
</div>
<p>An <code>HTML</code> document starts with the root element <code>&lt;html&gt;</code>, which splits into two branches, <code>&lt;head&gt;</code> and <code>&lt;body&gt;</code>.</p>
<ul>
<li>Most of the webpage <strong>textual contents</strong> would go into the <code>&lt;body&gt;</code> part.</li>
<li>Most of the web-related codes and metadata (e.g., javascripts, CSS) are often included in the <code>&lt;head&gt;</code> part.</li>
</ul>
<p>All elements need to be strictly nested within each other in a well-formed and valid HTML file, as shown in Figure <a href="creating-corpus.html#fig:htmltree">3.2</a>.</p>
<div class="figure"><span style="display:block;" id="fig:htmltree"></span>
<img src="images/html-tree.png" alt="Tree Structure of An HTML Document" width="648" />
<p class="caption">
Figure 3.2: Tree Structure of An HTML Document
</p>
</div>
</div>
<div id="tags-and-attributes" class="section level3" number="3.1.2">
<h3><span class="header-section-number">3.1.2</span> Tags and Attributes</h3>
<p>HTML has plenty of legal tags and attributes. On <a href="https://www.w3schools.com/html/html_basic.asp">W3CSchools</a>, there is a complete list of HTML tags and attributes for your reference. Common tags may include:</p>
<ul>
<li>Anchor tag <code>&lt;a&gt;</code></li>
<li>Metadata tag <code>&lt;meta&gt;</code></li>
<li>External tag <code>&lt;link&gt;</code></li>
<li>Emphasizing tags <code>&lt;b&gt;</code>, <code>&lt;i&gt;</code>, <code>&lt;strong&gt;</code></li>
<li>Paragraph tags <code>&lt;p&gt;</code></li>
<li>Heading tags <code>&lt;h1&gt;</code>, <code>&lt;h2&gt;</code>, <code>&lt;h3&gt;</code></li>
<li>Listing content tags <code>&lt;ul&gt;</code>, <code>&lt;ol&gt;</code></li>
<li>Block tags <code>&lt;div&gt;</code>, <code>&lt;span&gt;</code></li>
<li>Form-related tag <code>&lt;form&gt;</code>, <code>&lt;input&gt;</code></li>
<li>Foreign script tag <code>&lt;script&gt;</code></li>
<li>Table tag <code>&lt;table&gt;</code>, <code>&lt;th&gt;</code>, <code>&lt;tr&gt;</code>, <code>&lt;td&gt;</code></li>
</ul>
<p>You probably don’t have to know all the detail about the HTML tags and elements. However, in order to scrape the textual data from the Internet, you need to know at least from which parts of HTML elements you need your textual data from on the web pages.</p>
<div class="info">
<p>Usually, before you scrape the data from the webpage, bear the following questions in mind:</p>
<ul>
<li>From which HTML <strong>elements/tags</strong> would you like to extract the data for corpus construction?</li>
<li>Do you need the <strong>textual</strong> content of the HTML element?</li>
<li>Do you need a specific <strong>attribute</strong> of the HTML element?</li>
</ul>
</div>
</div>
<div id="css" class="section level3" number="3.1.3">
<h3><span class="header-section-number">3.1.3</span> CSS</h3>
<p>Cascading Style Sheet (CSS) is a language for describing the layout of HTML and other markup documents (e.g., XML).</p>
<p>HTML + CSS is by now the standard way to create and design web pages. The idea is that CSS specifies the formats/styles of the HTML elements. The following is an example of the CSS:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode css"><code class="sourceCode css"><span id="cb3-1"><a href="creating-corpus.html#cb3-1" aria-hidden="true" tabindex="-1"></a>div<span class="fu">.warnings</span> {</span>
<span id="cb3-2"><a href="creating-corpus.html#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">color</span>: <span class="cn">pink</span><span class="op">;</span></span>
<span id="cb3-3"><a href="creating-corpus.html#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">font-family</span>: <span class="st">&quot;Arial&quot;</span></span>
<span id="cb3-4"><a href="creating-corpus.html#cb3-4" aria-hidden="true" tabindex="-1"></a>  font-size: <span class="dv">120</span><span class="dt">%</span></span>
<span id="cb3-5"><a href="creating-corpus.html#cb3-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-6"><a href="creating-corpus.html#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="creating-corpus.html#cb3-7" aria-hidden="true" tabindex="-1"></a>h1 {</span>
<span id="cb3-8"><a href="creating-corpus.html#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="kw">padding-top</span>: <span class="dv">20</span><span class="dt">px</span></span>
<span id="cb3-9"><a href="creating-corpus.html#cb3-9" aria-hidden="true" tabindex="-1"></a>  padding-bottom: <span class="dv">20</span><span class="dt">px</span></span>
<span id="cb3-10"><a href="creating-corpus.html#cb3-10" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<style type="text/css">
div.warnings {
  color: pink;
  font-family: "Arial"
  font-size: 120%
}

h1 {
  padding-top: 20px
  padding-bottom: 20px
}
</style>
<div class="info">
<p>You probably would wonder how to link a set of CSS style definitions to an HTML document. There are in general three ways: inline, internal and external. You can learn more about this in <a href="https://www.w3schools.com/html/html_css.asp">W3School.com</a>.</p>
<p>Here I will show you an example of the <strong>internal</strong> method. Below is a CSS style definition for <code>&lt;h1&gt;</code>.</p>
<pre><code>h1 {
  color: red;
  margin-bottom: 2em;
}</code></pre>
<p>We can embed this within a <code>&lt;style&gt;...&lt;/style&gt;</code> element. Then you put the entire <code>&lt;style&gt;</code> element under <code>&lt;head&gt;</code> of the HTML file you would like to style.</p>
<pre><code>&lt;style&gt;
h1 {
  color: red;
  margin-bottom: 1.5em;
}
&lt;/style&gt;</code></pre>
<p>After you include the <code>&lt;style&gt;</code> in the HTML file, refresh the web page to see if the CSS style works.</p>
</div>
</div>
<div id="html-css-javascript" class="section level3" number="3.1.4">
<h3><span class="header-section-number">3.1.4</span> HTML + CSS ( + JavaScript)</h3>
<p><img src="images/web-page-design.png" width="80%" /></p>
<ul>
<li><a href="https://www.w3schools.com/">Try it</a>:
<ul>
<li>HTML: the language for building web pages</li>
<li>CSS: the language for styling web pages</li>
<li>JavaScript: the language for programming web pages</li>
</ul></li>
</ul>
</div>
</div>
<div id="web-crawling" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Web Crawling</h2>
<div class="warning">
<p>In the following demonstration, the text data scraped from the PTT forum is presented as it is without adjustment. However, please note that the language on PTT may strike some readers as profane, vulgar or even offensive.</p>
</div>
<p>In this tutorial, let’s assume that we like to scrape texts from <a href="https://www.ptt.cc/bbs/index.html">PTT Forum</a>. In particular, we will demonstrate how to scrape texts from the <a href="https://www.ptt.cc/bbs/Gossiping/index.html"><code>Gossiping</code></a> board of PTT.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="creating-corpus.html#cb6-1" aria-hidden="true" tabindex="-1"></a>ptt.url <span class="ot">&lt;-</span> <span class="st">&quot;https://www.ptt.cc/bbs/Gossiping&quot;</span></span></code></pre></div>
<p>If you use your browser to view <a href="https://www.ptt.cc/bbs/Gossiping">PTT Gossiping</a> page, you would see that you need to go through the age verification before you can enter the content page. So, our first job is to pass through this age verification.</p>
<ul>
<li>First, we create an <code>session()</code> (like we open a browser linking to the page)</li>
</ul>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="creating-corpus.html#cb7-1" aria-hidden="true" tabindex="-1"></a>gossiping.session <span class="ot">&lt;-</span> <span class="fu">session</span>(ptt.url)</span></code></pre></div>
<ul>
<li>Second, we extract the age verification form from the current page (<code>form</code> is also a defined HTML element)</li>
</ul>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="creating-corpus.html#cb8-1" aria-hidden="true" tabindex="-1"></a>gossiping.form <span class="ot">&lt;-</span> gossiping.session <span class="sc">%&gt;%</span></span>
<span id="cb8-2"><a href="creating-corpus.html#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_node</span>(<span class="st">&quot;form&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb8-3"><a href="creating-corpus.html#cb8-3" aria-hidden="true" tabindex="-1"></a>  html_form</span></code></pre></div>
<ul>
<li>Then we automatically submit an <code>yes</code> to the age verification form in the earlier created <code>session()</code> and create another session.</li>
</ul>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="creating-corpus.html#cb9-1" aria-hidden="true" tabindex="-1"></a>gossiping <span class="ot">&lt;-</span> <span class="fu">session_submit</span>(</span>
<span id="cb9-2"><a href="creating-corpus.html#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> gossiping.session,</span>
<span id="cb9-3"><a href="creating-corpus.html#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">form =</span> gossiping.form,</span>
<span id="cb9-4"><a href="creating-corpus.html#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">submit =</span> <span class="st">&quot;yes&quot;</span></span>
<span id="cb9-5"><a href="creating-corpus.html#cb9-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb9-6"><a href="creating-corpus.html#cb9-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-7"><a href="creating-corpus.html#cb9-7" aria-hidden="true" tabindex="-1"></a>gossiping</span></code></pre></div>
<pre><code>## &lt;session&gt; https://www.ptt.cc/bbs/Gossiping/index.html
##   Status: 200
##   Type:   text/html; charset=utf-8
##   Size:   12179</code></pre>
<p>Now our html <code>sesseion</code>, i.e., <code>gossiping</code>, should be on the front page of the <code>Gossiping</code> board.</p>
<hr />
<div class="info">
<p>
Most browsers come with the functionality to inspect the page source (i.e., HTML). This is very useful for web crawling. Before we scrape data from the webpage, we often need to inspect the structure of the web page first. Most importantly, we need to know (a) which HTML elements, or (b) which particular attributes/values of the HTML elements we are interested in .
</p>
</div>
<p><img src="images/view-page-source.png" width="80%" /><img src="images/view-page-source-2.png" width="80%" /></p>
<hr />
<ul>
<li>Next we need to find the most recent index page of the board</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="creating-corpus.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Decide the number of index pages ----</span></span>
<span id="cb11-2"><a href="creating-corpus.html#cb11-2" aria-hidden="true" tabindex="-1"></a>page.latest <span class="ot">&lt;-</span> gossiping <span class="sc">%&gt;%</span></span>
<span id="cb11-3"><a href="creating-corpus.html#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="st">&quot;a&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># extract all &lt;a&gt; elements</span></span>
<span id="cb11-4"><a href="creating-corpus.html#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_attr</span>(<span class="st">&quot;href&quot;</span>) <span class="sc">%&gt;%</span>  <span class="co"># extract the attributes `href`</span></span>
<span id="cb11-5"><a href="creating-corpus.html#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_subset</span>(<span class="st">&quot;index[0-9]{2,}</span><span class="sc">\\</span><span class="st">.html&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># find the `href` with the index number</span></span>
<span id="cb11-6"><a href="creating-corpus.html#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_extract</span>(<span class="st">&quot;[0-9]+&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># extract the number</span></span>
<span id="cb11-7"><a href="creating-corpus.html#cb11-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.numeric</span>()</span>
<span id="cb11-8"><a href="creating-corpus.html#cb11-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-9"><a href="creating-corpus.html#cb11-9" aria-hidden="true" tabindex="-1"></a>page.latest</span></code></pre></div>
<pre><code>## [1] 39071</code></pre>
<ul>
<li>On the most recent index page, we need to extract the hyperlinks to the articles</li>
</ul>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="creating-corpus.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Retreive links -----</span></span>
<span id="cb13-2"><a href="creating-corpus.html#cb13-2" aria-hidden="true" tabindex="-1"></a>link <span class="ot">&lt;-</span> <span class="fu">str_c</span>(ptt.url, <span class="st">&quot;/index&quot;</span>, page.latest, <span class="st">&quot;.html&quot;</span>)</span>
<span id="cb13-3"><a href="creating-corpus.html#cb13-3" aria-hidden="true" tabindex="-1"></a>links.article <span class="ot">&lt;-</span> gossiping <span class="sc">%&gt;%</span></span>
<span id="cb13-4"><a href="creating-corpus.html#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">session_jump_to</span>(link) <span class="sc">%&gt;%</span> <span class="co"># move session to the most recent page</span></span>
<span id="cb13-5"><a href="creating-corpus.html#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="st">&quot;a&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># extract article &lt;a&gt;</span></span>
<span id="cb13-6"><a href="creating-corpus.html#cb13-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_attr</span>(<span class="st">&quot;href&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># extract article &lt;a&gt; `href` attributes</span></span>
<span id="cb13-7"><a href="creating-corpus.html#cb13-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_subset</span>(<span class="st">&quot;[A-z]</span><span class="sc">\\</span><span class="st">.[0-9]+</span><span class="sc">\\</span><span class="st">.[A-z]</span><span class="sc">\\</span><span class="st">.[A-z0-9]+</span><span class="sc">\\</span><span class="st">.html&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># extract links</span></span>
<span id="cb13-8"><a href="creating-corpus.html#cb13-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_c</span>(<span class="st">&quot;https://www.ptt.cc&quot;</span>,.)</span>
<span id="cb13-9"><a href="creating-corpus.html#cb13-9" aria-hidden="true" tabindex="-1"></a>links.article</span></code></pre></div>
<pre><code>##  [1] &quot;https://www.ptt.cc/bbs/Gossiping/M.1645506720.A.7D9.html&quot;
##  [2] &quot;https://www.ptt.cc/bbs/Gossiping/M.1645506757.A.03F.html&quot;
##  [3] &quot;https://www.ptt.cc/bbs/Gossiping/M.1645506772.A.74D.html&quot;
##  [4] &quot;https://www.ptt.cc/bbs/Gossiping/M.1645506778.A.145.html&quot;
##  [5] &quot;https://www.ptt.cc/bbs/Gossiping/M.1645506786.A.BBC.html&quot;
##  [6] &quot;https://www.ptt.cc/bbs/Gossiping/M.1645506802.A.27A.html&quot;
##  [7] &quot;https://www.ptt.cc/bbs/Gossiping/M.1645506850.A.8C7.html&quot;
##  [8] &quot;https://www.ptt.cc/bbs/Gossiping/M.1645506878.A.D1B.html&quot;
##  [9] &quot;https://www.ptt.cc/bbs/Gossiping/M.1645506901.A.A55.html&quot;
## [10] &quot;https://www.ptt.cc/bbs/Gossiping/M.1645506941.A.8E3.html&quot;
## [11] &quot;https://www.ptt.cc/bbs/Gossiping/M.1645506955.A.D30.html&quot;
## [12] &quot;https://www.ptt.cc/bbs/Gossiping/M.1645506981.A.074.html&quot;
## [13] &quot;https://www.ptt.cc/bbs/Gossiping/M.1645506999.A.7A4.html&quot;
## [14] &quot;https://www.ptt.cc/bbs/Gossiping/M.1645507011.A.646.html&quot;
## [15] &quot;https://www.ptt.cc/bbs/Gossiping/M.1645507024.A.85B.html&quot;
## [16] &quot;https://www.ptt.cc/bbs/Gossiping/M.1645507024.A.503.html&quot;
## [17] &quot;https://www.ptt.cc/bbs/Gossiping/M.1645507129.A.C47.html&quot;
## [18] &quot;https://www.ptt.cc/bbs/Gossiping/M.1645507138.A.D25.html&quot;
## [19] &quot;https://www.ptt.cc/bbs/Gossiping/M.1645507233.A.9F7.html&quot;
## [20] &quot;https://www.ptt.cc/bbs/Gossiping/M.1645507244.A.15B.html&quot;</code></pre>
<ul>
<li>Next step is to scrape texts from each article hyperlink. Let’s consider one link first.</li>
</ul>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="creating-corpus.html#cb15-1" aria-hidden="true" tabindex="-1"></a>article.url <span class="ot">&lt;-</span> links.article[<span class="dv">1</span>]</span>
<span id="cb15-2"><a href="creating-corpus.html#cb15-2" aria-hidden="true" tabindex="-1"></a>temp.html <span class="ot">&lt;-</span> gossiping <span class="sc">%&gt;%</span> </span>
<span id="cb15-3"><a href="creating-corpus.html#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">session_jump_to</span>(article.url) <span class="co"># link to the article</span></span></code></pre></div>
<ul>
<li>Now the <code>temp.html</code> is like a browser on the article page. Because we are interested in the metadata and the contents of each article, now the question is: where are they in the HTML? We need to go back to the source page of the article HTML again:</li>
</ul>
<p><img src="images/view-page-source-3.png" width="100%" /></p>
<ul>
<li>After a closer inspection of the article HTML, we know that:
<ul>
<li>The metadata of the article are included in <code>&lt;span&gt;</code> tag elements, belonging to the class <code>class="article-meta-value"</code></li>
<li>The contents of the article are included in the <code>&lt;div&gt;</code> element, whose ID is <code>ID="main-content"</code></li>
</ul></li>
</ul>
<hr />
<ul>
<li>Now we are ready to extract the metadata of the article.</li>
</ul>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="creating-corpus.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract article metadata</span></span>
<span id="cb16-2"><a href="creating-corpus.html#cb16-2" aria-hidden="true" tabindex="-1"></a>article.header <span class="ot">&lt;-</span> temp.html <span class="sc">%&gt;%</span></span>
<span id="cb16-3"><a href="creating-corpus.html#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="st">&quot;span.article-meta-value&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># get &lt;span&gt; of a particular class</span></span>
<span id="cb16-4"><a href="creating-corpus.html#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text</span>()</span>
<span id="cb16-5"><a href="creating-corpus.html#cb16-5" aria-hidden="true" tabindex="-1"></a>article.header</span></code></pre></div>
<pre><code>## [1] &quot;jessica805 (JJJJ)&quot;                          
## [2] &quot;Gossiping&quot;                                  
## [3] &quot;[問卦] 中國筆記抄好了吧，應該承認台灣獨立了&quot;
## [4] &quot;Tue Feb 22 13:11:58 2022&quot;</code></pre>
<div class="info">
<p>The metadata of each PTT article in fact includes four pieces of information: author, board name, title, post time. The above code retrieves directly the values of these metadata.</p>
<p>We can retrieve the tags of these metadata values as well:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="creating-corpus.html#cb18-1" aria-hidden="true" tabindex="-1"></a>temp.html <span class="sc">%&gt;%</span></span>
<span id="cb18-2"><a href="creating-corpus.html#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="st">&quot;span.article-meta-tag&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># get &lt;span&gt; of a particular class</span></span>
<span id="cb18-3"><a href="creating-corpus.html#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text</span>()</span></code></pre></div>
<pre><code>## [1] &quot;作者&quot; &quot;看板&quot; &quot;標題&quot; &quot;時間&quot;</code></pre>
</div>
<ul>
<li>From the <code>article.header</code>, we are able to extract the <code>author</code>, <code>title</code>, and <code>time stamp</code> of the article.</li>
</ul>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="creating-corpus.html#cb20-1" aria-hidden="true" tabindex="-1"></a>article.author <span class="ot">&lt;-</span> article.header[<span class="dv">1</span>] <span class="sc">%&gt;%</span> <span class="fu">str_extract</span>(<span class="st">&quot;^[A-z0-9_]+&quot;</span>) <span class="co"># athuor</span></span>
<span id="cb20-2"><a href="creating-corpus.html#cb20-2" aria-hidden="true" tabindex="-1"></a>article.title <span class="ot">&lt;-</span> article.header[<span class="dv">3</span>] <span class="co"># title</span></span>
<span id="cb20-3"><a href="creating-corpus.html#cb20-3" aria-hidden="true" tabindex="-1"></a>article.datetime <span class="ot">&lt;-</span> article.header[<span class="dv">4</span>] <span class="co"># time stamp</span></span>
<span id="cb20-4"><a href="creating-corpus.html#cb20-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-5"><a href="creating-corpus.html#cb20-5" aria-hidden="true" tabindex="-1"></a>article.author</span></code></pre></div>
<pre><code>## [1] &quot;jessica805&quot;</code></pre>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="creating-corpus.html#cb22-1" aria-hidden="true" tabindex="-1"></a>article.title</span></code></pre></div>
<pre><code>## [1] &quot;[問卦] 中國筆記抄好了吧，應該承認台灣獨立了&quot;</code></pre>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="creating-corpus.html#cb24-1" aria-hidden="true" tabindex="-1"></a>article.datetime</span></code></pre></div>
<pre><code>## [1] &quot;Tue Feb 22 13:11:58 2022&quot;</code></pre>
<ul>
<li>Now we extract the main contents of the article</li>
</ul>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="creating-corpus.html#cb26-1" aria-hidden="true" tabindex="-1"></a>article.content <span class="ot">&lt;-</span> temp.html <span class="sc">%&gt;%</span></span>
<span id="cb26-2"><a href="creating-corpus.html#cb26-2" aria-hidden="true" tabindex="-1"></a>        <span class="fu">html_nodes</span>( <span class="co"># article body</span></span>
<span id="cb26-3"><a href="creating-corpus.html#cb26-3" aria-hidden="true" tabindex="-1"></a>          <span class="at">xpath =</span> <span class="st">&#39;//div[@id=&quot;main-content&quot;]/node()[not(self::div|self::span[@class=&quot;f2&quot;])]&#39;</span></span>
<span id="cb26-4"><a href="creating-corpus.html#cb26-4" aria-hidden="true" tabindex="-1"></a>        ) <span class="sc">%&gt;%</span></span>
<span id="cb26-5"><a href="creating-corpus.html#cb26-5" aria-hidden="true" tabindex="-1"></a>        <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> <span class="co"># extract texts</span></span>
<span id="cb26-6"><a href="creating-corpus.html#cb26-6" aria-hidden="true" tabindex="-1"></a>        <span class="fu">str_c</span>(<span class="at">collapse =</span> <span class="st">&quot;&quot;</span>) <span class="co"># combine all lines into one</span></span>
<span id="cb26-7"><a href="creating-corpus.html#cb26-7" aria-hidden="true" tabindex="-1"></a>article.content</span></code></pre></div>
<pre><code>## [1] &quot;中國看完老大哥俄羅斯的操作\n\n我承認你的獨立 所以我要派軍隊去維持秩序\n\n筆記應該抄好了吧\n\n該宣布台灣獨立\n\n派解放軍來維持東亞秩序了吧\n\n\n真開心快要實現祖國統一大夢了\n\n\n--&quot;</code></pre>
<div class="info">
<p>
<code>XPath</code> (or XML Path Language) is a query language which is useful for addressing and extracting particular elements from XML/HTML documents. XPath allows you to exploit more features of the hierarchical tree that an HTML file represents in locating the relevant HTML elements. For more information, please see <span class="citation"><span class="citation"><a href="#ref-munzert2014" role="doc-biblioref">Munzert et al.</a> (<a href="#ref-munzert2014" role="doc-biblioref">2014</a>)</span></span>, Chapter 4.
</p>
<p>
In the above example, the <code>XPath</code> identifies the nodes <em>under</em> <code>&lt;div id = “main-content”&gt;</code>, but excludes sister nodes that are <code>&lt;div&gt;</code> or <code>&lt;span class=“f2”&gt;</code>.
</p>
<p>
These children <code>&lt;div&gt;</code> or <code>&lt;span class=“f2”&gt;</code> of the <code>&lt;div id = “main-content”&gt;</code> include the push comments (推文) of the article, which are not the main content of the article.
</p>
</div>
<ul>
<li>Now we combine all information related to the article into a data frame</li>
</ul>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="creating-corpus.html#cb28-1" aria-hidden="true" tabindex="-1"></a>article.table <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb28-2"><a href="creating-corpus.html#cb28-2" aria-hidden="true" tabindex="-1"></a>      <span class="at">datetime =</span> article.datetime,</span>
<span id="cb28-3"><a href="creating-corpus.html#cb28-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">title =</span> article.title,</span>
<span id="cb28-4"><a href="creating-corpus.html#cb28-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">author =</span> article.author,</span>
<span id="cb28-5"><a href="creating-corpus.html#cb28-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">content =</span> article.content,</span>
<span id="cb28-6"><a href="creating-corpus.html#cb28-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">url =</span> article.url</span>
<span id="cb28-7"><a href="creating-corpus.html#cb28-7" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb28-8"><a href="creating-corpus.html#cb28-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-9"><a href="creating-corpus.html#cb28-9" aria-hidden="true" tabindex="-1"></a>article.table</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["datetime"],"name":[1],"type":["chr"],"align":["left"]},{"label":["title"],"name":[2],"type":["chr"],"align":["left"]},{"label":["author"],"name":[3],"type":["chr"],"align":["left"]},{"label":["content"],"name":[4],"type":["chr"],"align":["left"]},{"label":["url"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"Tue Feb 22 13:11:58 2022","2":"[問卦] 中國筆記抄好了吧，應該承認台灣獨立了","3":"jessica805","4":"中國看完老大哥俄羅斯的操作\\n\\n我承認你的獨立 所以我要派軍隊去維持秩序\\n\\n筆記應該抄好了吧\\n\\n該宣布台灣獨立\\n\\n派解放軍來維持東亞秩序了吧\\n\\n\\n真開心快要實現祖國統一大夢了\\n\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506720.A.7D9.html"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<ul>
<li>Next we extract the push comments at the end of the article</li>
</ul>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="creating-corpus.html#cb29-1" aria-hidden="true" tabindex="-1"></a>article.push <span class="ot">&lt;-</span> temp.html <span class="sc">%&gt;%</span> </span>
<span id="cb29-2"><a href="creating-corpus.html#cb29-2" aria-hidden="true" tabindex="-1"></a>        <span class="fu">html_nodes</span>(<span class="at">xpath =</span> <span class="st">&quot;//div[@class = &#39;push&#39;]&quot;</span>)</span>
<span id="cb29-3"><a href="creating-corpus.html#cb29-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-4"><a href="creating-corpus.html#cb29-4" aria-hidden="true" tabindex="-1"></a>article.push</span></code></pre></div>
<pre><code>## {xml_nodeset (10)}
##  [1] &lt;div class=&quot;push&quot;&gt;\n&lt;span class=&quot;f1 hl push-tag&quot;&gt;→ &lt;/span&gt;&lt;span class=&quot;f ...
##  [2] &lt;div class=&quot;push&quot;&gt;\n&lt;span class=&quot;hl push-tag&quot;&gt;推 &lt;/span&gt;&lt;span class=&quot;f3 h ...
##  [3] &lt;div class=&quot;push&quot;&gt;\n&lt;span class=&quot;f1 hl push-tag&quot;&gt;→ &lt;/span&gt;&lt;span class=&quot;f ...
##  [4] &lt;div class=&quot;push&quot;&gt;\n&lt;span class=&quot;f1 hl push-tag&quot;&gt;→ &lt;/span&gt;&lt;span class=&quot;f ...
##  [5] &lt;div class=&quot;push&quot;&gt;\n&lt;span class=&quot;hl push-tag&quot;&gt;推 &lt;/span&gt;&lt;span class=&quot;f3 h ...
##  [6] &lt;div class=&quot;push&quot;&gt;\n&lt;span class=&quot;hl push-tag&quot;&gt;推 &lt;/span&gt;&lt;span class=&quot;f3 h ...
##  [7] &lt;div class=&quot;push&quot;&gt;\n&lt;span class=&quot;f1 hl push-tag&quot;&gt;→ &lt;/span&gt;&lt;span class=&quot;f ...
##  [8] &lt;div class=&quot;push&quot;&gt;\n&lt;span class=&quot;hl push-tag&quot;&gt;推 &lt;/span&gt;&lt;span class=&quot;f3 h ...
##  [9] &lt;div class=&quot;push&quot;&gt;\n&lt;span class=&quot;f1 hl push-tag&quot;&gt;→ &lt;/span&gt;&lt;span class=&quot;f ...
## [10] &lt;div class=&quot;push&quot;&gt;\n&lt;span class=&quot;hl push-tag&quot;&gt;推 &lt;/span&gt;&lt;span class=&quot;f3 h ...</code></pre>
<ul>
<li><p>We then extract relevant information from each push nodes <code>article.push</code>.</p>
<ul>
<li>push types</li>
<li>push authors</li>
<li>push contents</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="creating-corpus.html#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># push tags</span></span>
<span id="cb31-2"><a href="creating-corpus.html#cb31-2" aria-hidden="true" tabindex="-1"></a>push.table.tag <span class="ot">&lt;-</span> article.push <span class="sc">%&gt;%</span> </span>
<span id="cb31-3"><a href="creating-corpus.html#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="st">&quot;span.push-tag&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb31-4"><a href="creating-corpus.html#cb31-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>) <span class="co"># push types (like or dislike)</span></span>
<span id="cb31-5"><a href="creating-corpus.html#cb31-5" aria-hidden="true" tabindex="-1"></a>push.table.tag</span></code></pre></div>
<pre><code>##  [1] &quot;→&quot;  &quot;推&quot; &quot;→&quot;  &quot;→&quot;  &quot;推&quot; &quot;推&quot; &quot;→&quot;  &quot;推&quot; &quot;→&quot;  &quot;推&quot;</code></pre>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="creating-corpus.html#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># push authors</span></span>
<span id="cb33-2"><a href="creating-corpus.html#cb33-2" aria-hidden="true" tabindex="-1"></a>push.table.author <span class="ot">&lt;-</span> article.push <span class="sc">%&gt;%</span> </span>
<span id="cb33-3"><a href="creating-corpus.html#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="st">&quot;span.push-userid&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb33-4"><a href="creating-corpus.html#cb33-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>) <span class="co"># author</span></span>
<span id="cb33-5"><a href="creating-corpus.html#cb33-5" aria-hidden="true" tabindex="-1"></a>push.table.author</span></code></pre></div>
<pre><code>##  [1] &quot;breacal&quot;    &quot;chadmu&quot;     &quot;wawaking1&quot;  &quot;dangercat5&quot; &quot;skullno2&quot;  
##  [6] &quot;ash024&quot;     &quot;yycbr&quot;      &quot;lastphil&quot;   &quot;milkBK&quot;     &quot;jevin&quot;</code></pre>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="creating-corpus.html#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># push contents</span></span>
<span id="cb35-2"><a href="creating-corpus.html#cb35-2" aria-hidden="true" tabindex="-1"></a>push.table.content <span class="ot">&lt;-</span> article.push <span class="sc">%&gt;%</span> </span>
<span id="cb35-3"><a href="creating-corpus.html#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="st">&quot;span.push-content&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb35-4"><a href="creating-corpus.html#cb35-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>)</span>
<span id="cb35-5"><a href="creating-corpus.html#cb35-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-6"><a href="creating-corpus.html#cb35-6" aria-hidden="true" tabindex="-1"></a>push.table.content</span></code></pre></div>
<pre><code>##  [1] &quot;: 柯韓粉這樣晦氣撲撲喔&quot;               
##  [2] &quot;: 笑支那不來&quot;                         
##  [3] &quot;: 不好意思喔，美軍已經在台灣了喔&quot;     
##  [4] &quot;: 在非洲過60秒=1分鐘&quot;                 
##  [5] &quot;: 拜登執政 中共不敢飛越台灣被看破手腳&quot;
##  [6] &quot;: 好&quot;                                 
##  [7] &quot;: 臺灣都沒宣布獨立 怎麼承認?弄反了喔&quot; 
##  [8] &quot;: 蔡都不敢吭聲台灣獨立了 笑死&quot;        
##  [9] &quot;: 股價-10%喔 你要想清楚欸&quot;            
## [10] &quot;: 承認花蓮台東獨立  簽協定維和駐軍&quot;</code></pre>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="creating-corpus.html#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># push time</span></span>
<span id="cb37-2"><a href="creating-corpus.html#cb37-2" aria-hidden="true" tabindex="-1"></a>push.table.datetime <span class="ot">&lt;-</span> article.push <span class="sc">%&gt;%</span> </span>
<span id="cb37-3"><a href="creating-corpus.html#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="st">&quot;span.push-ipdatetime&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb37-4"><a href="creating-corpus.html#cb37-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>) <span class="co"># push time stamp</span></span>
<span id="cb37-5"><a href="creating-corpus.html#cb37-5" aria-hidden="true" tabindex="-1"></a>push.table.datetime</span></code></pre></div>
<pre><code>##  [1] &quot;114.25.203.112 02/22 13:12&quot;  &quot;220.129.217.34 02/22 13:12&quot; 
##  [3] &quot;61.223.53.164 02/22 13:12&quot;   &quot;111.248.160.139 02/22 13:12&quot;
##  [5] &quot;27.242.13.129 02/22 13:13&quot;   &quot;203.74.156.61 02/22 13:14&quot;  
##  [7] &quot;140.240.39.196 02/22 13:14&quot;  &quot;114.34.15.151 02/22 13:16&quot;  
##  [9] &quot;114.34.189.70 02/22 13:16&quot;   &quot;114.37.200.248 02/22 13:17&quot;</code></pre>
<ul>
<li>Finally, we combine all into one Push data frame.</li>
</ul>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="creating-corpus.html#cb39-1" aria-hidden="true" tabindex="-1"></a>push.table <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb39-2"><a href="creating-corpus.html#cb39-2" aria-hidden="true" tabindex="-1"></a>      <span class="at">tag =</span> push.table.tag,</span>
<span id="cb39-3"><a href="creating-corpus.html#cb39-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">author =</span> push.table.author,</span>
<span id="cb39-4"><a href="creating-corpus.html#cb39-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">content =</span> push.table.content,</span>
<span id="cb39-5"><a href="creating-corpus.html#cb39-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">datetime =</span> push.table.datetime,</span>
<span id="cb39-6"><a href="creating-corpus.html#cb39-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">url =</span> article.url)</span>
<span id="cb39-7"><a href="creating-corpus.html#cb39-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-8"><a href="creating-corpus.html#cb39-8" aria-hidden="true" tabindex="-1"></a>push.table</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["tag"],"name":[1],"type":["chr"],"align":["left"]},{"label":["author"],"name":[2],"type":["chr"],"align":["left"]},{"label":["content"],"name":[3],"type":["chr"],"align":["left"]},{"label":["datetime"],"name":[4],"type":["chr"],"align":["left"]},{"label":["url"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"→","2":"breacal","3":": 柯韓粉這樣晦氣撲撲喔","4":"114.25.203.112 02/22 13:12","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506720.A.7D9.html"},{"1":"推","2":"chadmu","3":": 笑支那不來","4":"220.129.217.34 02/22 13:12","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506720.A.7D9.html"},{"1":"→","2":"wawaking1","3":": 不好意思喔，美軍已經在台灣了喔","4":"61.223.53.164 02/22 13:12","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506720.A.7D9.html"},{"1":"→","2":"dangercat5","3":": 在非洲過60秒=1分鐘","4":"111.248.160.139 02/22 13:12","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506720.A.7D9.html"},{"1":"推","2":"skullno2","3":": 拜登執政 中共不敢飛越台灣被看破手腳","4":"27.242.13.129 02/22 13:13","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506720.A.7D9.html"},{"1":"推","2":"ash024","3":": 好","4":"203.74.156.61 02/22 13:14","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506720.A.7D9.html"},{"1":"→","2":"yycbr","3":": 臺灣都沒宣布獨立 怎麼承認?弄反了喔","4":"140.240.39.196 02/22 13:14","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506720.A.7D9.html"},{"1":"推","2":"lastphil","3":": 蔡都不敢吭聲台灣獨立了 笑死","4":"114.34.15.151 02/22 13:16","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506720.A.7D9.html"},{"1":"→","2":"milkBK","3":": 股價-10%喔 你要想清楚欸","4":"114.34.189.70 02/22 13:16","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506720.A.7D9.html"},{"1":"推","2":"jevin","3":": 承認花蓮台東獨立  簽協定維和駐軍","4":"114.37.200.248 02/22 13:17","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506720.A.7D9.html"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div id="functional-programming" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> Functional Programming</h2>
<p>It should now be clear that there are several routines that we need to do again and again if we want to collect text data in large amounts:</p>
<ul>
<li>For each index page, we need to extract all the article hyperlinks of the page.</li>
<li>For each article hyperlink, we need to extract the article content, metadata, and the push comments.</li>
</ul>
<p>So, it would be great if we can wrap these two routines into two functions.</p>
<div id="extract_art_links" class="section level3" number="3.3.1">
<h3><span class="header-section-number">3.3.1</span> <code>extract_art_links()</code></h3>
<ul>
<li><code>extract_art_links()</code>: This function takes an HTML session <code>session</code> and an index page of the PTT Gossiping <code>index_page</code> as the arguments and extract all article links from the index page. It returns a vector of article links.</li>
</ul>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="creating-corpus.html#cb40-1" aria-hidden="true" tabindex="-1"></a>extract_art_links <span class="ot">&lt;-</span> <span class="cf">function</span>(index_page, session){</span>
<span id="cb40-2"><a href="creating-corpus.html#cb40-2" aria-hidden="true" tabindex="-1"></a>  links.article <span class="ot">&lt;-</span> session <span class="sc">%&gt;%</span></span>
<span id="cb40-3"><a href="creating-corpus.html#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">session_jump_to</span>(index_page) <span class="sc">%&gt;%</span></span>
<span id="cb40-4"><a href="creating-corpus.html#cb40-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="st">&quot;a&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb40-5"><a href="creating-corpus.html#cb40-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_attr</span>(<span class="st">&quot;href&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb40-6"><a href="creating-corpus.html#cb40-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_subset</span>(<span class="st">&quot;[A-z]</span><span class="sc">\\</span><span class="st">.[0-9]+</span><span class="sc">\\</span><span class="st">.[A-z]</span><span class="sc">\\</span><span class="st">.[A-z0-9]+</span><span class="sc">\\</span><span class="st">.html&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb40-7"><a href="creating-corpus.html#cb40-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_c</span>(<span class="st">&quot;https://www.ptt.cc&quot;</span>,.)</span>
<span id="cb40-8"><a href="creating-corpus.html#cb40-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-9"><a href="creating-corpus.html#cb40-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(links.article)</span>
<span id="cb40-10"><a href="creating-corpus.html#cb40-10" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>For example, we can extract all the article links from the most recent index page:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="creating-corpus.html#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get index page</span></span>
<span id="cb41-2"><a href="creating-corpus.html#cb41-2" aria-hidden="true" tabindex="-1"></a>cur_index_page <span class="ot">&lt;-</span> <span class="fu">str_c</span>(ptt.url, <span class="st">&quot;/index&quot;</span>, page.latest, <span class="st">&quot;.html&quot;</span>)</span>
<span id="cb41-3"><a href="creating-corpus.html#cb41-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Get all article links from the most recent index page</span></span>
<span id="cb41-4"><a href="creating-corpus.html#cb41-4" aria-hidden="true" tabindex="-1"></a>cur_art_links <span class="ot">&lt;-</span><span class="fu">extract_art_links</span>(cur_index_page, gossiping)</span>
<span id="cb41-5"><a href="creating-corpus.html#cb41-5" aria-hidden="true" tabindex="-1"></a>cur_art_links</span></code></pre></div>
<pre><code>##  [1] &quot;https://www.ptt.cc/bbs/Gossiping/M.1645506720.A.7D9.html&quot;
##  [2] &quot;https://www.ptt.cc/bbs/Gossiping/M.1645506757.A.03F.html&quot;
##  [3] &quot;https://www.ptt.cc/bbs/Gossiping/M.1645506772.A.74D.html&quot;
##  [4] &quot;https://www.ptt.cc/bbs/Gossiping/M.1645506778.A.145.html&quot;
##  [5] &quot;https://www.ptt.cc/bbs/Gossiping/M.1645506786.A.BBC.html&quot;
##  [6] &quot;https://www.ptt.cc/bbs/Gossiping/M.1645506802.A.27A.html&quot;
##  [7] &quot;https://www.ptt.cc/bbs/Gossiping/M.1645506850.A.8C7.html&quot;
##  [8] &quot;https://www.ptt.cc/bbs/Gossiping/M.1645506878.A.D1B.html&quot;
##  [9] &quot;https://www.ptt.cc/bbs/Gossiping/M.1645506901.A.A55.html&quot;
## [10] &quot;https://www.ptt.cc/bbs/Gossiping/M.1645506941.A.8E3.html&quot;
## [11] &quot;https://www.ptt.cc/bbs/Gossiping/M.1645506955.A.D30.html&quot;
## [12] &quot;https://www.ptt.cc/bbs/Gossiping/M.1645506981.A.074.html&quot;
## [13] &quot;https://www.ptt.cc/bbs/Gossiping/M.1645506999.A.7A4.html&quot;
## [14] &quot;https://www.ptt.cc/bbs/Gossiping/M.1645507011.A.646.html&quot;
## [15] &quot;https://www.ptt.cc/bbs/Gossiping/M.1645507024.A.85B.html&quot;
## [16] &quot;https://www.ptt.cc/bbs/Gossiping/M.1645507024.A.503.html&quot;
## [17] &quot;https://www.ptt.cc/bbs/Gossiping/M.1645507129.A.C47.html&quot;
## [18] &quot;https://www.ptt.cc/bbs/Gossiping/M.1645507138.A.D25.html&quot;
## [19] &quot;https://www.ptt.cc/bbs/Gossiping/M.1645507233.A.9F7.html&quot;
## [20] &quot;https://www.ptt.cc/bbs/Gossiping/M.1645507244.A.15B.html&quot;</code></pre>
</div>
<div id="extract_article_push_tables" class="section level3" number="3.3.2">
<h3><span class="header-section-number">3.3.2</span> <code>extract_article_push_tables()</code></h3>
<ul>
<li><code>extract_article_push_tables()</code>: This function takes an article link <code>link</code> as the argument and extracts the metadata, textual contents, and pushes of the article. It returns a <em>list</em> of two elements—article and push data frames.</li>
</ul>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="creating-corpus.html#cb43-1" aria-hidden="true" tabindex="-1"></a>extract_article_push_tables <span class="ot">&lt;-</span> <span class="cf">function</span>(link){</span>
<span id="cb43-2"><a href="creating-corpus.html#cb43-2" aria-hidden="true" tabindex="-1"></a>  article.url <span class="ot">&lt;-</span> link</span>
<span id="cb43-3"><a href="creating-corpus.html#cb43-3" aria-hidden="true" tabindex="-1"></a>  temp.html <span class="ot">&lt;-</span> gossiping <span class="sc">%&gt;%</span> <span class="fu">session_jump_to</span>(article.url) <span class="co"># link to the www</span></span>
<span id="cb43-4"><a href="creating-corpus.html#cb43-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># article header</span></span>
<span id="cb43-5"><a href="creating-corpus.html#cb43-5" aria-hidden="true" tabindex="-1"></a>  article.header <span class="ot">&lt;-</span> temp.html <span class="sc">%&gt;%</span></span>
<span id="cb43-6"><a href="creating-corpus.html#cb43-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_nodes</span>(<span class="st">&quot;span.article-meta-value&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># meta info regarding the article</span></span>
<span id="cb43-7"><a href="creating-corpus.html#cb43-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_text</span>()</span>
<span id="cb43-8"><a href="creating-corpus.html#cb43-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb43-9"><a href="creating-corpus.html#cb43-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># article meta</span></span>
<span id="cb43-10"><a href="creating-corpus.html#cb43-10" aria-hidden="true" tabindex="-1"></a>  article.author <span class="ot">&lt;-</span> article.header[<span class="dv">1</span>] <span class="sc">%&gt;%</span> <span class="fu">str_extract</span>(<span class="st">&quot;^[A-z0-9_]+&quot;</span>) <span class="co"># athuor</span></span>
<span id="cb43-11"><a href="creating-corpus.html#cb43-11" aria-hidden="true" tabindex="-1"></a>  article.title <span class="ot">&lt;-</span> article.header[<span class="dv">3</span>] <span class="co"># title</span></span>
<span id="cb43-12"><a href="creating-corpus.html#cb43-12" aria-hidden="true" tabindex="-1"></a>  article.datetime <span class="ot">&lt;-</span> article.header[<span class="dv">4</span>] <span class="co"># time stamp</span></span>
<span id="cb43-13"><a href="creating-corpus.html#cb43-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb43-14"><a href="creating-corpus.html#cb43-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># article content</span></span>
<span id="cb43-15"><a href="creating-corpus.html#cb43-15" aria-hidden="true" tabindex="-1"></a>  article.content <span class="ot">&lt;-</span> temp.html <span class="sc">%&gt;%</span></span>
<span id="cb43-16"><a href="creating-corpus.html#cb43-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_nodes</span>( <span class="co"># article body</span></span>
<span id="cb43-17"><a href="creating-corpus.html#cb43-17" aria-hidden="true" tabindex="-1"></a>      <span class="at">xpath =</span> <span class="st">&#39;//div[@id=&quot;main-content&quot;]/node()[not(self::div|self::span[@class=&quot;f2&quot;])]&#39;</span></span>
<span id="cb43-18"><a href="creating-corpus.html#cb43-18" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb43-19"><a href="creating-corpus.html#cb43-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb43-20"><a href="creating-corpus.html#cb43-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_c</span>(<span class="at">collapse =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb43-21"><a href="creating-corpus.html#cb43-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb43-22"><a href="creating-corpus.html#cb43-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Merge article table </span></span>
<span id="cb43-23"><a href="creating-corpus.html#cb43-23" aria-hidden="true" tabindex="-1"></a>  article.table <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb43-24"><a href="creating-corpus.html#cb43-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">datetime =</span> article.datetime,</span>
<span id="cb43-25"><a href="creating-corpus.html#cb43-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> article.title,</span>
<span id="cb43-26"><a href="creating-corpus.html#cb43-26" aria-hidden="true" tabindex="-1"></a>        <span class="at">author =</span> article.author,</span>
<span id="cb43-27"><a href="creating-corpus.html#cb43-27" aria-hidden="true" tabindex="-1"></a>        <span class="at">content =</span> article.content,</span>
<span id="cb43-28"><a href="creating-corpus.html#cb43-28" aria-hidden="true" tabindex="-1"></a>        <span class="at">url =</span> article.url</span>
<span id="cb43-29"><a href="creating-corpus.html#cb43-29" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb43-30"><a href="creating-corpus.html#cb43-30" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb43-31"><a href="creating-corpus.html#cb43-31" aria-hidden="true" tabindex="-1"></a>  <span class="co"># push nodes</span></span>
<span id="cb43-32"><a href="creating-corpus.html#cb43-32" aria-hidden="true" tabindex="-1"></a>  article.push <span class="ot">&lt;-</span> temp.html <span class="sc">%&gt;%</span> </span>
<span id="cb43-33"><a href="creating-corpus.html#cb43-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_nodes</span>(<span class="at">xpath =</span> <span class="st">&quot;//div[@class = &#39;push&#39;]&quot;</span>) <span class="co"># extracting pushes</span></span>
<span id="cb43-34"><a href="creating-corpus.html#cb43-34" aria-hidden="true" tabindex="-1"></a>    <span class="co"># </span><span class="al">NOTE</span><span class="co">: If CSS is used, div.push does a lazy match (extracting div.push.... also)</span></span>
<span id="cb43-35"><a href="creating-corpus.html#cb43-35" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb43-36"><a href="creating-corpus.html#cb43-36" aria-hidden="true" tabindex="-1"></a>  <span class="co"># push tags    </span></span>
<span id="cb43-37"><a href="creating-corpus.html#cb43-37" aria-hidden="true" tabindex="-1"></a>  push.table.tag <span class="ot">&lt;-</span> article.push <span class="sc">%&gt;%</span> </span>
<span id="cb43-38"><a href="creating-corpus.html#cb43-38" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_nodes</span>(<span class="st">&quot;span.push-tag&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb43-39"><a href="creating-corpus.html#cb43-39" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>) <span class="co"># push types (like or dislike)</span></span>
<span id="cb43-40"><a href="creating-corpus.html#cb43-40" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb43-41"><a href="creating-corpus.html#cb43-41" aria-hidden="true" tabindex="-1"></a>  <span class="co"># push author id</span></span>
<span id="cb43-42"><a href="creating-corpus.html#cb43-42" aria-hidden="true" tabindex="-1"></a>  push.table.author <span class="ot">&lt;-</span> article.push <span class="sc">%&gt;%</span> </span>
<span id="cb43-43"><a href="creating-corpus.html#cb43-43" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_nodes</span>(<span class="st">&quot;span.push-userid&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb43-44"><a href="creating-corpus.html#cb43-44" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>) <span class="co"># author</span></span>
<span id="cb43-45"><a href="creating-corpus.html#cb43-45" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb43-46"><a href="creating-corpus.html#cb43-46" aria-hidden="true" tabindex="-1"></a>  <span class="co"># push content    </span></span>
<span id="cb43-47"><a href="creating-corpus.html#cb43-47" aria-hidden="true" tabindex="-1"></a>  push.table.content <span class="ot">&lt;-</span> article.push <span class="sc">%&gt;%</span> </span>
<span id="cb43-48"><a href="creating-corpus.html#cb43-48" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_nodes</span>(<span class="st">&quot;span.push-content&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb43-49"><a href="creating-corpus.html#cb43-49" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>)</span>
<span id="cb43-50"><a href="creating-corpus.html#cb43-50" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb43-51"><a href="creating-corpus.html#cb43-51" aria-hidden="true" tabindex="-1"></a>  <span class="co"># push datetime      </span></span>
<span id="cb43-52"><a href="creating-corpus.html#cb43-52" aria-hidden="true" tabindex="-1"></a>  push.table.datetime <span class="ot">&lt;-</span> article.push <span class="sc">%&gt;%</span> </span>
<span id="cb43-53"><a href="creating-corpus.html#cb43-53" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_nodes</span>(<span class="st">&quot;span.push-ipdatetime&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb43-54"><a href="creating-corpus.html#cb43-54" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>) <span class="co"># push time stamp</span></span>
<span id="cb43-55"><a href="creating-corpus.html#cb43-55" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb43-56"><a href="creating-corpus.html#cb43-56" aria-hidden="true" tabindex="-1"></a>  <span class="co"># merge push table</span></span>
<span id="cb43-57"><a href="creating-corpus.html#cb43-57" aria-hidden="true" tabindex="-1"></a>  push.table <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb43-58"><a href="creating-corpus.html#cb43-58" aria-hidden="true" tabindex="-1"></a>          <span class="at">tag =</span> push.table.tag,</span>
<span id="cb43-59"><a href="creating-corpus.html#cb43-59" aria-hidden="true" tabindex="-1"></a>          <span class="at">author =</span> push.table.author,</span>
<span id="cb43-60"><a href="creating-corpus.html#cb43-60" aria-hidden="true" tabindex="-1"></a>          <span class="at">content =</span> push.table.content,</span>
<span id="cb43-61"><a href="creating-corpus.html#cb43-61" aria-hidden="true" tabindex="-1"></a>          <span class="at">datetime =</span> push.table.datetime,</span>
<span id="cb43-62"><a href="creating-corpus.html#cb43-62" aria-hidden="true" tabindex="-1"></a>          <span class="at">url =</span> article.url</span>
<span id="cb43-63"><a href="creating-corpus.html#cb43-63" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb43-64"><a href="creating-corpus.html#cb43-64" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb43-65"><a href="creating-corpus.html#cb43-65" aria-hidden="true" tabindex="-1"></a>  <span class="co"># return</span></span>
<span id="cb43-66"><a href="creating-corpus.html#cb43-66" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb43-67"><a href="creating-corpus.html#cb43-67" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">list</span>(<span class="at">article.table =</span> article.table, </span>
<span id="cb43-68"><a href="creating-corpus.html#cb43-68" aria-hidden="true" tabindex="-1"></a>              <span class="at">push.table =</span> push.table))</span>
<span id="cb43-69"><a href="creating-corpus.html#cb43-69" aria-hidden="true" tabindex="-1"></a>}<span class="co">#endfunc</span></span></code></pre></div>
<p>For example, we can get the <code>article</code> and <code>push</code> tables from the first article link:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="creating-corpus.html#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">extract_article_push_tables</span>(cur_art_links[<span class="dv">1</span>])</span></code></pre></div>
<pre><code>## $article.table
## # A tibble: 1 × 5
##   datetime                 title        author  content            url          
##   &lt;chr&gt;                    &lt;chr&gt;        &lt;chr&gt;   &lt;chr&gt;              &lt;chr&gt;        
## 1 Tue Feb 22 13:11:58 2022 [問卦] 中國… jessic… &quot;中國看完老大哥俄… https://www.…
## 
## $push.table
## # A tibble: 10 × 5
##    tag   author     content                               datetime    url       
##    &lt;chr&gt; &lt;chr&gt;      &lt;chr&gt;                                 &lt;chr&gt;       &lt;chr&gt;     
##  1 →     breacal    : 柯韓粉這樣晦氣撲撲喔                114.25.203… https://w…
##  2 推    chadmu     : 笑支那不來                          220.129.21… https://w…
##  3 →     wawaking1  : 不好意思喔，美軍已經在台灣了喔      61.223.53.… https://w…
##  4 →     dangercat5 : 在非洲過60秒=1分鐘                  111.248.16… https://w…
##  5 推    skullno2   : 拜登執政 中共不敢飛越台灣被看破手腳 27.242.13.… https://w…
##  6 推    ash024     : 好                                  203.74.156… https://w…
##  7 →     yycbr      : 臺灣都沒宣布獨立 怎麼承認?弄反了喔  140.240.39… https://w…
##  8 推    lastphil   : 蔡都不敢吭聲台灣獨立了 笑死         114.34.15.… https://w…
##  9 →     milkBK     : 股價-10%喔 你要想清楚欸             114.34.189… https://w…
## 10 推    jevin      : 承認花蓮台東獨立  簽協定維和駐軍    114.37.200… https://w…</code></pre>
</div>
<div id="streamline-the-codes" class="section level3" number="3.3.3">
<h3><span class="header-section-number">3.3.3</span> Streamline the Codes</h3>
<p>Now we can simplify our codes quite a bit:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="creating-corpus.html#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get index page</span></span>
<span id="cb46-2"><a href="creating-corpus.html#cb46-2" aria-hidden="true" tabindex="-1"></a>cur_index_page <span class="ot">&lt;-</span> <span class="fu">str_c</span>(ptt.url, <span class="st">&quot;/index&quot;</span>, page.latest, <span class="st">&quot;.html&quot;</span>)</span>
<span id="cb46-3"><a href="creating-corpus.html#cb46-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-4"><a href="creating-corpus.html#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Scrape all article.tables and push.tables from each article hyperlink</span></span>
<span id="cb46-5"><a href="creating-corpus.html#cb46-5" aria-hidden="true" tabindex="-1"></a>cur_index_page <span class="sc">%&gt;%</span></span>
<span id="cb46-6"><a href="creating-corpus.html#cb46-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">extract_art_links</span>(<span class="at">session =</span> gossiping) <span class="sc">%&gt;%</span></span>
<span id="cb46-7"><a href="creating-corpus.html#cb46-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(extract_article_push_tables) <span class="ot">-&gt;</span> ptt_data</span></code></pre></div>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="creating-corpus.html#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># number of articles on this index page</span></span>
<span id="cb47-2"><a href="creating-corpus.html#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(ptt_data)</span></code></pre></div>
<pre><code>## [1] 20</code></pre>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="creating-corpus.html#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check the first contents of 1st hyperlink</span></span>
<span id="cb49-2"><a href="creating-corpus.html#cb49-2" aria-hidden="true" tabindex="-1"></a>ptt_data[[<span class="dv">1</span>]]<span class="sc">$</span>article.table</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["datetime"],"name":[1],"type":["chr"],"align":["left"]},{"label":["title"],"name":[2],"type":["chr"],"align":["left"]},{"label":["author"],"name":[3],"type":["chr"],"align":["left"]},{"label":["content"],"name":[4],"type":["chr"],"align":["left"]},{"label":["url"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"Tue Feb 22 13:11:58 2022","2":"[問卦] 中國筆記抄好了吧，應該承認台灣獨立了","3":"jessica805","4":"中國看完老大哥俄羅斯的操作\\n\\n我承認你的獨立 所以我要派軍隊去維持秩序\\n\\n筆記應該抄好了吧\\n\\n該宣布台灣獨立\\n\\n派解放軍來維持東亞秩序了吧\\n\\n\\n真開心快要實現祖國統一大夢了\\n\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506720.A.7D9.html"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="creating-corpus.html#cb50-1" aria-hidden="true" tabindex="-1"></a>ptt_data[[<span class="dv">1</span>]]<span class="sc">$</span>push.table</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["tag"],"name":[1],"type":["chr"],"align":["left"]},{"label":["author"],"name":[2],"type":["chr"],"align":["left"]},{"label":["content"],"name":[3],"type":["chr"],"align":["left"]},{"label":["datetime"],"name":[4],"type":["chr"],"align":["left"]},{"label":["url"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"→","2":"breacal","3":": 柯韓粉這樣晦氣撲撲喔","4":"114.25.203.112 02/22 13:12","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506720.A.7D9.html"},{"1":"推","2":"chadmu","3":": 笑支那不來","4":"220.129.217.34 02/22 13:12","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506720.A.7D9.html"},{"1":"→","2":"wawaking1","3":": 不好意思喔，美軍已經在台灣了喔","4":"61.223.53.164 02/22 13:12","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506720.A.7D9.html"},{"1":"→","2":"dangercat5","3":": 在非洲過60秒=1分鐘","4":"111.248.160.139 02/22 13:12","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506720.A.7D9.html"},{"1":"推","2":"skullno2","3":": 拜登執政 中共不敢飛越台灣被看破手腳","4":"27.242.13.129 02/22 13:13","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506720.A.7D9.html"},{"1":"推","2":"ash024","3":": 好","4":"203.74.156.61 02/22 13:14","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506720.A.7D9.html"},{"1":"→","2":"yycbr","3":": 臺灣都沒宣布獨立 怎麼承認?弄反了喔","4":"140.240.39.196 02/22 13:14","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506720.A.7D9.html"},{"1":"推","2":"lastphil","3":": 蔡都不敢吭聲台灣獨立了 笑死","4":"114.34.15.151 02/22 13:16","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506720.A.7D9.html"},{"1":"→","2":"milkBK","3":": 股價-10%喔 你要想清楚欸","4":"114.34.189.70 02/22 13:16","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506720.A.7D9.html"},{"1":"推","2":"jevin","3":": 承認花蓮台東獨立  簽協定維和駐軍","4":"114.37.200.248 02/22 13:17","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506720.A.7D9.html"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<ul>
<li>Finally, the last thing we can do is to combine all article tables from each index page into one; and all push tables into one for later analysis.</li>
</ul>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="creating-corpus.html#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge all article.tables into one</span></span>
<span id="cb51-2"><a href="creating-corpus.html#cb51-2" aria-hidden="true" tabindex="-1"></a>article.table.all <span class="ot">&lt;-</span> ptt_data <span class="sc">%&gt;%</span> </span>
<span id="cb51-3"><a href="creating-corpus.html#cb51-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="cf">function</span>(x) x<span class="sc">$</span>article.table) <span class="sc">%&gt;%</span></span>
<span id="cb51-4"><a href="creating-corpus.html#cb51-4" aria-hidden="true" tabindex="-1"></a>  bind_rows</span>
<span id="cb51-5"><a href="creating-corpus.html#cb51-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-6"><a href="creating-corpus.html#cb51-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge all push.tables into one</span></span>
<span id="cb51-7"><a href="creating-corpus.html#cb51-7" aria-hidden="true" tabindex="-1"></a>push.table.all <span class="ot">&lt;-</span> ptt_data <span class="sc">%&gt;%</span></span>
<span id="cb51-8"><a href="creating-corpus.html#cb51-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="cf">function</span>(x) x<span class="sc">$</span>push.table) <span class="sc">%&gt;%</span></span>
<span id="cb51-9"><a href="creating-corpus.html#cb51-9" aria-hidden="true" tabindex="-1"></a>  bind_rows</span>
<span id="cb51-10"><a href="creating-corpus.html#cb51-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-11"><a href="creating-corpus.html#cb51-11" aria-hidden="true" tabindex="-1"></a>article.table.all</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["datetime"],"name":[1],"type":["chr"],"align":["left"]},{"label":["title"],"name":[2],"type":["chr"],"align":["left"]},{"label":["author"],"name":[3],"type":["chr"],"align":["left"]},{"label":["content"],"name":[4],"type":["chr"],"align":["left"]},{"label":["url"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"Tue Feb 22 13:11:58 2022","2":"[問卦] 中國筆記抄好了吧，應該承認台灣獨立了","3":"jessica805","4":"中國看完老大哥俄羅斯的操作\\n\\n我承認你的獨立 所以我要派軍隊去維持秩序\\n\\n筆記應該抄好了吧\\n\\n該宣布台灣獨立\\n\\n派解放軍來維持東亞秩序了吧\\n\\n\\n真開心快要實現祖國統一大夢了\\n\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506720.A.7D9.html"},{"1":"Tue Feb 22 13:12:35 2022","2":"[問卦] 年輕人是不是希望中共打來抑制房價？","3":"hornydragun","4":"現在台灣的房價已經高到很多人一輩子買不起，\\n\\n只能變成租屋的無殼蝸牛\\n\\n大部分年輕人只能對著各地的房子乾瞪眼，因為那些房子就算是空屋，也是投資客用來炒\\n的資產\\n\\n如果中共打來，可能有機會讓房價崩一波，有錢人跑光\\n\\n是不是很多人覺得，反正爛命一條，不如賭一次看看？\\n\\n--打來的時候，投資客會大量拋售，\\n然後大家都想逃，沒人要買，不就正好供給大於需求了？","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506757.A.03F.html"},{"1":"Tue Feb 22 13:12:50 2022","2":"[問卦] 桃園2年燒掉15億 基隆要蓋捷運？","3":"ig49999","4":"去年的新聞\\n桃捷公司坦言，109年度虧損7.38億，110年1至8月虧損6.57億元\\n\\n\\n\\n基隆那狗屎爛天氣\\n根本沒誘因想讓人搬過去\\n基隆也沒什麼好玩的景點\\n連桃捷都虧成這樣\\n基隆這鳥不生蛋的地方到底憑啥蓋捷運\\n2023年動工 2031年完工\\n沒人要生小孩了還蓋 蓋給鬼搭喔\\n\\n\\n\\n\\n\\n\\n\\n--\\n我會\\n一直推薦愛莉莎莎\\n就是不忍八卦板這幾年世衰道微https://i.imgur.com/bcZHlp2.jpg--https://www.ptt.cc/bbs/Gossiping/M.1645506772.A.74D.html問題不是隨便蓋啊\\n那台東花蓮怎麼不蓋捷運\\n正常有腦子的人都知道蓋這個沒人要搭\\n這條就是為選舉蓋的","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506772.A.74D.html"},{"1":"Tue Feb 22 13:12:56 2022","2":"[問卦] 今天晚上是史上最多2的一刻嗎","3":"yamahabbs","4":"如題\\n今天一進辦公室\\n同事就說\\n晚上10點多\\n將會是2022/2/22 22：22\\n是到目前為止最多2的一刻\\n\\n該如何準備\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506778.A.145.html"},{"1":"Tue Feb 22 13:13:02 2022","2":"[問卦] 買85度C的蛋糕不能po IG嗎？","3":"koudar","4":"事情是這樣的，\\n\\n本魯前兩天有位女性朋友生日，\\n\\n那位朋友在生日的前幾天晚上約了我，\\n\\n請我拿修好的東西給她，\\n\\n我想說給朋友一個驚喜，\\n\\n就在她家巷口買了個85度C的蛋糕要給她surprise，\\n\\n蛋糕如圖：http://i.imgur.com/grpLGmH.jpg圖出自85度C官網\\n\\n本魯還特別選了我最愛吃的黑森林當禮物，\\n\\n朋友拿到之後非常開心，\\n\\n還拿著蛋糕跟我合照了一下！（用我的手機）\\n\\n過幾天之後朋友IG上各種慶生活動的照片，\\n\\n高級餐廳、高級禮物、各種花式蛋糕、KTV唱整夜...等，\\n\\n就是沒看到本魯送蛋糕，\\n\\n本魯在想是不是因為85度C的蛋糕太好吃了，\\n\\n朋友不想把這個秘密分享在IG上面給大家知道，\\n\\n防止以後很難買到蛋糕~\\n\\n這樣是不是我們之間的小秘密啊？\\n\\n-----\\nSent from JPTT on my Asus ASUS_I002D.\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506786.A.BBC.html"},{"1":"Tue Feb 22 13:13:19 2022","2":"Re: [問卦] 法國為何不出面跟俄國定孤支","3":"qwxr","4":"這次最大的贏家其實是美國\\n\\n烏克蘭當然是最大的輸家  土地都沒了\\n\\n德法是其次的輸家\\n\\n德法其次一直希望歐盟能成為一股獨立的力量\\n\\n和俄羅斯友好\\n\\n所以非常希望通過北溪2號和俄羅斯拉近關進\\n\\n但美國就是攪屎棍\\n\\n拼命搞爛歐洲和俄羅斯的關系\\n\\n所以就不斷慫恿烏克蘭\\n\\n烏克蘭的傻逼總統也確實很蠢\\n\\n還在那里要加入北約  再加再加  整個烏克蘭就沒了\\n\\n喪權辱國的總統  戲子就是戲子  能力不足\\n\\n俄羅斯雖然得到了土地\\n\\n也不怎麼好過\\n\\n也算是個輸家  那點土地對俄羅斯來說也沒啥卵用\\n\\n最後我覺得中國也算是個小小的輸家吧\\n\\n中國一直希望歐洲能自立自強\\n\\n現在歐洲又不行了  而且這次事件讓歐洲和美國不得不合作\\n\\n不過美國也不是完全沒有損失\\n\\n信譽還是有損失的: 二戰前德國併吞捷克波蘭: 英法沒有主動出擊才讓德國坐大: 現在俄國經濟小於法國: 軍武也沒人家先進: 身為歐洲軍事最強者: 法國為何不出面跟俄國訂--\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506802.A.27A.html"},{"1":"Tue Feb 22 13:14:08 2022","2":"Re: [問卦] 台海開戰的話 美國真的會來幫守嗎？","3":"DustToDust","4":": 覺得美軍不會來的才是真的天真: 美軍一定會來 但不是開打的時候: 是解放軍已經成功登陸後: 美日聯軍才會開始進行反奪島: 先從台灣海峽截斷 斷掉解放軍補給後: 再進行剿滅島上的殘餘兵力: 這種打法對美日聯軍是最輕鬆的天真 我真的快笑死\\n\\n如果你是老美 要派子弟兵來幫台灣打支那\\n\\n請問有什麼好處嗎 台灣有石油嗎\\n\\n你以後還要選嗎 你同黨的還要選嗎\\n\\n\\n\\n你講了一堆是怎麼打 不是為什麼會來打\\n\\n我都先不提好了\\n\\n美軍來幫四個月的夏令營打\\n\\n來幫一堆喊戰喊打的免役替代役打\\n\\n\\n\\n你可以先講一個 \"美軍一定會來\"的理由嗎\\n\\n\\n\\n老美除了沒有台灣的賣肝工程師\\n\\n哪個是老美一定需要的\\n\\n哈哈\\n\\n\\n\\n--我真的會笑死\\n\\n塔綠班現在可以開始推 台獨建國 正名制憲了嗎\\n\\n沒卵蛋嗎我快笑死\\n\\n老美把武器收回去 你是排老幾 說來聽聽你看吧 灣灣什麼都都不敢\\n\\n不是等美軍 就是等八國聯軍\\n\\n我真的會笑死所以你要獨立了沒\\n\\n你不用上戰場 就少說話好嗎你又沒獨立\\n\\n中華台北 中國台灣你先有再說吧","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506850.A.8C7.html"},{"1":"Tue Feb 22 13:14:36 2022","2":"[問卦] 堅持不打疫苗的人..是否應自付醫療費","3":"chenyjptt","4":"經過 隔離住宿費用 及 檢疫所 像關犯人的侵犯個人隱私後\\n\\n相信絕對會加速 解封開放....\\n\\n屆時仍不打疫苗的人,,染疫犯重症...\\n\\n是否醫療費用應全額自付阿...\\n\\n是不是這樣可以 再提高 疫苗施打率...\\n\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506878.A.D1B.html"},{"1":"Tue Feb 22 13:14:59 2022","2":"Re: [新聞] 濫權摸魚 士官長「打小蜜蜂」撤職確定","3":"smalltwo","4":"這其實就是一篇帶風向的文而已\\n也許是你受理的法扶案件敗訴所以不甘吧\\n首先你必須要知道一件事情\\n軍人的懲處是由評議會決議的\\n評議會中相關的組成相信在研讀    陸海空軍懲罰法\\n的時候應該能清楚知道\\n在看相關事證的時候你也能清楚知道組成成員\\n在這個情況之下\\n所謂的\"法律明確性\"就已經不存在行政法院內\\n只要評議會做出懲處決議的相關調查、事證、宣告、程序都符合規定\\n評議會做出的決議行政法院是沒有資格推翻的\\n否則就會變成發回重新評議然後又決議撤職\\n然後又再提告的循環\\n\\n簡單來說.你上了法院就只能在這些事項攻防\\n打法律明確性.....\\n法扶很辛苦\\n幫明知做錯事的人辯護也很辛苦\\n\\n但是工作之外還要替委託人上網帶風向\\n這真的是太辛苦了\\n一定要把這篇文章轉貼給你的長官褒揚一下: 前文束刪，來平衡報導一下，很可惜最高行政法院無意處理法律明確性的問題: 網路搜尋，就有曾任海軍迪化艦艦長之上校軍官，「逾時回營」「不假離營3次」: 等事由遭送懲戒，最終決議為「記過2次」: （公懲會102年度鑑字第12455號決議書）: 本案為士官長，短暫離營到營門口的攤販用餐約1小時，直接被撤職處分: 這案件最大的問題，在於軍方對於曠職如何處分，並無明文規範: 對比公務人員和勞工均有明確規範。: 註：衛兵司令，其實就是大門口警衛排的執星官，職務不用站哨，:     就算人不在那裡，也可以交代排副，他的職位沒有站哨一半逃跑的問題。--","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506901.A.A55.html"},{"1":"Tue Feb 22 13:15:39 2022","2":"Re: [新聞] 俄軍出兵烏東，白宮暫不認定為侵略行動","3":"werqq","4":"小妹覺得啦\\n\\n烏東當然不算侵略\\n\\n戰場有主戰場\\n\\n而這次的主戰場\\n\\n主要在福和橋\\n\\n所以美國當然不會認定是侵略\\n\\n給大家參考一下\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506941.A.8E3.html"},{"1":"Tue Feb 22 13:15:51 2022","2":"Re: [新聞] 俄軍出兵烏東，白宮暫不認定為侵略行動","3":"Kosmosinsel","4":": 如果在台灣: 就是假想 金門馬祖要脫離台灣獨立: 然後中國支持 還說要派兵保護: 說真的 其他國家也不能說啥吧….按照覺青說的\\n\\n台灣關係法只防衛台澎不含金馬\\n\\n所以金馬如果用夏威夷模式脫離中華台北\\n\\n其他國還真不能說什麼\\n\\n不過台灣國人應該會很爽\\n\\n台灣國自古不包括金馬這下終於坐實了\\n\\n至於中共\\n\\n都能這樣了http://i.imgur.com/0a8btip.jpg保護金馬也是不在話下\\n\\n符合一個中國憲政保護領土精神呢\\n\\n\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506955.A.D30.html"},{"1":"Tue Feb 22 13:16:19 2022","2":"Re: [問卦] 台女的下限到底在那裡?","3":"seraphwind","4":"《農夫和蛇》\\n\\n在一個寒冷的冬夜，農夫在路邊拾到一條被凍僵的蛇，他覺得蛇很可憐，於是便把蛇摟在\\n懷中，為牠取暖。當蛇醒來，竟向著農夫的胸口大力一咬，令他中毒死亡。這則故事的寓\\n意是，對有毒有害的東西，需要警惕並遠離，而不應憐憫它，否則會引火燒身、自取滅亡\\n。\\n\\n笑死\\n\\n生到這種真的有夠可悲\\n\\n根本養老鼠咬布袋: 這不認同，單純就是一堆屁話: 會懷孕還不是自己為了爽不小心射裡面中標了: 如果不是男女情慾流動下的「大意」，那就是本來就計畫要小孩的「刻意」: 既然是刻意，那自作自受拿出來宣稱自己多偉大幹嘛？: 國中小沒教健康教育，沒說十月懷胎會有什麼困難嗎？自己的選擇自己承擔: 妳要是因姦而孕，因為母愛還願意生下來悉心呵護、養子成人，那我沒話說，偉大！: 但自己選擇的，就好比男人簽下志願役之後再哭哭部隊好艱辛，想被摸頭取暖: 義務役跟被教召，違反自己意願又不得不遵循的，靠邀部隊我沒話講: 自己選擇的，自己承擔，很難嗎？--\\n腐敗盛行，你不罵；權貴橫行，你不怒；教育之重，你不語；醫療之痛，你不忿；\\n農村之病，你不視；下崗之哀，你不聞；專獨之惡，你不問；\\n可每每因了一些于民無甚增減，于家無甚建樹，于己無甚危險的事情時，\\n你就拍案而起了，你就熱情似火了，你就沖鋒陷陣了，你就上竄下跳了!\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506981.A.074.html"},{"1":"Tue Feb 22 13:16:37 2022","2":"[問卦] 要怎麼知道自己快要猝死了？","3":"yangzy","4":"這兩天溫度低發生了一些猝死的不幸事件，該如何\\n得知自己快猝死了好及時就醫？是否有專板本板並非萬能問板兩則自刪及被刪也算兩篇之內本看板嚴格禁止政治問卦發文問卦前請先仔細閱讀相關板規未滿30繁體中文字水桶3個月，嚴重者以鬧板論--","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506999.A.7A4.html"},{"1":"Tue Feb 22 13:16:49 2022","2":"[問卦] foodpanda是不是要倒了","3":"louisshih","4":"最近七天用foodpanda點餐點了4次\\n\\n四次來的餐都是錯的\\n\\n幸好我本人是不挑食\\n\\n所以一邊申請退款一邊吃著別人的便當\\n\\n但也代表有人也申請退款吃我的便當\\n\\n我這幾次被送錯餐的機率百分百\\n\\n熊貓真的有這麼多錢應付他們破爛系統搞出來的問題嗎\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1645507011.A.646.html"},{"1":"Tue Feb 22 13:17:02 2022","2":"[問卦] 普丁如果認台灣為獨立，對岸會怎樣？","3":"coffeemilk","4":"普丁現在承認烏克蘭東部叛軍掌控的地方為獨立，他簽名說話這麼有力，如果他說台灣為獨立的，習大大會把飛彈瞄準莫斯科嗎？\\n\\n-----\\nSent from JPTT on my Samsung SM-T590.\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1645507024.A.85B.html"},{"1":"Tue Feb 22 13:17:02 2022","2":"[新聞] 初戀大腿內側現「2字」刺青！處男新郎一","3":"ivorysoap","4":"備註請放最後面 違者新聞文章刪除\\n\\n1.媒體來源:ettoday\\n2.記者署名:閔文昱\\n\\n3.完整新聞標題:初戀大腿內側現「2字」刺青！處男新郎一看秒崩潰：禮金還來\\n\\n\\n4.完整新聞內文:中國大陸一名30歲的男子日前透過相親，認識了自己的初戀，並在交往3個月後結婚，想\\n不到卻在新婚之夜時，發現妻子的大腿內側刺青有「用力」2字，讓他當場傻眼，斷定妻\\n子在結婚之前一定是一名非常隨便的女人，要求離婚並退還禮金。對此，女子雖同意離婚\\n，但拒絕退還禮金，雙方未來恐怕將訴諸法律途徑來解決。\\n\\n根據馬來西亞《中國報》報導，大陸北京市一名母胎單身30年的男子日前在媽媽和媒人的\\n安排下，認識了張女並在3個月後結婚，本以為2人將過上幸福的日子，不料男子母親卻發\\n現，兒子婚後不僅感到相當憂鬱，甚至還會找各種理由埋怨妻子，且不肯回家，令她相當\\n納悶。\\n\\n▲▼刺青。（圖／翻攝自pixabay）\\n\\n▲老婆的刺青讓男子無法接受。（示意圖／翻攝自pixabay）\\n\\n最後，在媽媽不斷追問下，男子才表明，是因為在新婚之夜時，看到了妻子的大腿內側刺\\n著「用力」2字，讓身為處男的他看了大受打擊，認為老婆在和他結婚之前一定是相當隨\\n便的女人。而媽媽聽了後，也氣得找女方家長理論，要求離婚並退還禮金。\\n\\n張女事後同意離婚，同時也坦承，腿上有這個刺青確實是她不對，因為當時比較年輕，做\\n事情太衝動，自己現在也很後悔，而這2個字也讓她的感情路非常艱難，但她強調，自己\\n並非是隨便的女人，「丈夫心裡有疙瘩我可以理解，不過我刺這2個字並沒有違法，因此\\n要離婚可以，禮金部分則是不會退還。」由於雙方最終仍無法達成共識，未來恐怕得在法\\n院對簿公堂。\\n\\n\\n\\n\\n5.完整新聞連結 (或短網址)需放媒體原始連結，不可用轉載媒體連結:https://www.ettoday.net/news/20220221/2193704.htm#ixzz7Lb5jcN4y6.備註:--","5":"https://www.ptt.cc/bbs/Gossiping/M.1645507024.A.503.html"},{"1":"Tue Feb 22 13:18:47 2022","2":"[問卦] 沙鹿龍井1700萬是不是瘋了？","3":"KyrieIrving1","4":"前陣子跟我朋友聊台中房價\\n\\n他說他專程花了一星期去沙鹿龍井那邊看新建案探聽行情\\n\\n說那邊沙鹿龍井新透天一戶1700萬\\n\\n哇靠\\n\\n以前去過幾次\\n\\n沙鹿就算了 那邊還有大學\\n\\n龍井什麼偏僻鳥地方 都是道路山路\\n\\n什麼都沒有\\n\\n然後要1700萬\\n\\n臺灣人是不是炒房炒瘋了?\\n\\n龍井欸\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1645507129.A.C47.html"},{"1":"Tue Feb 22 13:18:56 2022","2":"[問卦] 有鄉民在印鈔公司上班的嗎？","3":"a1b2c3d4e5","4":"如題啦 我阿翔\\n\\n好奇有鄉民在印鈔公司上班的嗎？\\n\\n是「真鈔」不是假鈔，也不是玩具鈔\\n\\n好奇每天這樣看真鈔在眼前不會懂貪念嗎\\n\\n有沒有相關八卦啊？\\n-----\\nSent from JPTT on my iPhone\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1645507138.A.D25.html"},{"1":"Tue Feb 22 13:20:31 2022","2":"[問卦] 人民共和國是真的會很照顧人民嗎??","3":"w510048","4":"很多國家的名稱都有人民共和國：\\n北韓  朝鮮民主主義人民共和國\\n中國  中華人民共和國\\n寮人民民主共和國\\n孟加拉人民共和國\\n頓內次克人民共和國\\n盧干斯克人民共和國\\n\\n我想請問大家，\\n人民共和國是真的會很照顧人民嗎??\\n人民政府是不是代表很照顧人民的政府??\\n\\n有沒有人民共和國的八卦??\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1645507233.A.9F7.html"},{"1":"Tue Feb 22 13:20:42 2022","2":"[問卦] 要平衡房價應該是要給多蓋吧？","3":"soulboy330","4":"如題\\n大家都想買新成屋\\n可是新蓋好的量就是那麼少\\n假設可以選十年內 能選擇的量就變多\\n二十年內的又更多\\n\\n假設現在建商全力蓋房\\n一年蓋出以往兩三倍的量\\n是不是才更能平衡房價呢？\\n\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1645507244.A.15B.html"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="creating-corpus.html#cb52-1" aria-hidden="true" tabindex="-1"></a>push.table.all</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["tag"],"name":[1],"type":["chr"],"align":["left"]},{"label":["author"],"name":[2],"type":["chr"],"align":["left"]},{"label":["content"],"name":[3],"type":["chr"],"align":["left"]},{"label":["datetime"],"name":[4],"type":["chr"],"align":["left"]},{"label":["url"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"→","2":"breacal","3":": 柯韓粉這樣晦氣撲撲喔","4":"114.25.203.112 02/22 13:12","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506720.A.7D9.html"},{"1":"推","2":"chadmu","3":": 笑支那不來","4":"220.129.217.34 02/22 13:12","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506720.A.7D9.html"},{"1":"→","2":"wawaking1","3":": 不好意思喔，美軍已經在台灣了喔","4":"61.223.53.164 02/22 13:12","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506720.A.7D9.html"},{"1":"→","2":"dangercat5","3":": 在非洲過60秒=1分鐘","4":"111.248.160.139 02/22 13:12","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506720.A.7D9.html"},{"1":"推","2":"skullno2","3":": 拜登執政 中共不敢飛越台灣被看破手腳","4":"27.242.13.129 02/22 13:13","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506720.A.7D9.html"},{"1":"推","2":"ash024","3":": 好","4":"203.74.156.61 02/22 13:14","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506720.A.7D9.html"},{"1":"→","2":"yycbr","3":": 臺灣都沒宣布獨立 怎麼承認?弄反了喔","4":"140.240.39.196 02/22 13:14","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506720.A.7D9.html"},{"1":"推","2":"lastphil","3":": 蔡都不敢吭聲台灣獨立了 笑死","4":"114.34.15.151 02/22 13:16","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506720.A.7D9.html"},{"1":"→","2":"milkBK","3":": 股價-10%喔 你要想清楚欸","4":"114.34.189.70 02/22 13:16","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506720.A.7D9.html"},{"1":"推","2":"jevin","3":": 承認花蓮台東獨立  簽協定維和駐軍","4":"114.37.200.248 02/22 13:17","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506720.A.7D9.html"},{"1":"推","2":"ansfan","3":": bingo 答對了","4":"101.12.43.45 02/22 13:12","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506757.A.03F.html"},{"1":"噓","2":"deepdish","3":": 夢裡什麼都有","4":"220.134.89.190 02/22 13:12","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506757.A.03F.html"},{"1":"→","2":"PanaS0Nic","3":": 中共打來應該是營建業發大財吧","4":"118.168.134.114 02/22 13:13","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506757.A.03F.html"},{"1":"→","2":"nikewang","3":": 嘴巴喊抗中保台 又要中共打來抑制房價","4":"222.235.221.228 02/22 13:13","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506757.A.03F.html"},{"1":"→","2":"nikewang","3":": 覺青會精神錯亂","4":"222.235.221.228 02/22 13:13","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506757.A.03F.html"},{"1":"推","2":"polo125809","3":": 打來就換人炒而已 想太多","4":"114.43.115.195 02/22 13:13","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506757.A.03F.html"},{"1":"噓","2":"fish005","3":": 根據供需法則供給大於需求才會降價。我","4":"111.82.65.106 02/22 13:13","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506757.A.03F.html"},{"1":"→","2":"wawaking1","3":": 窮魯還想當低端支那人的奴隸，什麼人要","4":"61.223.53.164 02/22 13:13","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506757.A.03F.html"},{"1":"→","2":"fish005","3":": 們應該反攻大陸才對","4":"111.82.65.106 02/22 13:14","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506757.A.03F.html"},{"1":"→","2":"wawaking1","3":": 有多賤才會有這種想法？","4":"61.223.53.164 02/22 13:14","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506757.A.03F.html"},{"1":"推","2":"antigidu","3":": 年輕人  錯信塔綠班的謊言","4":"61.220.197.175 02/22 13:14","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506757.A.03F.html"},{"1":"→","2":"R3hab","3":": 看看20萬戶社會住宅蓋了0戶 你還相信塔綠班","4":"223.136.132.8 02/22 13:14","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506757.A.03F.html"},{"1":"→","2":"R3hab","3":": https://i.imgur.com/gqTlnKH.png","4":"223.136.132.8 02/22 13:15","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506757.A.03F.html"},{"1":"→","2":"cdmlin","3":": 重演中國人移入新疆過半 台灣房價會井噴","4":"1.34.229.213 02/22 13:15","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506757.A.03F.html"},{"1":"→","2":"iampig951753","3":": 中共打來房子也不是底端的，是高官","4":"180.218.222.198 02/22 13:16","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506757.A.03F.html"},{"1":"→","2":"iampig951753","3":": 管收啦","4":"180.218.222.198 02/22 13:16","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506757.A.03F.html"},{"1":"推","2":"waldo34","3":": 沒啊 你們不會好奇房價可以漲多高嗎","4":"203.204.60.121 02/22 13:16","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506757.A.03F.html"},{"1":"→","2":"R3hab","3":": https://i.imgur.com/imn2nDy.jpg","4":"223.136.132.8 02/22 13:17","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506757.A.03F.html"},{"1":"噓","2":"kenkenken31","3":": 賭去內地集中營觀光的機會嗎?","4":"49.159.181.165 02/22 13:17","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506757.A.03F.html"},{"1":"推","2":"albertfeng","3":": 4 故意激怒老共可惜對岸也孬","4":"42.72.193.244 02/22 13:17","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506757.A.03F.html"},{"1":"推","2":"shazuei","3":": 清洗一波人口","4":"42.73.106.6 02/22 13:21","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506757.A.03F.html"},{"1":"噓","2":"leadershit","3":": 因為蠢到不知道戰爭有多恐怖","4":"110.28.165.76 02/22 13:22","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506757.A.03F.html"},{"1":"→","2":"ansfan","3":": 基隆不是鄉下嗎","4":"101.12.43.45 02/22 13:13","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506772.A.74D.html"},{"1":"→","2":"PanaS0Nic","3":": 公共運輸營利考量要放在後面","4":"118.168.134.114 02/22 13:13","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506772.A.74D.html"},{"1":"→","2":"eeccms","3":": https://i.imgur.com/BF63Yk5.jpg","4":"101.12.22.18 02/22 13:13","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506772.A.74D.html"},{"1":"推","2":"Dreality","3":": 炒房炒地阿","4":"106.1.223.94 02/22 13:14","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506772.A.74D.html"},{"1":"推","2":"R3hab","3":": 看看20萬戶社會住宅蓋了0戶 你還相信塔綠班","4":"223.136.132.8 02/22 13:14","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506772.A.74D.html"},{"1":"推","2":"qweertyui891","3":": 鐵路就不是公眾運輸嗎，說什麼幹話","4":"36.230.42.205 02/22 13:14","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506772.A.74D.html"},{"1":"→","2":"nikewang","3":": 民進黨靠高鐵捷運 圈地賺了不少 你忙了","4":"222.235.221.228 02/22 13:14","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506772.A.74D.html"},{"1":"→","2":"sagarain","3":": 所以沒有押完工日期啊","4":"36.227.36.208 02/22 13:15","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506772.A.74D.html"},{"1":"→","2":"Workforme","3":": 才15億 聽說6年中央負債增2兆呢","4":"1.164.75.189 02/22 13:15","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506772.A.74D.html"},{"1":"→","2":"nyyjeter8","3":": 大老布局好了 不照演嗎","4":"1.161.58.194 02/22 13:15","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506772.A.74D.html"},{"1":"推","2":"dnzteeqrq","3":": 以二樓的觀點 現在應該全台都蓋運才對","4":"49.216.23.120 02/22 13:15","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506772.A.74D.html"},{"1":"→","2":"qweertyui891","3":": 拉一條環島捷運好了","4":"36.230.42.205 02/22 13:15","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506772.A.74D.html"},{"1":"推","2":"Xzcas","3":": 你真以為民進黨為國為民喔","4":"163.20.246.234 02/22 13:16","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506772.A.74D.html"},{"1":"→","2":"Xzcas","3":": 自己荷包比較重要","4":"163.20.246.234 02/22 13:16","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506772.A.74D.html"},{"1":"推","2":"edward0811","3":": 房價漲千億以上，虧損零頭","4":"49.216.217.227 02/22 13:16","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506772.A.74D.html"},{"1":"→","2":"nikewang","3":": 高鐵宜蘭 高鐵六塊厝 高鐵潮州 基隆捷運","4":"222.235.221.228 02/22 13:17","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506772.A.74D.html"},{"1":"→","2":"nikewang","3":": 嘻嘻","4":"222.235.221.228 02/22 13:17","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506772.A.74D.html"},{"1":"→","2":"mij","3":": 沒再炒地的人才會這樣想","4":"111.240.98.49 02/22 13:17","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506772.A.74D.html"},{"1":"推","2":"arickal","3":": 不蓋捷運要怎麼炒你告訴我","4":"122.117.163.11 02/22 13:17","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506772.A.74D.html"},{"1":"→","2":"PanaS0Nic","3":": 你怎麼知道沒有人布局全台蓋捷運嘻嘻","4":"118.168.134.114 02/22 13:17","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506772.A.74D.html"},{"1":"→","2":"Brioni","3":": 中油光天然氣凍漲一年就虧7百多億，15億小","4":"42.74.206.81 02/22 13:18","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506772.A.74D.html"},{"1":"推","2":"CPer","3":": 沒差 民進黨滿意度那麼高 想做啥又沒差","4":"220.138.48.241 02/22 13:18","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506772.A.74D.html"},{"1":"→","2":"Brioni","3":": 意思","4":"42.74.206.81 02/22 13:18","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506772.A.74D.html"},{"1":"→","2":"Brioni","3":": 勞保不改一年要貼千億勒","4":"42.74.206.81 02/22 13:18","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506772.A.74D.html"},{"1":"→","2":"dennis02","3":": 虧的是捷運公司 賺的是財團地主","4":"223.137.181.32 02/22 13:19","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506772.A.74D.html"},{"1":"推","2":"bkm1","3":": 台南都還沒蓋好 你基隆是在吵屁","4":"101.9.44.2 02/22 13:19","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506772.A.74D.html"},{"1":"→","2":"nikewang","3":": 講到勞保 2026破產倒數中","4":"222.235.221.228 02/22 13:19","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506772.A.74D.html"},{"1":"推","2":"Retangle","3":": 公共運輸不考慮營利日本國鐵怎倒的","4":"49.216.174.255 02/22 13:19","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506772.A.74D.html"},{"1":"推","2":"yannicklatte","3":": 才15億，中央還補助不起嗎？","4":"114.136.216.67 02/22 13:20","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506772.A.74D.html"},{"1":"推","2":"a12124477","3":": 不然哪有回扣可以拿？","4":"111.243.200.97 02/22 13:20","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506772.A.74D.html"},{"1":"→","2":"nikewang","3":": 左膠腦袋就是這樣 說公共運輸不講求營利","4":"222.235.221.228 02/22 13:20","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506772.A.74D.html"},{"1":"→","2":"nikewang","3":": 搞到每個都像台鐵一樣變血汗事業很開心?","4":"222.235.221.228 02/22 13:20","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506772.A.74D.html"},{"1":"噓","2":"CIDgreen","3":": 捷運公司虧光後就政府虧啦  看看高雄","4":"60.251.182.68 02/22 13:20","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506772.A.74D.html"},{"1":"推","2":"KJoshT","3":": 選舉到了，促進活絡基隆房地產市場呀","4":"220.141.32.209 02/22 13:21","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506772.A.74D.html"},{"1":"推","2":"achun1212","3":": 改善鐵路跟國道客運啊","4":"49.216.225.168 02/22 13:21","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506772.A.74D.html"},{"1":"→","2":"nikewang","3":": 以前高捷還有開出28K徵司機員","4":"222.235.221.228 02/22 13:21","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506772.A.74D.html"},{"1":"→","2":"snow3804","3":": 才15億","4":"36.225.222.87 02/22 13:21","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506772.A.74D.html"},{"1":"→","2":"snow3804","3":": 你是不是看不起政府","4":"36.225.222.87 02/22 13:21","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506772.A.74D.html"},{"1":"推","2":"hsiang1049","3":": 傻眼別再浪費公帑了","4":"101.12.90.61 02/22 13:22","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506772.A.74D.html"},{"1":"推","2":"Brioni","3":": 基隆捷運運量肯定比屏東高鐵多不少，效益","4":"42.74.206.81 02/22 13:22","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506772.A.74D.html"},{"1":"→","2":"Brioni","3":": 還是有","4":"42.74.206.81 02/22 13:22","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506772.A.74D.html"},{"1":"→","2":"nimab","3":": 發錢","4":"126.194.23.22 02/22 13:13","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506778.A.145.html"},{"1":"噓","2":"chadmu","3":": 2","4":"220.129.217.34 02/22 13:13","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506778.A.145.html"},{"1":"→","2":"alchemist106","3":": 錢啦","4":"42.72.161.38 02/22 13:13","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506778.A.145.html"},{"1":"推","2":"shadowdio","3":": 先準備P幣","4":"111.254.169.55 02/22 13:13","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506778.A.145.html"},{"1":"→","2":"Nexus055202","3":": 錢","4":"1.171.51.71 02/22 13:13","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506778.A.145.html"},{"1":"→","2":"vowpool","3":": 星期二","4":"125.227.40.62 02/22 13:14","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506778.A.145.html"},{"1":"→","2":"nimab","3":": 你日期少一個2 眼睛還好嗎","4":"126.194.23.22 02/22 13:14","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506778.A.145.html"},{"1":"→","2":"iampig951753","3":": 你那邊還來得及","4":"180.218.222.198 02/22 13:14","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506778.A.145.html"},{"1":"→","2":"BBScom","3":": 2222/02/22再叫我","4":"61.216.147.98 02/22 13:16","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506778.A.145.html"},{"1":"噓","2":"love0504","3":": 2","4":"111.249.51.180 02/22 13:16","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506778.A.145.html"},{"1":"推","2":"bbss","3":": 錢","4":"223.139.218.80 02/22 13:17","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506778.A.145.html"},{"1":"噓","2":"linduma","3":": 星期二猴子肚子餓","4":"114.136.127.136 02/22 13:17","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506778.A.145.html"},{"1":"→","2":"VVizZ","3":": 怕","4":"223.137.45.40 02/22 13:18","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506778.A.145.html"},{"1":"→","2":"sdamel","3":": 2沒壞","4":"42.77.2.178 02/22 13:18","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506778.A.145.html"},{"1":"推","2":"lefthander22","3":": samok準備中","4":"123.193.198.144 02/22 13:18","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506778.A.145.html"},{"1":"噓","2":"jhjhs33504","3":": 測試2沒壞","4":"220.135.175.72 02/22 13:19","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506778.A.145.html"},{"1":"噓","2":"yukihira","3":": 醒醒","4":"49.158.101.59 02/22 13:14","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506786.A.BBC.html"},{"1":"→","2":"PanaS0Nic","3":": 你用你的手機拍,他沒有照片啊","4":"118.168.134.114 02/22 13:14","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506786.A.BBC.html"},{"1":"→","2":"meowchen","3":": 你拍的時候蛋糕沒有85度可是不能拍喔","4":"61.220.191.67 02/22 13:14","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506786.A.BBC.html"},{"1":"→","2":"polo125809","3":": lady M","4":"114.43.115.195 02/22 13:14","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506786.A.BBC.html"},{"1":"推","2":"lymyuming","3":": 也有可能放太久，臭酸掉了","4":"112.78.83.234 02/22 13:14","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506786.A.BBC.html"},{"1":"噓","2":"claire880611","3":": 拍完照就丟掉了 是要po什麼？","4":"49.216.54.85 02/22 13:15","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506786.A.BBC.html"},{"1":"噓","2":"palajuice","3":": 你都說前幾天就送，早就吃完了吧","4":"117.56.51.37 02/22 13:15","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506786.A.BBC.html"},{"1":"推","2":"silent79810","3":": 不忍","4":"101.12.42.188 02/22 13:16","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506786.A.BBC.html"},{"1":"→","2":"dennis02","3":": 用你的手機拍算給你福利了 還想出現在她","4":"223.137.181.32 02/22 13:18","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506786.A.BBC.html"},{"1":"→","2":"dennis02","3":": IG上？","4":"223.137.181.32 02/22 13:18","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506786.A.BBC.html"},{"1":"推","2":"blackman5566","3":": 你明年試試拿蛋糕遮住自己臉拍照，","4":"42.72.150.194 02/22 13:18","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506786.A.BBC.html"},{"1":"→","2":"blackman5566","3":": 看會不會就po出來了","4":"42.72.150.194 02/22 13:18","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506786.A.BBC.html"},{"1":"噓","2":"wolver","3":": 廢話 圖在你手機裡","4":"111.83.197.118 02/22 13:20","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506786.A.BBC.html"},{"1":"推","2":"be00148","3":": 你明年試試拿蛋糕往自己臉拍，","4":"101.12.59.36 02/22 13:20","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506786.A.BBC.html"},{"1":"→","2":"snocia","3":": 中國人午安","4":"180.217.198.103 02/22 13:14","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506802.A.27A.html"},{"1":"→","2":"pyrolith","3":": 中或淫","4":"49.216.90.107 02/22 13:16","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506802.A.27A.html"},{"1":"→","2":"PeterHenson","3":": 笑死 沒啥卵用","4":"140.119.122.6 02/22 13:20","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506802.A.27A.html"},{"1":"→","2":"wawaking1","3":": 不是啊，美軍來不來要先看支那解放軍","4":"61.223.53.164 02/22 13:15","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506850.A.8C7.html"},{"1":"→","2":"Athchen","3":": 猴兒假裝忘記希拉蕊當年有開價碼的","4":"99.52.205.145 02/22 13:15","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506850.A.8C7.html"},{"1":"→","2":"wawaking1","3":": 有沒喔卵蛋啊","4":"61.223.53.164 02/22 13:15","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506850.A.8C7.html"},{"1":"→","2":"wawaking1","3":": 沒有卵蛋的軍隊你敢開戰？","4":"61.223.53.164 02/22 13:15","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506850.A.8C7.html"},{"1":"推","2":"jab","3":": 烏東示範給你看了 承認獨立 到時候再併入俄","4":"111.251.237.11 02/22 13:15","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506850.A.8C7.html"},{"1":"→","2":"jab","3":": 國","4":"111.251.237.11 02/22 13:15","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506850.A.8C7.html"},{"1":"→","2":"jab","3":": 台灣經濟全球21 軍事前20 香不香？","4":"111.251.237.11 02/22 13:17","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506850.A.8C7.html"},{"1":"→","2":"JamesForrest","3":": 那就趕快打啊外省支那仔？","4":"111.240.28.137 02/22 13:17","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506850.A.8C7.html"},{"1":"→","2":"JamesForrest","3":": 打看看就知道美軍會不會來了","4":"111.240.28.137 02/22 13:18","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506850.A.8C7.html"},{"1":"→","2":"JamesForrest","3":": 你可能又要看中國被N國聯軍了","4":"111.240.28.137 02/22 13:18","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506850.A.8C7.html"},{"1":"→","2":"wawaking1","3":": 笑死，國際上一直說台灣是中國的，然","4":"61.223.53.164 02/22 13:19","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506850.A.8C7.html"},{"1":"→","2":"wawaking1","3":": 後中國沒辦法控制台灣？","4":"61.223.53.164 02/22 13:19","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506850.A.8C7.html"},{"1":"→","2":"wawaking1","3":": 支那人沒卵蛋然後怪給台灣不宣布","4":"61.223.53.164 02/22 13:20","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506850.A.8C7.html"},{"1":"→","2":"wawaking1","3":": 整天在國際喊武統的是無卵支那人喔","4":"61.223.53.164 02/22 13:20","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506850.A.8C7.html"},{"1":"推","2":"jab","3":": 笑死那麼多次 然後呢","4":"111.251.237.11 02/22 13:20","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506850.A.8C7.html"},{"1":"→","2":"wawaking1","3":": 好啦，再給70年看看支那人卵蛋會不會","4":"61.223.53.164 02/22 13:21","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506850.A.8C7.html"},{"1":"→","2":"wawaking1","3":": 長出來","4":"61.223.53.164 02/22 13:21","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506850.A.8C7.html"},{"1":"→","2":"wawaking1","3":": 台灣是中國的，然後美軍來台灣幾次了，","4":"61.223.53.164 02/22 13:22","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506850.A.8C7.html"},{"1":"→","2":"wawaking1","3":": 支那領空領土被入侵毫無反應不就沒卵蛋","4":"61.223.53.164 02/22 13:22","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506850.A.8C7.html"},{"1":"→","2":"wawaking1","3":": 嗎？","4":"61.223.53.164 02/22 13:22","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506850.A.8C7.html"},{"1":"噓","2":"gigongwen","3":": 笑死","4":"76.85.93.122 02/22 13:22","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506850.A.8C7.html"},{"1":"→","2":"wawaking1","3":": 美軍來中國台灣地區了，祖國為什麼裝瞎","4":"61.223.53.164 02/22 13:23","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506850.A.8C7.html"},{"1":"→","2":"wawaking1","3":": 中國領土是隨意讓人進出嗎？強國哈哈","4":"61.223.53.164 02/22 13:23","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506850.A.8C7.html"},{"1":"→","2":"zzyyxx77","3":": OK阿 不要限制我自由和戴口罩","4":"36.229.7.228 02/22 13:15","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506878.A.D1B.html"},{"1":"噓","2":"locdan","3":": 比中共還中共","4":"59.126.46.30 02/22 13:15","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506878.A.D1B.html"},{"1":"→","2":"zzyyxx77","3":": 甚麼都要自負的話 政府就不要管那麼多","4":"36.229.7.228 02/22 13:15","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506878.A.D1B.html"},{"1":"→","2":"spzper","3":": 很難人權會抗議XDD","4":"118.170.42.191 02/22 13:15","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506878.A.D1B.html"},{"1":"噓","2":"processor","3":": 打不打都有感染風險 關自付屁事","4":"118.160.61.80 02/22 13:15","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506878.A.D1B.html"},{"1":"推","2":"arickal","3":": 慢性病跟胖子也應該自付醫療費","4":"122.117.163.11 02/22 13:15","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506878.A.D1B.html"},{"1":"→","2":"zzyyxx77","3":": 不打還不能工作咧","4":"36.229.7.228 02/22 13:15","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506878.A.D1B.html"},{"1":"→","2":"jameshcm","3":": 老實說抽菸和嗜糖的風險還比較高","4":"220.142.73.12 02/22 13:16","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506878.A.D1B.html"},{"1":"→","2":"jma306","3":":   集體主義過頭   變成剝奪權力法西斯","4":"1.168.245.99 02/22 13:16","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506878.A.D1B.html"},{"1":"推","2":"yuzhang","3":": 打了疫苗還確診就自費","4":"101.137.187.152 02/22 13:16","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506878.A.D1B.html"},{"1":"→","2":"hope1989","3":": 可是沒數據說沒打會重症欸","4":"101.9.47.58 02/22 13:16","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506878.A.D1B.html"},{"1":"噓","2":"osalucard","3":": 批評疫苗都被國防安全研究列PTT 47人了","4":"42.73.176.8 02/22 13:16","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506878.A.D1B.html"},{"1":"推","2":"neoa01","3":": 你可以叫愛滋甲自付醫療費，爽他在爽","4":"42.77.11.208 02/22 13:16","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506878.A.D1B.html"},{"1":"→","2":"osalucard","3":": 還有什麼獨裁行為不可能？","4":"42.73.176.8 02/22 13:16","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506878.A.D1B.html"},{"1":"→","2":"zzyyxx77","3":": 不打可以自由走動 確診不用公費 我也OK","4":"36.229.7.228 02/22 13:16","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506878.A.D1B.html"},{"1":"噓","2":"bbflisky","3":": How about no?","4":"1.173.184.124 02/22 13:16","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506878.A.D1B.html"},{"1":"→","2":"yzelly","3":": 所以要取消健保喔,因為會得病就是不健康啊","4":"36.232.209.229 02/22 13:17","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506878.A.D1B.html"},{"1":"→","2":"zzyyxx77","3":": 我還怕政府不敢咧","4":"36.229.7.228 02/22 13:17","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506878.A.D1B.html"},{"1":"噓","2":"GGrunrundela","3":": 那打了還確診麻煩收10倍 體質差成這","4":"39.13.129.27 02/22 13:17","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506878.A.D1B.html"},{"1":"推","2":"Isveia","3":": 說得好像打了疫苗就不會染疫似的，你要自","4":"61.58.63.135 02/22 13:17","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506878.A.D1B.html"},{"1":"噓","2":"GGrunrundela","3":": 樣害大家憑什麼人家要因為體質差的","4":"39.13.129.27 02/22 13:17","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506878.A.D1B.html"},{"1":"噓","2":"GGrunrundela","3":": 被連累？","4":"39.13.129.27 02/22 13:17","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506878.A.D1B.html"},{"1":"→","2":"Isveia","3":": 費就全部都要自費，干有沒有打疫苗啥事？","4":"61.58.63.135 02/22 13:17","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506878.A.D1B.html"},{"1":"→","2":"bbflisky","3":": 一堆打了不也確診？","4":"1.173.184.124 02/22 13:17","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506878.A.D1B.html"},{"1":"噓","2":"Erik6502","3":": 打了疫苗還得疫，要加倍自付醫療費用。","4":"223.136.104.130 02/22 13:18","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506878.A.D1B.html"},{"1":"噓","2":"GGrunrundela","3":": 體質差基因爛的怎麼不自己去自盡還","4":"39.13.129.27 02/22 13:18","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506878.A.D1B.html"},{"1":"噓","2":"GGrunrundela","3":": 在那邊浪費疫苗扣打然後連累大家ㄋ","4":"39.13.129.27 02/22 13:18","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506878.A.D1B.html"},{"1":"→","2":"zzyyxx77","3":": 不打不要限制東限制西 確診自費OK","4":"36.229.7.228 02/22 13:19","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506878.A.D1B.html"},{"1":"→","2":"zzyyxx77","3":": 我還笑政府跟恐慌仔不敢咧","4":"36.229.7.228 02/22 13:19","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506878.A.D1B.html"},{"1":"→","2":"ab4daa","3":": 先把海龜全部遣返","4":"111.82.73.108 02/22 13:19","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506878.A.D1B.html"},{"1":"→","2":"bbflisky","3":": 抽菸、吃檳榔、酗酒先排除在外吧。","4":"1.173.184.124 02/22 13:20","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506878.A.D1B.html"},{"1":"噓","2":"GGrunrundela","3":": 記得嘴這些 去牙科或任何診所掛號付","4":"39.13.129.27 02/22 13:20","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506878.A.D1B.html"},{"1":"噓","2":"GGrunrundela","3":": 掛號費不要幹幹叫喔 一堆人連付個","4":"39.13.129.27 02/22 13:20","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506878.A.D1B.html"},{"1":"噓","2":"GGrunrundela","3":": 基本掛號費都可以幹幹叫惹 好意思嘴","4":"39.13.129.27 02/22 13:20","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506878.A.D1B.html"},{"1":"噓","2":"GGrunrundela","3":": 什麼確診自付ㄋ","4":"39.13.129.27 02/22 13:21","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506878.A.D1B.html"},{"1":"→","2":"bbflisky","3":": 排除健保之外。","4":"1.173.184.124 02/22 13:21","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506878.A.D1B.html"},{"1":"→","2":"bbflisky","3":": 推G軟。","4":"1.173.184.124 02/22 13:21","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506878.A.D1B.html"},{"1":"推","2":"pokyhoyo","3":": 出國海龜應該要繳納100萬幫本土支付風險","4":"49.216.7.217 02/22 13:21","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506878.A.D1B.html"},{"1":"→","2":"pokyhoyo","3":": 費用吧","4":"49.216.7.217 02/22 13:21","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506878.A.D1B.html"},{"1":"→","2":"GGrunrundela","3":": 謝謝 我也推你說的吃檳榔抽菸喝酒","4":"39.13.129.27 02/22 13:22","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506878.A.D1B.html"},{"1":"噓","2":"GGrunrundela","3":": 的廢物也是該排除在外","4":"39.13.129.27 02/22 13:22","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506878.A.D1B.html"},{"1":"噓","2":"Erik6502","3":": 打了疫苗還染疫苗，要付罰金，如果還傳","4":"223.136.104.130 02/22 13:24","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506878.A.D1B.html"},{"1":"→","2":"Erik6502","3":": 染給別人，要求判七年以上刑期。","4":"223.136.104.130 02/22 13:24","5":"https://www.ptt.cc/bbs/Gossiping/M.1645506878.A.D1B.html"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="danger">
<p>
There is still one problem with the Push data frame. Right now it is still not very clear how we can match the pushes to the articles from which they were extracted. The only shared index is the <code>url</code>. It would be better if all the articles in the data frame have their own unique indices and in the Push data frame each push comment corresponds to a particular article index.
</p>
</div>
<hr />
<p>The following graph summarizes our work flowchart for PTT Gossipping Scraping:</p>
<p><img src="images/ptt-crawling.png" width="90%" /></p>
</div>
</div>
<div id="save-corpus" class="section level2" number="3.4">
<h2><span class="header-section-number">3.4</span> Save Corpus</h2>
<p>You can easily save your scraped texts in a <code>CSV</code> format.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="creating-corpus.html#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Save ------</span></span>
<span id="cb53-2"><a href="creating-corpus.html#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(article.table, <span class="at">path =</span> <span class="st">&quot;PTT_GOSSIPPING_ARTICLE.csv&quot;</span>)</span>
<span id="cb53-3"><a href="creating-corpus.html#cb53-3" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(push.table, <span class="at">path =</span> <span class="st">&quot;PTT_GOSSIPPING_PUSH.csv&quot;</span>)</span></code></pre></div>
</div>
<div id="additional-resources" class="section level2" number="3.5">
<h2><span class="header-section-number">3.5</span> Additional Resources</h2>
<p>Collecting texts and digitizing them into machine-readable files is only the initial step for corpus construction. There are many other things that need to be considered to ensure the effectiveness and the sustainability of the corpus data. In particular, I would like to point you to a very useful resource, <a href="http://icar.cnrs.fr/ecole_thematique/contaci/documents/Baude/wynne.pdf">Developing Linguistic Corpora: A Guide to Good Practice</a>, compiled by Martin Wynne. Other important issues in corpus creation include:</p>
<ol style="list-style-type: decimal">
<li>Adding linguistic <strong>annotations</strong> to the corpus data (cf. Leech’s Chapter 2)</li>
<li><strong>Metadata</strong> representation of the documents (cf. Burnard’s Chapter 4)</li>
<li>Spoken corpora (cf. Thompson’s Chapter 5)</li>
<li>Technical parts for corpus creation (cf. Sinclair’s Appendix)</li>
</ol>
</div>
<div id="final-remarks" class="section level2" number="3.6">
<h2><span class="header-section-number">3.6</span> Final Remarks</h2>
<ol style="list-style-type: decimal">
<li>Please pay attention to the ethical aspects involved in the process of web crawling (esp. with personal private matters).</li>
<li>If the website has their own API built specifically for one to gather data, use it instead of scraping.</li>
<li>Always read the terms and conditions provided by the website regarding data gathering.</li>
<li>Always be gentle with the data scraping (e.g., off-peak hours, spacing out the requests)</li>
<li>Value the data you gather and treat the data with respect.</li>
</ol>
<hr />

<div class="exercise">
<span id="exr:wcex1" class="exercise"><strong>Exercise 3.1  </strong></span>Can you modify the R codes so that the script can automatically scrape more than one index page?
</div>

<div class="exercise">
<p><span id="exr:unnamed-chunk-39" class="exercise"><strong>Exercise 3.2  </strong></span>Please utilize the code from Exercise <a href="creating-corpus.html#exr:wcex1">3.1</a> and collect all texts on <code>PTT/Gossipings</code> from <strong>3</strong> index pages. Please have the articles saved in <code>PTT_GOSSIPING_ARTICLE.csv</code> and the pushes saved in <code>PTT_GOSSIPING_PUSH.csv</code> under your working directory.</p>
<p>Also, at the end of your code, please also output in the Console the corpus size, including both the articles and the pushes. Please provide the total number of <em>characters</em> of all your PTT text data collected (Note: You DO NOT have to do the word segmentation yet. Please use the characters as the base unit for corpus size.)</p>
Hint: <code>nchar()</code>
</div>
<p><em>Your script may look something like:</em></p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="creating-corpus.html#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I define my own `scrapePTT()` function:</span></span>
<span id="cb54-2"><a href="creating-corpus.html#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="co"># ptt_url: specify the board to scrape texts from</span></span>
<span id="cb54-3"><a href="creating-corpus.html#cb54-3" aria-hidden="true" tabindex="-1"></a><span class="co"># num_index_page: specify the number of index pages to be scraped</span></span>
<span id="cb54-4"><a href="creating-corpus.html#cb54-4" aria-hidden="true" tabindex="-1"></a><span class="co"># return: list(article, push)</span></span>
<span id="cb54-5"><a href="creating-corpus.html#cb54-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-6"><a href="creating-corpus.html#cb54-6" aria-hidden="true" tabindex="-1"></a>PTT_data <span class="ot">&lt;-</span><span class="fu">scrapePTT</span>(<span class="at">ptt_url =</span> <span class="st">&quot;https://www.ptt.cc/bbs/Gossiping&quot;</span>, <span class="at">num_index_page =</span> <span class="dv">3</span>)</span>
<span id="cb54-7"><a href="creating-corpus.html#cb54-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-8"><a href="creating-corpus.html#cb54-8" aria-hidden="true" tabindex="-1"></a>PTT_data<span class="sc">$</span>article <span class="sc">%&gt;%</span> head</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["datetime"],"name":[1],"type":["chr"],"align":["left"]},{"label":["title"],"name":[2],"type":["chr"],"align":["left"]},{"label":["author"],"name":[3],"type":["chr"],"align":["left"]},{"label":["content"],"name":[4],"type":["chr"],"align":["left"]},{"label":["url"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"Tue Feb 22 12:53:41 2022","2":"[問卦] 今天我爸要跟我說一個秘密","3":"readtyu","4":"如題\\n\\n今天是本肥21歲生日啦\\n\\n我爸說等等要私下跟我說個屬於我們家族的秘密\\n\\n怕爆  到底是甚麼秘密 本肥很好奇\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1645505623.A.9FA.html"},{"1":"Tue Feb 22 12:54:07 2022","2":"[問卦] 烏俄一事 台灣閃兵仔會變少對吧","3":"kevin86tp","4":"大家午安\\n\\n吃午餐沒\\n\\n如題\\n\\n最近烏俄邊境衝突\\n\\n看到北約大頭國領袖們\\n因為各自利益\\n像多頭馬車各說各的\\n\\n勇敢的台灣人該醒了吧\\n未來共匪真的打過來\\n\\n一味指望日美援助根本不切實際\\n天曉得到時候\\n檯面下ROC國家主權會不會又被犧牲\\n\\n抱著必死決心\\n捍衛自己的國土跟主權才是唯一正解\\n\\n所以說經過這次\\n未來躲兵役的人應該會變少了 對吧？\\n甚至會有更多女性願意從軍是吧！\\n有卦嗎?\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1645505649.A.909.html"},{"1":"Tue Feb 22 12:54:39 2022","2":"Re: [新聞] 俄軍出兵烏東，白宮暫不認定為侵略行動","3":"nbalook","4":": 1.媒體來源:: 科技新報: 2.記者署名:: Alan Chen: 3.完整新聞標題:: 俄軍出兵烏東，白宮暫不認定為侵略行動: 4.完整新聞內文:: 隨著俄羅斯總統普丁宣布，承認烏克蘭東部頓巴斯地區兩個分離共和國的獨立，並下令俄: 軍進駐頓涅茨克和盧干斯克進行「維和行動」，白宮在記者會上回應媒體詢問時表示，美: 國暫時不會認定俄軍在烏東行動為侵略行為。不是私菸  是超買\\n不定侵略  是維和\\n\\n好了 打不起來了  大家可以回家了\\n\\n該抄底的抄底\\n該Allin的Allin\\n\\n認定是侵略  就會像當年伊拉克打科威特那樣發兵\\n連侵略都認定不是  那就是不會發兵了\\n美國不發兵  你叫烏克蘭死戰俄羅斯喔？？\\n\\n世界和平了  大家可以回家了\\n\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1645505682.A.CAA.html"},{"1":"Tue Feb 22 12:54:41 2022","2":"Re: [新聞] 柯文哲批基捷炒地皮 林右昌：請停止惡意","3":"polyhome","4":": 柯文哲批基捷炒地皮 林右昌：請停止惡意抹黑: 2021/10/31 18:08: （中央社記者王朝鈺、魯鋼駿基隆31日電）台北市長、台灣民眾黨主席柯文哲今天批評基: 隆捷運要換路線是在炒地皮。基隆市長林右昌回應，柯文哲亂批只是踢到鐵板，事實跟他: 說的剛好相反，請停止惡意抹黑。: 柯文哲今天出席民眾黨苗栗縣黨部開幕茶會致詞時表示，基隆輕軌一案政府曾信誓旦旦4: 年要完工，如今卻變成基隆捷運，而且還要換路線，直批「是在炒地皮」。: 「不一定要蓋，只是講一講，土地價格就上來了」，柯文哲質疑，高鐵到宜蘭為何又要換: 位置，認為換路線就是在炒地皮，同樣道理，高端疫苗的股票在過去半年一下子漲、一下: 子掉，疑也是炒作。: 林右昌下午透過新聞稿表示，他聽聞後哈哈大笑，「很抱歉讓柯市長揮棒落空了」。基隆: 捷運採高架，在基隆端的路線幾乎都在原有的馬路上，並且充分運用公有土地進行場站開: 發，並不會有私人土地徵收問題，「柯P是踢到鐵板，事實跟他說的剛好相反」，請停止: 惡意抹黑。: 林右昌表示，柯文哲是好命仔，吃米不知米價，要台北端地下化就增加了基隆捷運新台幣: 87.9億元，光南港端多一個地下車站就要增加40億元。柯文哲非常清楚，怎麼會裝傻，說: 不知道怎麼算出來的呢。: 林右昌說，台北市的捷運文湖線規劃時是328億元，後來追加到680億元，增加一倍多預算: ，柯文哲是否也該好好解釋為什麼這麼貴，而基隆捷運的車站造價與土木工程只有台北捷: 運環狀線一半的價錢，柯文哲是不是也該解釋台北市蓋捷運為什麼要花比基隆捷運貴一倍: 的價錢。: 林右昌說，「我覺得柯市長很可憐」，當了民眾黨主席後變得更可憐，滿腦袋裡只有政治: 鬥爭思維，「柯P亂批只會是踢到鐵板，基隆捷運剛好誤打誤撞證明柯P亂花錢」。（編輯: ：方沛清）1101031: https://www.cna.com.tw/news/ahel/202110310141.aspx: 「我覺得柯市長很可憐。」:                        ──基隆市長林右昌現在回來看看這篇新聞\\n\\n覺得柯p真的嘲諷點滿\\n\\n基捷80億真的蓋不起來\\n\\n我看又有一票人要發大財\\n\\n\\n--\\n可以找我玩五子棋或象棋優 >.*\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1645505682.A.BEE.html"},{"1":"Tue Feb 22 12:54:41 2022","2":"Re: [問卦] 法國為何不出面跟俄國定孤支","3":"yokann","4":"有點疑惑\\n\\n一個出過拿破崙 威震過歐州的國家\\n\\n人均gdp比我們高\\n\\n能蓋核電廠 能造民航機 有航空母艦\\n\\n有精品業 有psa汽車\\n\\n為什麼台灣人會覺得自己比較厲害？\\n\\n有沒有相關八卦\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1645505683.A.A6F.html"},{"1":"Tue Feb 22 12:54:52 2022","2":"[問卦] 少林寺的廚房真的很厲害嗎?","3":"poi96300","4":"餓死抬頭\\n\\n強者我朋友被抓去少林寺的廚房\\n\\n磨練出十八般廚藝\\n\\n但據我所知\\n\\n少林寺不是吃素的嗎?\\n\\n而且吃得很養生\\n\\n頂多需要洗菜切菜小炒跟清蒸\\n\\n這樣怎麼磨練火侯跟刀工呢??\\n\\n有八卦嗎?\\n\\n----","5":"https://www.ptt.cc/bbs/Gossiping/M.1645505697.A.206.html"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="creating-corpus.html#cb55-1" aria-hidden="true" tabindex="-1"></a>PTT_data<span class="sc">$</span>push <span class="sc">%&gt;%</span> head</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["tag"],"name":[1],"type":["chr"],"align":["left"]},{"label":["author"],"name":[2],"type":["chr"],"align":["left"]},{"label":["content"],"name":[3],"type":["chr"],"align":["left"]},{"label":["datetime"],"name":[4],"type":["chr"],"align":["left"]},{"label":["url"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"噓","2":"Roooz","3":": 你是女的","4":"114.137.26.242 02/22 12:53","5":"https://www.ptt.cc/bbs/Gossiping/M.1645505623.A.9FA.html"},{"1":"→","2":"alchemist106","3":": 哪部","4":"42.72.161.38 02/22 12:53","5":"https://www.ptt.cc/bbs/Gossiping/M.1645505623.A.9FA.html"},{"1":"→","2":"allen0981","3":": 非親生","4":"1.160.205.195 02/22 12:54","5":"https://www.ptt.cc/bbs/Gossiping/M.1645505623.A.9FA.html"},{"1":"→","2":"redDest","3":": 你爸是甲 他想肛你","4":"42.74.183.144 02/22 12:54","5":"https://www.ptt.cc/bbs/Gossiping/M.1645505623.A.9FA.html"},{"1":"推","2":"goshfju","3":": 私生子","4":"112.78.71.96 02/22 12:54","5":"https://www.ptt.cc/bbs/Gossiping/M.1645505623.A.9FA.html"},{"1":"推","2":"dio0204","3":": 你爸爸其實是你哥哥","4":"114.137.38.199 02/22 12:54","5":"https://www.ptt.cc/bbs/Gossiping/M.1645505623.A.9FA.html"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="creating-corpus.html#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># corpus size</span></span>
<span id="cb56-2"><a href="creating-corpus.html#cb56-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-3"><a href="creating-corpus.html#cb56-3" aria-hidden="true" tabindex="-1"></a>PTT_data<span class="sc">$</span>article<span class="sc">$</span>content <span class="sc">%&gt;%</span> nchar <span class="sc">%&gt;%</span> sum</span></code></pre></div>
<pre><code>## [1] 18074</code></pre>
<div class="exercise">
<p><span id="exr:unlabeled-div-1" class="exercise"><strong>Exercise 3.3  </strong></span>Please choose a website (other than PTT) you are interested in and demonstrate how you can use R to retrieve textual data from the site. The final scraped text collection could be from only one static web page. This purpose of this exercise is to show that you know how to parse the HTML structure of the web page and retrieve the data you need from the website.</p>
</div>
<!-- ```{exercise} -->
<!-- Now you should have basic ideas how we can crawl data from the Internet. Sometimes, we not only collect texts but statistics as well. Please try to collect the statistics of COVID-19 outbreak from the [Wikipedia 2019–20 coronavirus pandemic](https://en.wikipedia.org/wiki/2019%E2%80%9320_coronavirus_pandemic). Specifically, write a short script to automatically get the table included in the Wiki page, where the numbers of confirmed cases, deaths, and recoveries for each country are recorded. Your script should output a data frame as follows. Please name the columns of your data frame as follows as well. (Note: The numbers may vary because of the constant updates of the wiki page.) [*needs updating*] -->
<!-- ``` -->

</div>
</div>
<h3> References</h3>
<div id="refs" class="references csl-bib-body hanging-indent" line-spacing="2">
<div id="ref-munzert2014" class="csl-entry">
Munzert, S., Rubba, C., Meißner, P., &amp; Nyhuis, D. (2014). <em>Automated data collection with <span>R</span>: A practical guide to web scraping and text mining</em>. John Wiley &amp; Sons.
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="r-fundamentals.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="corpus-analysis-a-start.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
