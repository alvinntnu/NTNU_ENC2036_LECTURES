<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Creating Corpus | Corpus Linguistics</title>
  <meta name="description" content="ENC2036 Course material first edition" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Creating Corpus | Corpus Linguistics" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="ENC2036 Course material first edition" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Creating Corpus | Corpus Linguistics" />
  
  <meta name="twitter:description" content="ENC2036 Course material first edition" />
  

<meta name="author" content="Alvin Cheng-Hsien Chen" />


<meta name="date" content="2022-05-19" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="r-fundamentals.html"/>
<link rel="next" href="corpus-analysis-a-start.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="libs/pagedtable-1.1/js/pagedtable.js"></script>
<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="libs/viz-1.8.2/viz.js"></script>
<link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="libs/grViz-binding-1.0.6.1/grViz.js"></script>
<link href="libs/str_view-0.1.0/str_view.css" rel="stylesheet" />
<script src="libs/str_view-binding-1.4.0/str_view.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/wordcloud2-0.0.1/wordcloud.css" rel="stylesheet" />
<script src="libs/wordcloud2-0.0.1/wordcloud2-all.js"></script>
<script src="libs/wordcloud2-0.0.1/hover.js"></script>
<script src="libs/wordcloud2-binding-0.2.2/wordcloud2.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.20/datatables.js"></script>
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.11.3/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style-new.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://alvinntnu.github.io/NTNU_ENC2036/"><img src="images/alerts/home.svg" height = "20" width = "20"> Course Website</a></li>
<li><a href="./"><img src="images/alerts/book-solid.svg" height = "20" width = "20"> ENC 2036 Corpus Linguistics</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#course-objective"><i class="fa fa-check"></i>Course Objective</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#reading-materials"><i class="fa fa-check"></i>Reading Materials</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#course-requirement"><i class="fa fa-check"></i>Course Requirement</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#exams"><i class="fa fa-check"></i>Exams</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#course-website"><i class="fa fa-check"></i>Course Website</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#contributing-to-the-lecture-notes"><i class="fa fa-check"></i>Contributing to the Lecture Notes</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#course-demo-data"><i class="fa fa-check"></i>Course Demo Data</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#academic-integrity"><i class="fa fa-check"></i>Academic Integrity</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#house-keeping-guidelines"><i class="fa fa-check"></i>House-keeping Guidelines</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#necessary-packages"><i class="fa fa-check"></i>Necessary Packages</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#environment-settings"><i class="fa fa-check"></i>Environment Settings</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="what-is-corpus-linguistics.html"><a href="what-is-corpus-linguistics.html"><i class="fa fa-check"></i><b>1</b> What is Corpus Linguistics?</a>
<ul>
<li class="chapter" data-level="1.1" data-path="what-is-corpus-linguistics.html"><a href="what-is-corpus-linguistics.html#why-do-we-need-corpus-data"><i class="fa fa-check"></i><b>1.1</b> Why do we need corpus data?</a></li>
<li class="chapter" data-level="1.2" data-path="what-is-corpus-linguistics.html"><a href="what-is-corpus-linguistics.html#what-is-corpus"><i class="fa fa-check"></i><b>1.2</b> What is corpus?</a></li>
<li class="chapter" data-level="1.3" data-path="what-is-corpus-linguistics.html"><a href="what-is-corpus-linguistics.html#what-is-a-corpus-linguistic-study"><i class="fa fa-check"></i><b>1.3</b> What is a corpus linguistic study?</a></li>
<li class="chapter" data-level="1.4" data-path="what-is-corpus-linguistics.html"><a href="what-is-corpus-linguistics.html#additional-information-on-cl"><i class="fa fa-check"></i><b>1.4</b> Additional Information on CL</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="r-fundamentals.html"><a href="r-fundamentals.html"><i class="fa fa-check"></i><b>2</b> R Fundamentals</a>
<ul>
<li class="chapter" data-level="" data-path="r-fundamentals.html"><a href="r-fundamentals.html#a-quick-note"><i class="fa fa-check"></i>A Quick Note</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="creating-corpus.html"><a href="creating-corpus.html"><i class="fa fa-check"></i><b>3</b> Creating Corpus</a>
<ul>
<li class="chapter" data-level="3.1" data-path="creating-corpus.html"><a href="creating-corpus.html#html-structure"><i class="fa fa-check"></i><b>3.1</b> HTML Structure</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="creating-corpus.html"><a href="creating-corpus.html#html-syntax"><i class="fa fa-check"></i><b>3.1.1</b> HTML Syntax</a></li>
<li class="chapter" data-level="3.1.2" data-path="creating-corpus.html"><a href="creating-corpus.html#tags-and-attributes"><i class="fa fa-check"></i><b>3.1.2</b> Tags and Attributes</a></li>
<li class="chapter" data-level="3.1.3" data-path="creating-corpus.html"><a href="creating-corpus.html#css"><i class="fa fa-check"></i><b>3.1.3</b> CSS</a></li>
<li class="chapter" data-level="3.1.4" data-path="creating-corpus.html"><a href="creating-corpus.html#html-css-javascript"><i class="fa fa-check"></i><b>3.1.4</b> HTML + CSS ( + JavaScript)</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="creating-corpus.html"><a href="creating-corpus.html#web-crawling"><i class="fa fa-check"></i><b>3.2</b> Web Crawling</a></li>
<li class="chapter" data-level="3.3" data-path="creating-corpus.html"><a href="creating-corpus.html#functional-programming"><i class="fa fa-check"></i><b>3.3</b> Functional Programming</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="creating-corpus.html"><a href="creating-corpus.html#extract_art_links"><i class="fa fa-check"></i><b>3.3.1</b> <code>extract_art_links()</code></a></li>
<li class="chapter" data-level="3.3.2" data-path="creating-corpus.html"><a href="creating-corpus.html#extract_article_push_tables"><i class="fa fa-check"></i><b>3.3.2</b> <code>extract_article_push_tables()</code></a></li>
<li class="chapter" data-level="3.3.3" data-path="creating-corpus.html"><a href="creating-corpus.html#streamline-the-codes"><i class="fa fa-check"></i><b>3.3.3</b> Streamline the Codes</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="creating-corpus.html"><a href="creating-corpus.html#save-corpus"><i class="fa fa-check"></i><b>3.4</b> Save Corpus</a></li>
<li class="chapter" data-level="3.5" data-path="creating-corpus.html"><a href="creating-corpus.html#additional-resources"><i class="fa fa-check"></i><b>3.5</b> Additional Resources</a></li>
<li class="chapter" data-level="3.6" data-path="creating-corpus.html"><a href="creating-corpus.html#final-remarks"><i class="fa fa-check"></i><b>3.6</b> Final Remarks</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="corpus-analysis-a-start.html"><a href="corpus-analysis-a-start.html"><i class="fa fa-check"></i><b>4</b> Corpus Analysis: A Start</a>
<ul>
<li class="chapter" data-level="4.1" data-path="corpus-analysis-a-start.html"><a href="corpus-analysis-a-start.html#installing-quanteda"><i class="fa fa-check"></i><b>4.1</b> Installing <code>quanteda</code></a></li>
<li class="chapter" data-level="4.2" data-path="corpus-analysis-a-start.html"><a href="corpus-analysis-a-start.html#building-a-corpus-from-character-vector"><i class="fa fa-check"></i><b>4.2</b> Building a <code>corpus</code> from character vector</a></li>
<li class="chapter" data-level="4.3" data-path="corpus-analysis-a-start.html"><a href="corpus-analysis-a-start.html#keyword-in-context-kwic"><i class="fa fa-check"></i><b>4.3</b> Keyword-in-Context (KWIC)</a></li>
<li class="chapter" data-level="4.4" data-path="corpus-analysis-a-start.html"><a href="corpus-analysis-a-start.html#kwic-with-regular-expressions"><i class="fa fa-check"></i><b>4.4</b> KWIC with Regular Expressions</a></li>
<li class="chapter" data-level="4.5" data-path="corpus-analysis-a-start.html"><a href="corpus-analysis-a-start.html#tidy-text-format-of-the-corpus"><i class="fa fa-check"></i><b>4.5</b> Tidy Text Format of the Corpus</a></li>
<li class="chapter" data-level="4.6" data-path="corpus-analysis-a-start.html"><a href="corpus-analysis-a-start.html#processing-flowchart"><i class="fa fa-check"></i><b>4.6</b> Processing Flowchart</a></li>
<li class="chapter" data-level="4.7" data-path="corpus-analysis-a-start.html"><a href="corpus-analysis-a-start.html#frequency-lists"><i class="fa fa-check"></i><b>4.7</b> Frequency Lists</a>
<ul>
<li class="chapter" data-level="4.7.1" data-path="corpus-analysis-a-start.html"><a href="corpus-analysis-a-start.html#word-unigram"><i class="fa fa-check"></i><b>4.7.1</b> Word (Unigram)</a></li>
<li class="chapter" data-level="4.7.2" data-path="corpus-analysis-a-start.html"><a href="corpus-analysis-a-start.html#bigrams"><i class="fa fa-check"></i><b>4.7.2</b> Bigrams</a></li>
<li class="chapter" data-level="4.7.3" data-path="corpus-analysis-a-start.html"><a href="corpus-analysis-a-start.html#ngrams-lexical-bundles"><i class="fa fa-check"></i><b>4.7.3</b> Ngrams (Lexical Bundles)</a></li>
<li class="chapter" data-level="4.7.4" data-path="corpus-analysis-a-start.html"><a href="corpus-analysis-a-start.html#frequency-and-dispersion"><i class="fa fa-check"></i><b>4.7.4</b> Frequency and Dispersion</a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="corpus-analysis-a-start.html"><a href="corpus-analysis-a-start.html#word-cloud"><i class="fa fa-check"></i><b>4.8</b> Word Cloud</a></li>
<li class="chapter" data-level="4.9" data-path="corpus-analysis-a-start.html"><a href="corpus-analysis-a-start.html#collocations"><i class="fa fa-check"></i><b>4.9</b> Collocations</a>
<ul>
<li class="chapter" data-level="4.9.1" data-path="corpus-analysis-a-start.html"><a href="corpus-analysis-a-start.html#cooccurrence-table-and-observed-frequencies"><i class="fa fa-check"></i><b>4.9.1</b> Cooccurrence Table and Observed Frequencies</a></li>
<li class="chapter" data-level="4.9.2" data-path="corpus-analysis-a-start.html"><a href="corpus-analysis-a-start.html#expected-frequencies"><i class="fa fa-check"></i><b>4.9.2</b> Expected Frequencies</a></li>
<li class="chapter" data-level="4.9.3" data-path="corpus-analysis-a-start.html"><a href="corpus-analysis-a-start.html#association-measures"><i class="fa fa-check"></i><b>4.9.3</b> Association Measures</a></li>
</ul></li>
<li class="chapter" data-level="4.10" data-path="corpus-analysis-a-start.html"><a href="corpus-analysis-a-start.html#constructions"><i class="fa fa-check"></i><b>4.10</b> Constructions</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="parts-of-speech-tagging.html"><a href="parts-of-speech-tagging.html"><i class="fa fa-check"></i><b>5</b> Parts-of-Speech Tagging</a>
<ul>
<li class="chapter" data-level="5.1" data-path="parts-of-speech-tagging.html"><a href="parts-of-speech-tagging.html#installing-the-package"><i class="fa fa-check"></i><b>5.1</b> Installing the Package</a></li>
<li class="chapter" data-level="5.2" data-path="parts-of-speech-tagging.html"><a href="parts-of-speech-tagging.html#quick-overview"><i class="fa fa-check"></i><b>5.2</b> Quick Overview</a></li>
<li class="chapter" data-level="5.3" data-path="parts-of-speech-tagging.html"><a href="parts-of-speech-tagging.html#quick-analysis"><i class="fa fa-check"></i><b>5.3</b> Quick Analysis</a></li>
<li class="chapter" data-level="5.4" data-path="parts-of-speech-tagging.html"><a href="parts-of-speech-tagging.html#working-pipeline"><i class="fa fa-check"></i><b>5.4</b> Working Pipeline</a></li>
<li class="chapter" data-level="5.5" data-path="parts-of-speech-tagging.html"><a href="parts-of-speech-tagging.html#parsing-your-texts"><i class="fa fa-check"></i><b>5.5</b> Parsing Your Texts</a></li>
<li class="chapter" data-level="5.6" data-path="parts-of-speech-tagging.html"><a href="parts-of-speech-tagging.html#metalinguistic-analysis"><i class="fa fa-check"></i><b>5.6</b> Metalinguistic Analysis</a></li>
<li class="chapter" data-level="5.7" data-path="parts-of-speech-tagging.html"><a href="parts-of-speech-tagging.html#construction-analysis"><i class="fa fa-check"></i><b>5.7</b> Construction Analysis</a></li>
<li class="chapter" data-level="5.8" data-path="parts-of-speech-tagging.html"><a href="parts-of-speech-tagging.html#issues-on-pattern-retrieval"><i class="fa fa-check"></i><b>5.8</b> Issues on Pattern Retrieval</a></li>
<li class="chapter" data-level="5.9" data-path="parts-of-speech-tagging.html"><a href="parts-of-speech-tagging.html#saving-pos-tagged-texts"><i class="fa fa-check"></i><b>5.9</b> Saving POS-tagged Texts</a></li>
<li class="chapter" data-level="5.10" data-path="parts-of-speech-tagging.html"><a href="parts-of-speech-tagging.html#finalize-spacy"><i class="fa fa-check"></i><b>5.10</b> Finalize spaCy</a></li>
<li class="chapter" data-level="5.11" data-path="parts-of-speech-tagging.html"><a href="parts-of-speech-tagging.html#notes-on-chinese-processing"><i class="fa fa-check"></i><b>5.11</b> Notes on Chinese Processing</a></li>
<li class="chapter" data-level="5.12" data-path="parts-of-speech-tagging.html"><a href="parts-of-speech-tagging.html#useful-information"><i class="fa fa-check"></i><b>5.12</b> Useful Information</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="keyword-analysis.html"><a href="keyword-analysis.html"><i class="fa fa-check"></i><b>6</b> Keyword Analysis</a>
<ul>
<li class="chapter" data-level="6.1" data-path="keyword-analysis.html"><a href="keyword-analysis.html#about-keywords"><i class="fa fa-check"></i><b>6.1</b> About Keywords</a></li>
<li class="chapter" data-level="6.2" data-path="keyword-analysis.html"><a href="keyword-analysis.html#statistics-for-keyness"><i class="fa fa-check"></i><b>6.2</b> Statistics for Keyness</a></li>
<li class="chapter" data-level="6.3" data-path="keyword-analysis.html"><a href="keyword-analysis.html#implementation"><i class="fa fa-check"></i><b>6.3</b> Implementation</a></li>
<li class="chapter" data-level="6.4" data-path="keyword-analysis.html"><a href="keyword-analysis.html#tidy-data-self-study"><i class="fa fa-check"></i><b>6.4</b> Tidy Data (Self-Study)</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="keyword-analysis.html"><a href="keyword-analysis.html#an-long-to-wide-example"><i class="fa fa-check"></i><b>6.4.1</b> An Long-to-Wide Example</a></li>
<li class="chapter" data-level="6.4.2" data-path="keyword-analysis.html"><a href="keyword-analysis.html#a-wide-to-long-example"><i class="fa fa-check"></i><b>6.4.2</b> A Wide-to-Long Example</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="keyword-analysis.html"><a href="keyword-analysis.html#word-frequency-transformation"><i class="fa fa-check"></i><b>6.5</b> Word Frequency Transformation</a></li>
<li class="chapter" data-level="6.6" data-path="keyword-analysis.html"><a href="keyword-analysis.html#computing-keynesss"><i class="fa fa-check"></i><b>6.6</b> Computing Keynesss</a></li>
<li class="chapter" data-level="6.7" data-path="keyword-analysis.html"><a href="keyword-analysis.html#conclusion"><i class="fa fa-check"></i><b>6.7</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html"><i class="fa fa-check"></i><b>7</b> Chinese Text Processing</a>
<ul>
<li class="chapter" data-level="7.1" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#chinese-word-segmenter-jiebar"><i class="fa fa-check"></i><b>7.1</b> Chinese Word Segmenter <code>jiebaR</code></a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#start"><i class="fa fa-check"></i><b>7.1.1</b> Start</a></li>
<li class="chapter" data-level="7.1.2" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#parameters-setting"><i class="fa fa-check"></i><b>7.1.2</b> Parameters Setting</a></li>
<li class="chapter" data-level="7.1.3" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#user-defined-dictionary"><i class="fa fa-check"></i><b>7.1.3</b> User-defined dictionary</a></li>
<li class="chapter" data-level="7.1.4" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#stopwords"><i class="fa fa-check"></i><b>7.1.4</b> Stopwords</a></li>
<li class="chapter" data-level="7.1.5" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#pos-tagging"><i class="fa fa-check"></i><b>7.1.5</b> POS Tagging</a></li>
<li class="chapter" data-level="7.1.6" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#default-word-lists-in-jiebar"><i class="fa fa-check"></i><b>7.1.6</b> Default Word Lists in JiebaR</a></li>
<li class="chapter" data-level="7.1.7" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#reminders"><i class="fa fa-check"></i><b>7.1.7</b> Reminders</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#chinese-text-analytics-pipeline"><i class="fa fa-check"></i><b>7.2</b> Chinese Text Analytics Pipeline</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#creating-a-corpus-object"><i class="fa fa-check"></i><b>7.2.1</b> Creating a Corpus Object</a></li>
<li class="chapter" data-level="7.2.2" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#tidy-structure-framework"><i class="fa fa-check"></i><b>7.2.2</b> Tidy Structure Framework</a></li>
<li class="chapter" data-level="7.2.3" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#quanteda-framework"><i class="fa fa-check"></i><b>7.2.3</b> <code>Quanteda</code> Framework</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#data"><i class="fa fa-check"></i><b>7.3</b> Data</a></li>
<li class="chapter" data-level="7.4" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#loading-text-data"><i class="fa fa-check"></i><b>7.4</b> Loading Text Data</a></li>
<li class="chapter" data-level="7.5" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#quanteda-based-exploration"><i class="fa fa-check"></i><b>7.5</b> Quanteda-based Exploration</a></li>
<li class="chapter" data-level="7.6" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#initialize-jiebar"><i class="fa fa-check"></i><b>7.6</b> Initialize <code>jiebaR</code></a></li>
<li class="chapter" data-level="7.7" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#case-study-1-concordances-with-kwic"><i class="fa fa-check"></i><b>7.7</b> Case Study 1: Concordances with <code>kwic()</code></a></li>
<li class="chapter" data-level="7.8" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#case-study-2-word-frequency-and-wordcloud"><i class="fa fa-check"></i><b>7.8</b> Case Study 2: Word Frequency and Wordcloud</a></li>
<li class="chapter" data-level="7.9" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#case-study-3-patterns"><i class="fa fa-check"></i><b>7.9</b> Case Study 3: Patterns</a>
<ul>
<li class="chapter" data-level="7.9.1" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#bei-construction"><i class="fa fa-check"></i><b>7.9.1</b> BEI Construction</a></li>
</ul></li>
<li class="chapter" data-level="7.10" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#case-study-4-lexical-bundles"><i class="fa fa-check"></i><b>7.10</b> Case Study 4: Lexical Bundles</a>
<ul>
<li class="chapter" data-level="7.10.1" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#n-grams-extraction"><i class="fa fa-check"></i><b>7.10.1</b> N-grams Extraction</a></li>
<li class="chapter" data-level="7.10.2" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#frequency-and-dispersion-1"><i class="fa fa-check"></i><b>7.10.2</b> Frequency and Dispersion</a></li>
</ul></li>
<li class="chapter" data-level="7.11" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#recaps"><i class="fa fa-check"></i><b>7.11</b> Recaps</a></li>
<li class="chapter" data-level="7.12" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#more-exercises"><i class="fa fa-check"></i><b>7.12</b> More Exercises</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="constructions-and-idioms.html"><a href="constructions-and-idioms.html"><i class="fa fa-check"></i><b>8</b> Constructions and Idioms</a>
<ul>
<li class="chapter" data-level="8.1" data-path="constructions-and-idioms.html"><a href="constructions-and-idioms.html#collostruction"><i class="fa fa-check"></i><b>8.1</b> Collostruction</a></li>
<li class="chapter" data-level="8.2" data-path="constructions-and-idioms.html"><a href="constructions-and-idioms.html#corpus"><i class="fa fa-check"></i><b>8.2</b> Corpus</a></li>
<li class="chapter" data-level="8.3" data-path="constructions-and-idioms.html"><a href="constructions-and-idioms.html#word-segmentation"><i class="fa fa-check"></i><b>8.3</b> Word Segmentation</a></li>
<li class="chapter" data-level="8.4" data-path="constructions-and-idioms.html"><a href="constructions-and-idioms.html#extract-constructions"><i class="fa fa-check"></i><b>8.4</b> Extract Constructions</a></li>
<li class="chapter" data-level="8.5" data-path="constructions-and-idioms.html"><a href="constructions-and-idioms.html#distributional-information-needed-for-ca"><i class="fa fa-check"></i><b>8.5</b> Distributional Information Needed for CA</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="constructions-and-idioms.html"><a href="constructions-and-idioms.html#word-frequency-list"><i class="fa fa-check"></i><b>8.5.1</b> Word Frequency List</a></li>
<li class="chapter" data-level="8.5.2" data-path="constructions-and-idioms.html"><a href="constructions-and-idioms.html#joint-frequencies"><i class="fa fa-check"></i><b>8.5.2</b> Joint Frequencies</a></li>
<li class="chapter" data-level="8.5.3" data-path="constructions-and-idioms.html"><a href="constructions-and-idioms.html#input-for-coll.analysis.r"><i class="fa fa-check"></i><b>8.5.3</b> Input for <code>coll.analysis.r</code></a></li>
<li class="chapter" data-level="8.5.4" data-path="constructions-and-idioms.html"><a href="constructions-and-idioms.html#other-information"><i class="fa fa-check"></i><b>8.5.4</b> Other Information</a></li>
<li class="chapter" data-level="8.5.5" data-path="constructions-and-idioms.html"><a href="constructions-and-idioms.html#create-output-file"><i class="fa fa-check"></i><b>8.5.5</b> Create Output File</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="constructions-and-idioms.html"><a href="constructions-and-idioms.html#running-collostructional-analysis"><i class="fa fa-check"></i><b>8.6</b> Running Collostructional Analysis</a></li>
<li class="chapter" data-level="8.7" data-path="constructions-and-idioms.html"><a href="constructions-and-idioms.html#interpretations"><i class="fa fa-check"></i><b>8.7</b> Interpretations</a></li>
<li class="chapter" data-level="8.8" data-path="constructions-and-idioms.html"><a href="constructions-and-idioms.html#exercises"><i class="fa fa-check"></i><b>8.8</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="ckiptagger.html"><a href="ckiptagger.html"><i class="fa fa-check"></i><b>9</b> CKIP Tagger</a>
<ul>
<li class="chapter" data-level="9.1" data-path="ckiptagger.html"><a href="ckiptagger.html#installation"><i class="fa fa-check"></i><b>9.1</b> Installation</a></li>
<li class="chapter" data-level="9.2" data-path="ckiptagger.html"><a href="ckiptagger.html#download-the-model-files"><i class="fa fa-check"></i><b>9.2</b> Download the Model Files</a></li>
<li class="chapter" data-level="9.3" data-path="ckiptagger.html"><a href="ckiptagger.html#r-python-communication"><i class="fa fa-check"></i><b>9.3</b> R-Python Communication</a></li>
<li class="chapter" data-level="9.4" data-path="ckiptagger.html"><a href="ckiptagger.html#environment-checking"><i class="fa fa-check"></i><b>9.4</b> Environment Checking</a></li>
<li class="chapter" data-level="9.5" data-path="ckiptagger.html"><a href="ckiptagger.html#initialization"><i class="fa fa-check"></i><b>9.5</b> Initialization</a></li>
<li class="chapter" data-level="9.6" data-path="ckiptagger.html"><a href="ckiptagger.html#segmenting-texts"><i class="fa fa-check"></i><b>9.6</b> Segmenting Texts</a></li>
<li class="chapter" data-level="9.7" data-path="ckiptagger.html"><a href="ckiptagger.html#define-own-dictionary"><i class="fa fa-check"></i><b>9.7</b> Define Own Dictionary</a></li>
<li class="chapter" data-level="9.8" data-path="ckiptagger.html"><a href="ckiptagger.html#beyond-word-boundaries"><i class="fa fa-check"></i><b>9.8</b> Beyond Word Boundaries</a>
<ul>
<li class="chapter" data-level="" data-path="ckiptagger.html"><a href="ckiptagger.html#load-the-models"><i class="fa fa-check"></i>Load the models</a></li>
<li class="chapter" data-level="" data-path="ckiptagger.html"><a href="ckiptagger.html#pos-tagging-and-ner"><i class="fa fa-check"></i>POS tagging and NER</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="structured-corpus.html"><a href="structured-corpus.html"><i class="fa fa-check"></i><b>10</b> Structured Corpus</a>
<ul>
<li class="chapter" data-level="10.1" data-path="structured-corpus.html"><a href="structured-corpus.html#nccu-spoken-mandarin"><i class="fa fa-check"></i><b>10.1</b> NCCU Spoken Mandarin</a></li>
<li class="chapter" data-level="10.2" data-path="structured-corpus.html"><a href="structured-corpus.html#childes-format"><i class="fa fa-check"></i><b>10.2</b> CHILDES Format</a></li>
<li class="chapter" data-level="10.3" data-path="structured-corpus.html"><a href="structured-corpus.html#loading-the-corpus"><i class="fa fa-check"></i><b>10.3</b> Loading the Corpus</a></li>
<li class="chapter" data-level="10.4" data-path="structured-corpus.html"><a href="structured-corpus.html#from-text-based-to-turn-based-df"><i class="fa fa-check"></i><b>10.4</b> From Text-based to Turn-based DF</a></li>
<li class="chapter" data-level="10.5" data-path="structured-corpus.html"><a href="structured-corpus.html#metadata-vs.-utterances"><i class="fa fa-check"></i><b>10.5</b> Metadata vs. Utterances</a></li>
<li class="chapter" data-level="10.6" data-path="structured-corpus.html"><a href="structured-corpus.html#word-based-df-and-frequency-list"><i class="fa fa-check"></i><b>10.6</b> Word-based DF and Frequency List</a></li>
<li class="chapter" data-level="10.7" data-path="structured-corpus.html"><a href="structured-corpus.html#concordances"><i class="fa fa-check"></i><b>10.7</b> Concordances</a></li>
<li class="chapter" data-level="10.8" data-path="structured-corpus.html"><a href="structured-corpus.html#collocations-bigrams"><i class="fa fa-check"></i><b>10.8</b> Collocations (Bigrams)</a></li>
<li class="chapter" data-level="10.9" data-path="structured-corpus.html"><a href="structured-corpus.html#n-grams-lexical-bundles"><i class="fa fa-check"></i><b>10.9</b> N-grams (Lexical Bundles)</a></li>
<li class="chapter" data-level="10.10" data-path="structured-corpus.html"><a href="structured-corpus.html#connecting-spid-to-metadata"><i class="fa fa-check"></i><b>10.10</b> Connecting SPID to Metadata</a></li>
<li class="chapter" data-level="10.11" data-path="structured-corpus.html"><a href="structured-corpus.html#processing-corpus-headers"><i class="fa fa-check"></i><b>10.11</b> Processing Corpus Headers</a></li>
<li class="chapter" data-level="10.12" data-path="structured-corpus.html"><a href="structured-corpus.html#sociolinguistic-analyses"><i class="fa fa-check"></i><b>10.12</b> Sociolinguistic Analyses</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="xml.html"><a href="xml.html"><i class="fa fa-check"></i><b>11</b> XML</a>
<ul>
<li class="chapter" data-level="11.1" data-path="xml.html"><a href="xml.html#bnc-spoken-2014"><i class="fa fa-check"></i><b>11.1</b> BNC Spoken 2014</a></li>
<li class="chapter" data-level="11.2" data-path="xml.html"><a href="xml.html#processing-one-xml-file"><i class="fa fa-check"></i><b>11.2</b> Processing one XML file</a></li>
<li class="chapter" data-level="11.3" data-path="xml.html"><a href="xml.html#process-the-whole-directory-of-bnc2014-sample"><i class="fa fa-check"></i><b>11.3</b> Process the Whole Directory of BNC2014 Sample</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="xml.html"><a href="xml.html#define-function"><i class="fa fa-check"></i><b>11.3.1</b> Define Function</a></li>
<li class="chapter" data-level="11.3.2" data-path="xml.html"><a href="xml.html#apply-function"><i class="fa fa-check"></i><b>11.3.2</b> Apply Function</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="xml.html"><a href="xml.html#metadata"><i class="fa fa-check"></i><b>11.4</b> Metadata</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="xml.html"><a href="xml.html#text-metadata"><i class="fa fa-check"></i><b>11.4.1</b> Text Metadata</a></li>
<li class="chapter" data-level="11.4.2" data-path="xml.html"><a href="xml.html#speaker-metadata"><i class="fa fa-check"></i><b>11.4.2</b> Speaker Metadata</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="xml.html"><a href="xml.html#bnc2014-for-socio-linguistic-variation"><i class="fa fa-check"></i><b>11.5</b> BNC2014 for Socio-linguistic Variation</a></li>
<li class="chapter" data-level="11.6" data-path="xml.html"><a href="xml.html#lexical-analysis"><i class="fa fa-check"></i><b>11.6</b> Lexical Analysis</a>
<ul>
<li class="chapter" data-level="11.6.1" data-path="xml.html"><a href="xml.html#word-frequency-vs.-gender"><i class="fa fa-check"></i><b>11.6.1</b> Word Frequency vs. Gender</a></li>
<li class="chapter" data-level="11.6.2" data-path="xml.html"><a href="xml.html#frequency-and-keyword-analysis"><i class="fa fa-check"></i><b>11.6.2</b> Frequency and Keyword Analysis</a></li>
</ul></li>
<li class="chapter" data-level="11.7" data-path="xml.html"><a href="xml.html#constructions-analysis"><i class="fa fa-check"></i><b>11.7</b> Constructions Analysis</a>
<ul>
<li class="chapter" data-level="11.7.1" data-path="xml.html"><a href="xml.html#from-token-based-to-turn-based-data-frame"><i class="fa fa-check"></i><b>11.7.1</b> From Token-based to Turn-based Data Frame</a></li>
<li class="chapter" data-level="11.7.2" data-path="xml.html"><a href="xml.html#degree-adv-adj"><i class="fa fa-check"></i><b>11.7.2</b> Degree ADV + ADJ</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="vector-space-representation.html"><a href="vector-space-representation.html"><i class="fa fa-check"></i><b>12</b> Vector Space Representation</a>
<ul>
<li class="chapter" data-level="12.1" data-path="vector-space-representation.html"><a href="vector-space-representation.html#distributional-semantics"><i class="fa fa-check"></i><b>12.1</b> Distributional Semantics</a></li>
<li class="chapter" data-level="12.2" data-path="vector-space-representation.html"><a href="vector-space-representation.html#vector-space-model-for-documents"><i class="fa fa-check"></i><b>12.2</b> Vector Space Model for Documents</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="vector-space-representation.html"><a href="vector-space-representation.html#data-processing-flowchart"><i class="fa fa-check"></i><b>12.2.1</b> Data Processing Flowchart</a></li>
<li class="chapter" data-level="12.2.2" data-path="vector-space-representation.html"><a href="vector-space-representation.html#document-feature-matrix-dfm"><i class="fa fa-check"></i><b>12.2.2</b> Document-Feature Matrix (<code>dfm</code>)</a></li>
<li class="chapter" data-level="12.2.3" data-path="vector-space-representation.html"><a href="vector-space-representation.html#intuition-for-dfm"><i class="fa fa-check"></i><b>12.2.3</b> Intuition for DFM</a></li>
<li class="chapter" data-level="12.2.4" data-path="vector-space-representation.html"><a href="vector-space-representation.html#more-sophisticated-dfm"><i class="fa fa-check"></i><b>12.2.4</b> More sophisticated DFM</a></li>
<li class="chapter" data-level="12.2.5" data-path="vector-space-representation.html"><a href="vector-space-representation.html#distance-similarity-metrics"><i class="fa fa-check"></i><b>12.2.5</b> Distance/Similarity Metrics</a></li>
<li class="chapter" data-level="12.2.6" data-path="vector-space-representation.html"><a href="vector-space-representation.html#multidimensiona-space"><i class="fa fa-check"></i><b>12.2.6</b> Multidimensiona Space</a></li>
<li class="chapter" data-level="12.2.7" data-path="vector-space-representation.html"><a href="vector-space-representation.html#feature-selection"><i class="fa fa-check"></i><b>12.2.7</b> Feature Selection</a></li>
<li class="chapter" data-level="12.2.8" data-path="vector-space-representation.html"><a href="vector-space-representation.html#exploratory-analysis-of-dfm"><i class="fa fa-check"></i><b>12.2.8</b> Exploratory Analysis of <code>dfm</code></a></li>
<li class="chapter" data-level="12.2.9" data-path="vector-space-representation.html"><a href="vector-space-representation.html#document-similarity"><i class="fa fa-check"></i><b>12.2.9</b> Document Similarity</a></li>
<li class="chapter" data-level="12.2.10" data-path="vector-space-representation.html"><a href="vector-space-representation.html#cluster-analysis"><i class="fa fa-check"></i><b>12.2.10</b> Cluster Analysis</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="vector-space-representation.html"><a href="vector-space-representation.html#vector-space-model-for-words-self-study"><i class="fa fa-check"></i><b>12.3</b> Vector Space Model for Words (Self-Study)</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="vector-space-representation.html"><a href="vector-space-representation.html#feature-coocurrence-matrix-fcm"><i class="fa fa-check"></i><b>12.3.1</b> Feature-Coocurrence Matrix (<code>fcm</code>)</a></li>
<li class="chapter" data-level="12.3.2" data-path="vector-space-representation.html"><a href="vector-space-representation.html#from-tokens-to-fcm"><i class="fa fa-check"></i><b>12.3.2</b> From <code>tokens</code> to <code>fcm</code></a></li>
<li class="chapter" data-level="12.3.3" data-path="vector-space-representation.html"><a href="vector-space-representation.html#from-dfm-to-fcm"><i class="fa fa-check"></i><b>12.3.3</b> From <code>dfm</code> to <code>fcm</code></a></li>
<li class="chapter" data-level="12.3.4" data-path="vector-space-representation.html"><a href="vector-space-representation.html#lexical-similarity"><i class="fa fa-check"></i><b>12.3.4</b> Lexical Similarity</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="vector-space-representation.html"><a href="vector-space-representation.html#exercises-1"><i class="fa fa-check"></i><b>12.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="python-environment.html"><a href="python-environment.html"><i class="fa fa-check"></i><b>13</b> Python Environment</a>
<ul>
<li><a href="python-environment.html#install-the-python-with-anaconda">Install the python with <span>Anaconda</span></a></li>
<li class="chapter" data-level="" data-path="python-environment.html"><a href="python-environment.html#create-conda-environment"><i class="fa fa-check"></i>Create Conda Environment</a></li>
<li class="chapter" data-level="" data-path="python-environment.html"><a href="python-environment.html#install-python-modules"><i class="fa fa-check"></i>Install Python Modules</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>14</b> References</a></li>
<li class="divider"></li>
<li><a href="https://web.ntnu.edu.tw/~alvinchen" target ="blank">Alvin Chen </a></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Corpus Linguistics</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<script src="https://hypothes.is/embed.js" async></script>
<div id="creating-corpus" class="section level1" number="3">
<h1><span class="header-section-number">Chapter 3</span> Creating Corpus</h1>
<p>Linguistic data are important to us linguists. Data usually tell us something we don’t know, or something we are not sure of. In this chapter, I would like to show you a quick way to extract linguistic data from web pages, which is by now undoubtedly the largest source of textual data available.</p>
<p>While there are many existing text data collections (cf. <a href="#structured-coprus">Structured Corpus</a> and <a href="xml.html#xml">XML</a>), chances are that sometimes you still need to collect your own data for a particular research question. But please note that when you are creating your own corpus for specific research questions, always pay attention to the three important criteria: <strong>representativeness</strong>, <strong>authenticity</strong>, and <strong>size</strong>.</p>
<p>Following the spirit of tidy <svg viewBox="0 0 581 512" style="height:1em;position:relative;display:inline-block;top:.1em;" xmlns="http://www.w3.org/2000/svg"> <path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"></path></svg>, we will mainly do our tasks with the libraries of <code>tidyverse</code> and <code>rvests</code>.</p>
<div class="info">
<p>If you are new to <strong>tidyverse</strong> R, please check its <a href="https://www.tidyverse.org/learn/">official webpage</a> for learning resources.</p>
</div>
<div class="sourceCode" id="cb2"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb2-1"><a href="creating-corpus.html#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Uncomment the following line for installation</span></span>
<span id="cb2-2"><a href="creating-corpus.html#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages(c(&quot;tidyverse&quot;, &quot;rvest&quot;))</span></span>
<span id="cb2-3"><a href="creating-corpus.html#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb2-4"><a href="creating-corpus.html#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rvest)</span></code></pre></div>
<div id="html-structure" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> HTML Structure</h2>
<p>The <strong>H</strong>yper<strong>T</strong>ext <strong>M</strong>arkup <strong>L</strong>anguage, or HTML is the standard markup language for documents designed to be displayed in a web browser.</p>
<div id="html-syntax" class="section level3" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> HTML Syntax</h3>
<p>To illustrate the structure of the HTML, please download the sample <code>html</code> file from: <code>demo_data/data-sample-html.html</code> and first open it with your browser.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode html Rchunk"><code class="sourceCode html"><span id="cb3-1"><a href="creating-corpus.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;!DOCTYPE </span>html<span class="dt">&gt;</span></span>
<span id="cb3-2"><a href="creating-corpus.html#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;html&gt;</span></span>
<span id="cb3-3"><a href="creating-corpus.html#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;head&gt;</span></span>
<span id="cb3-4"><a href="creating-corpus.html#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;title&gt;</span>My First HTML <span class="kw">&lt;/title&gt;</span></span>
<span id="cb3-5"><a href="creating-corpus.html#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="creating-corpus.html#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;/head&gt;</span></span>
<span id="cb3-7"><a href="creating-corpus.html#cb3-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-8"><a href="creating-corpus.html#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;body&gt;</span></span>
<span id="cb3-9"><a href="creating-corpus.html#cb3-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;h1&gt;</span> Introduction <span class="kw">&lt;/h1&gt;</span></span>
<span id="cb3-10"><a href="creating-corpus.html#cb3-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;p&gt;</span> Have you ever read the source code of a html page? This is how to get back to the course page: <span class="kw">&lt;a</span> <span class="er">href</span><span class="ot">=</span><span class="st">&quot;https://alvinntnu.github.io/NTNU_ENC2036_LECTURES/&quot;</span><span class="er">,</span> <span class="er">target</span><span class="ot">=</span><span class="st">&quot;_blank&quot;</span><span class="kw">&gt;</span>ENC2036<span class="kw">&lt;/a&gt;</span>. <span class="kw">&lt;/p&gt;</span></span>
<span id="cb3-11"><a href="creating-corpus.html#cb3-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;h1&gt;</span> Contents of the Page <span class="kw">&lt;/h1&gt;</span></span>
<span id="cb3-12"><a href="creating-corpus.html#cb3-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;p&gt;</span> Anything you can say about the page.....<span class="kw">&lt;/p&gt;</span></span>
<span id="cb3-13"><a href="creating-corpus.html#cb3-13" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;/body&gt;</span></span>
<span id="cb3-14"><a href="creating-corpus.html#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/html&gt;</span></span></code></pre></div>
<p>An <code>HTML</code> document includes several important elements (cf. Figure <a href="creating-corpus.html#fig:htmltag">3.1</a>):</p>
<ul>
<li><code>DTD</code>: document type definition which informs the browser about the version of the HTML standard that the document adheres to (e.g., <code>&lt;!DOCTYPE HTML&gt;</code>)</li>
<li><code>element</code>: the combination of start tag, content, and end tag (e.g, <code>&lt;title&gt;My First HTML&lt;/title&gt;</code>)</li>
<li><code>tag</code>: named braces that enclose the content and define its structural function (e.g., <code>title</code>, <code>body</code>, <code>p</code>)</li>
<li><code>attribute</code>: specific properties of the tag, which are often placed in the start end of the element (e.g., <code>&lt;a href= "index.html"&gt; Homepage &lt;/a&gt;</code>). They are expressed as <code>name = "value"</code> pairs.</li>
</ul>
<!-- ```{r echo=F, purl = F, out.width = "70%"} -->
<!-- htmltools::includeHTML("demo_data/my-first-html.html") -->
<!-- ``` -->
<div class="figure"><span style="display:block;" id="fig:htmltag"></span>
<img src="images/html-tag.png" alt="Syntax of An HTML Tag Element" width="90%" />
<p class="caption">
Figure 3.1: Syntax of An HTML Tag Element
</p>
</div>
<p>An <code>HTML</code> document starts with the root element <code>&lt;html&gt;</code>, which splits into two branches, <code>&lt;head&gt;</code> and <code>&lt;body&gt;</code>.</p>
<ul>
<li>Most of the webpage <strong>textual contents</strong> would go into the <code>&lt;body&gt;</code> part.</li>
<li>Most of the web-related codes and metadata (e.g., javascripts, CSS) are often included in the <code>&lt;head&gt;</code> part.</li>
</ul>
<p>All elements need to be strictly nested within each other in a well-formed and valid HTML file, as shown in Figure <a href="creating-corpus.html#fig:htmltree">3.2</a>.</p>
<div class="figure"><span style="display:block;" id="fig:htmltree"></span>
<img src="images/html-tree.png" alt="Tree Structure of An HTML Document" width="648" />
<p class="caption">
Figure 3.2: Tree Structure of An HTML Document
</p>
</div>
</div>
<div id="tags-and-attributes" class="section level3" number="3.1.2">
<h3><span class="header-section-number">3.1.2</span> Tags and Attributes</h3>
<p>HTML has plenty of legal tags and attributes. On <a href="https://www.w3schools.com/html/html_basic.asp">W3CSchools</a>, there is a complete list of HTML tags and attributes for your reference. Common tags may include:</p>
<ul>
<li>Anchor tag <code>&lt;a&gt;</code></li>
<li>Metadata tag <code>&lt;meta&gt;</code></li>
<li>External tag <code>&lt;link&gt;</code></li>
<li>Emphasizing tags <code>&lt;b&gt;</code>, <code>&lt;i&gt;</code>, <code>&lt;strong&gt;</code></li>
<li>Paragraph tags <code>&lt;p&gt;</code></li>
<li>Heading tags <code>&lt;h1&gt;</code>, <code>&lt;h2&gt;</code>, <code>&lt;h3&gt;</code></li>
<li>Listing content tags <code>&lt;ul&gt;</code>, <code>&lt;ol&gt;</code></li>
<li>Block tags <code>&lt;div&gt;</code>, <code>&lt;span&gt;</code></li>
<li>Form-related tag <code>&lt;form&gt;</code>, <code>&lt;input&gt;</code></li>
<li>Foreign script tag <code>&lt;script&gt;</code></li>
<li>Table tag <code>&lt;table&gt;</code>, <code>&lt;th&gt;</code>, <code>&lt;tr&gt;</code>, <code>&lt;td&gt;</code></li>
</ul>
<p>You probably don’t have to know all the detail about the HTML tags and elements. However, in order to scrape the textual data from the Internet, you need to know at least from which parts of HTML elements you need your textual data from on the web pages.</p>
<div class="info">
<p>Usually, before you scrape the data from the webpage, bear the following questions in mind:</p>
<ul>
<li>From which HTML <strong>elements/tags</strong> would you like to extract the data for corpus construction?</li>
<li>Do you need the <strong>textual</strong> content of the HTML element?</li>
<li>Do you need a specific <strong>attribute</strong> of the HTML element?</li>
</ul>
</div>
</div>
<div id="css" class="section level3" number="3.1.3">
<h3><span class="header-section-number">3.1.3</span> CSS</h3>
<p>Cascading Style Sheet (CSS) is a language for describing the layout of HTML and other markup documents (e.g., XML).</p>
<p>HTML + CSS is by now the standard way to create and design web pages. The idea is that CSS specifies the formats/styles of the HTML elements. The following is an example of the CSS:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode css Rchunk"><code class="sourceCode css"><span id="cb4-1"><a href="creating-corpus.html#cb4-1" aria-hidden="true" tabindex="-1"></a>div<span class="fu">.warnings</span> {</span>
<span id="cb4-2"><a href="creating-corpus.html#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">color</span>: <span class="cn">pink</span><span class="op">;</span></span>
<span id="cb4-3"><a href="creating-corpus.html#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">font-family</span>: <span class="st">&quot;Arial&quot;</span></span>
<span id="cb4-4"><a href="creating-corpus.html#cb4-4" aria-hidden="true" tabindex="-1"></a>  font-size: <span class="dv">120</span><span class="dt">%</span></span>
<span id="cb4-5"><a href="creating-corpus.html#cb4-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb4-6"><a href="creating-corpus.html#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="creating-corpus.html#cb4-7" aria-hidden="true" tabindex="-1"></a>h1 {</span>
<span id="cb4-8"><a href="creating-corpus.html#cb4-8" aria-hidden="true" tabindex="-1"></a>  <span class="kw">padding-top</span>: <span class="dv">20</span><span class="dt">px</span></span>
<span id="cb4-9"><a href="creating-corpus.html#cb4-9" aria-hidden="true" tabindex="-1"></a>  padding-bottom: <span class="dv">20</span><span class="dt">px</span></span>
<span id="cb4-10"><a href="creating-corpus.html#cb4-10" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<style type="text/css">
div.warnings {
  color: pink;
  font-family: "Arial"
  font-size: 120%
}

h1 {
  padding-top: 20px
  padding-bottom: 20px
}
</style>
<div class="info">
<p>You probably would wonder how to link a set of CSS style definitions to an HTML document. There are in general three ways: inline, internal and external. You can learn more about this in <a href="https://www.w3schools.com/html/html_css.asp">W3School.com</a>.</p>
<p>Here I will show you an example of the <strong>internal</strong> method. Below is a CSS style definition for <code>&lt;h1&gt;</code>.</p>
<pre><code>h1 {
  color: red;
  margin-bottom: 2em;
}</code></pre>
<p>We can embed this within a <code>&lt;style&gt;...&lt;/style&gt;</code> element. Then you put the entire <code>&lt;style&gt;</code> element under <code>&lt;head&gt;</code> of the HTML file you would like to style.</p>
<pre><code>&lt;style&gt;
h1 {
  color: red;
  margin-bottom: 1.5em;
}
&lt;/style&gt;</code></pre>
<p>After you include the <code>&lt;style&gt;</code> in the HTML file, refresh the web page to see if the CSS style works.</p>
</div>
</div>
<div id="html-css-javascript" class="section level3" number="3.1.4">
<h3><span class="header-section-number">3.1.4</span> HTML + CSS ( + JavaScript)</h3>
<p><img src="images/web-page-design.png" width="80%" /></p>
<ul>
<li><p><a href="https://www.w3schools.com/">Try it</a>:</p>
<ul>
<li>HTML: the language for building web pages</li>
<li>CSS: the language for styling web pages</li>
<li>JavaScript: the language for programming web pages</li>
</ul></li>
</ul>
</div>
</div>
<div id="web-crawling" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Web Crawling</h2>
<div class="warning">
<p>In the following demonstration, the text data scraped from the PTT forum is presented as it is without adjustment. However, please note that the language on PTT may strike some readers as profane, vulgar or even offensive.</p>
</div>
<div class="sourceCode" id="cb7"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb7-1"><a href="creating-corpus.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb7-2"><a href="creating-corpus.html#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rvest)</span></code></pre></div>
<p>In this tutorial, let’s assume that we like to scrape texts from <a href="https://www.ptt.cc/bbs/index.html">PTT Forum</a>. In particular, we will demonstrate how to scrape texts from the <a href="https://www.ptt.cc/bbs/Gossiping/index.html"><code>Gossiping</code></a> board of PTT.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb8-1"><a href="creating-corpus.html#cb8-1" aria-hidden="true" tabindex="-1"></a>ptt.url <span class="ot">&lt;-</span> <span class="st">&quot;https://www.ptt.cc/bbs/Gossiping&quot;</span></span></code></pre></div>
<p>If you use your browser to view <a href="https://www.ptt.cc/bbs/Gossiping">PTT Gossiping</a> page, you would see that you need to go through the age verification before you can enter the content page. So, our first job is to pass through this age verification.</p>
<ul>
<li>First, we create an <code>session()</code> (like we open a browser linking to the page)</li>
</ul>
<div class="sourceCode" id="cb9"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb9-1"><a href="creating-corpus.html#cb9-1" aria-hidden="true" tabindex="-1"></a>gossiping.session <span class="ot">&lt;-</span> <span class="fu">session</span>(ptt.url)</span></code></pre></div>
<ul>
<li>Second, we extract the age verification form from the current page (<code>form</code> is also a defined HTML element)</li>
</ul>
<div class="sourceCode" id="cb10"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb10-1"><a href="creating-corpus.html#cb10-1" aria-hidden="true" tabindex="-1"></a>gossiping.form <span class="ot">&lt;-</span> gossiping.session <span class="sc">%&gt;%</span></span>
<span id="cb10-2"><a href="creating-corpus.html#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_node</span>(<span class="st">&quot;form&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-3"><a href="creating-corpus.html#cb10-3" aria-hidden="true" tabindex="-1"></a>  html_form</span></code></pre></div>
<ul>
<li>Then we automatically submit an <code>yes</code> to the age verification form in the earlier created <code>session()</code> and create another session.</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb11-1"><a href="creating-corpus.html#cb11-1" aria-hidden="true" tabindex="-1"></a>gossiping <span class="ot">&lt;-</span> <span class="fu">session_submit</span>(</span>
<span id="cb11-2"><a href="creating-corpus.html#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> gossiping.session,</span>
<span id="cb11-3"><a href="creating-corpus.html#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">form =</span> gossiping.form,</span>
<span id="cb11-4"><a href="creating-corpus.html#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">submit =</span> <span class="st">&quot;yes&quot;</span></span>
<span id="cb11-5"><a href="creating-corpus.html#cb11-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb11-6"><a href="creating-corpus.html#cb11-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-7"><a href="creating-corpus.html#cb11-7" aria-hidden="true" tabindex="-1"></a>gossiping</span></code></pre></div>
<pre class="Rout"><code>&lt;session&gt; https://www.ptt.cc/bbs/Gossiping/index.html
  Status: 200
  Type:   text/html; charset=utf-8
  Size:   15489</code></pre>
<p>Now our html <code>session</code>, i.e., <code>gossiping</code>, should be on the front page of the <code>Gossiping</code> board.</p>
<hr />
<div class="info">
<p>
Most browsers come with the functionality to inspect the page source
(i.e., HTML). This is very useful for web crawling. Before we scrape
data from the webpage, we often need to inspect the structure of the web
page first. Most importantly, we need to know (a) which HTML elements,
or (b) which particular attributes/values of the HTML elements we are
interested in .
</p>
</div>
<p><img src="images/view-page-source.png" width="80%" /><img src="images/view-page-source-2.png" width="80%" /></p>
<hr />
<ul>
<li>Next we need to find the most recent index page of the board</li>
</ul>
<div class="sourceCode" id="cb13"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb13-1"><a href="creating-corpus.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Decide the number of index pages ----</span></span>
<span id="cb13-2"><a href="creating-corpus.html#cb13-2" aria-hidden="true" tabindex="-1"></a>page.latest <span class="ot">&lt;-</span> gossiping <span class="sc">%&gt;%</span></span>
<span id="cb13-3"><a href="creating-corpus.html#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="st">&quot;a&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># extract all &lt;a&gt; elements</span></span>
<span id="cb13-4"><a href="creating-corpus.html#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_attr</span>(<span class="st">&quot;href&quot;</span>) <span class="sc">%&gt;%</span>  <span class="co"># extract the attributes `href`</span></span>
<span id="cb13-5"><a href="creating-corpus.html#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_subset</span>(<span class="st">&quot;index[0-9]{2,}</span><span class="sc">\\</span><span class="st">.html&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># find the `href` with the index number</span></span>
<span id="cb13-6"><a href="creating-corpus.html#cb13-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_extract</span>(<span class="st">&quot;[0-9]+&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># extract the number</span></span>
<span id="cb13-7"><a href="creating-corpus.html#cb13-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.numeric</span>()</span>
<span id="cb13-8"><a href="creating-corpus.html#cb13-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-9"><a href="creating-corpus.html#cb13-9" aria-hidden="true" tabindex="-1"></a>page.latest</span></code></pre></div>
<pre class="Rout"><code>[1] 39251</code></pre>
<ul>
<li>On the most recent index page, we need to extract the hyperlinks to the articles</li>
</ul>
<div class="sourceCode" id="cb15"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb15-1"><a href="creating-corpus.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Retreive links -----</span></span>
<span id="cb15-2"><a href="creating-corpus.html#cb15-2" aria-hidden="true" tabindex="-1"></a>link <span class="ot">&lt;-</span> <span class="fu">str_c</span>(ptt.url, <span class="st">&quot;/index&quot;</span>, page.latest, <span class="st">&quot;.html&quot;</span>)</span>
<span id="cb15-3"><a href="creating-corpus.html#cb15-3" aria-hidden="true" tabindex="-1"></a>links.article <span class="ot">&lt;-</span> gossiping <span class="sc">%&gt;%</span></span>
<span id="cb15-4"><a href="creating-corpus.html#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">session_jump_to</span>(link) <span class="sc">%&gt;%</span> <span class="co"># move session to the most recent page</span></span>
<span id="cb15-5"><a href="creating-corpus.html#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="st">&quot;a&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># extract article &lt;a&gt;</span></span>
<span id="cb15-6"><a href="creating-corpus.html#cb15-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_attr</span>(<span class="st">&quot;href&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># extract article &lt;a&gt; `href` attributes</span></span>
<span id="cb15-7"><a href="creating-corpus.html#cb15-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_subset</span>(<span class="st">&quot;[A-z]</span><span class="sc">\\</span><span class="st">.[0-9]+</span><span class="sc">\\</span><span class="st">.[A-z]</span><span class="sc">\\</span><span class="st">.[A-z0-9]+</span><span class="sc">\\</span><span class="st">.html&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># extract links</span></span>
<span id="cb15-8"><a href="creating-corpus.html#cb15-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_c</span>(<span class="st">&quot;https://www.ptt.cc&quot;</span>,.)</span>
<span id="cb15-9"><a href="creating-corpus.html#cb15-9" aria-hidden="true" tabindex="-1"></a>links.article</span></code></pre></div>
<pre class="Rout"><code> [1] &quot;https://www.ptt.cc/bbs/Gossiping/M.1652956174.A.D67.html&quot;
 [2] &quot;https://www.ptt.cc/bbs/Gossiping/M.1652956180.A.2E9.html&quot;
 [3] &quot;https://www.ptt.cc/bbs/Gossiping/M.1652956194.A.DFA.html&quot;
 [4] &quot;https://www.ptt.cc/bbs/Gossiping/M.1652956242.A.224.html&quot;
 [5] &quot;https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html&quot;
 [6] &quot;https://www.ptt.cc/bbs/Gossiping/M.1652956253.A.C9E.html&quot;
 [7] &quot;https://www.ptt.cc/bbs/Gossiping/M.1652956317.A.A97.html&quot;
 [8] &quot;https://www.ptt.cc/bbs/Gossiping/M.1652956327.A.031.html&quot;
 [9] &quot;https://www.ptt.cc/bbs/Gossiping/M.1652956415.A.79F.html&quot;
[10] &quot;https://www.ptt.cc/bbs/Gossiping/M.1652956424.A.5E1.html&quot;
[11] &quot;https://www.ptt.cc/bbs/Gossiping/M.1652956448.A.E46.html&quot;
[12] &quot;https://www.ptt.cc/bbs/Gossiping/M.1652956530.A.4C6.html&quot;
[13] &quot;https://www.ptt.cc/bbs/Gossiping/M.1652956545.A.929.html&quot;
[14] &quot;https://www.ptt.cc/bbs/Gossiping/M.1652956583.A.D7C.html&quot;
[15] &quot;https://www.ptt.cc/bbs/Gossiping/M.1652956626.A.691.html&quot;
[16] &quot;https://www.ptt.cc/bbs/Gossiping/M.1652956651.A.8B3.html&quot;
[17] &quot;https://www.ptt.cc/bbs/Gossiping/M.1652956658.A.A00.html&quot;
[18] &quot;https://www.ptt.cc/bbs/Gossiping/M.1652956668.A.E49.html&quot;
[19] &quot;https://www.ptt.cc/bbs/Gossiping/M.1652956676.A.578.html&quot;
[20] &quot;https://www.ptt.cc/bbs/Gossiping/M.1652956753.A.D69.html&quot;</code></pre>
<ul>
<li>Next step is to scrape texts from each article hyperlink. Let’s consider one link first.</li>
</ul>
<div class="sourceCode" id="cb17"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb17-1"><a href="creating-corpus.html#cb17-1" aria-hidden="true" tabindex="-1"></a>article.url <span class="ot">&lt;-</span> links.article[<span class="dv">1</span>]</span>
<span id="cb17-2"><a href="creating-corpus.html#cb17-2" aria-hidden="true" tabindex="-1"></a>temp.html <span class="ot">&lt;-</span> gossiping <span class="sc">%&gt;%</span> </span>
<span id="cb17-3"><a href="creating-corpus.html#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">session_jump_to</span>(article.url) <span class="co"># link to the article</span></span></code></pre></div>
<ul>
<li>Now the <code>temp.html</code> is like a browser on the article page. Because we are interested in the metadata and the contents of each article, now the question is: where are they in the HTML? We need to go back to the source page of the article HTML again:</li>
</ul>
<p><img src="images/view-page-source-3.png" width="100%" /></p>
<ul>
<li><p>After a closer inspection of the article HTML, we know that:</p>
<ul>
<li>The metadata of the article are included in <code>&lt;span&gt;</code> tag elements, belonging to the class <code>class="article-meta-value"</code></li>
<li>The contents of the article are included in the <code>&lt;div&gt;</code> element, whose ID is <code>ID="main-content"</code></li>
</ul></li>
</ul>
<hr />
<ul>
<li>Now we are ready to extract the metadata of the article.</li>
</ul>
<div class="sourceCode" id="cb18"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb18-1"><a href="creating-corpus.html#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract article metadata</span></span>
<span id="cb18-2"><a href="creating-corpus.html#cb18-2" aria-hidden="true" tabindex="-1"></a>article.header <span class="ot">&lt;-</span> temp.html <span class="sc">%&gt;%</span></span>
<span id="cb18-3"><a href="creating-corpus.html#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="st">&quot;span.article-meta-value&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># get &lt;span&gt; of a particular class</span></span>
<span id="cb18-4"><a href="creating-corpus.html#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text</span>()</span>
<span id="cb18-5"><a href="creating-corpus.html#cb18-5" aria-hidden="true" tabindex="-1"></a>article.header</span></code></pre></div>
<pre class="Rout"><code>[1] &quot;poonebetty (小肥媽)&quot;                 &quot;Gossiping&quot;                          
[3] &quot;[問卦] 如何用一句話違停讓警察不開單&quot; &quot;Thu May 19 18:29:32 2022&quot;           </code></pre>
<div class="info">
<p>The metadata of each PTT article in fact includes four pieces of information: author, board name, title, post time. The above code retrieves directly the values of these metadata.</p>
<p>We can retrieve the tags of these metadata values as well:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb20-1"><a href="creating-corpus.html#cb20-1" aria-hidden="true" tabindex="-1"></a>temp.html <span class="sc">%&gt;%</span></span>
<span id="cb20-2"><a href="creating-corpus.html#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="st">&quot;span.article-meta-tag&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># get &lt;span&gt; of a particular class</span></span>
<span id="cb20-3"><a href="creating-corpus.html#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text</span>()</span></code></pre></div>
<pre class="Rout"><code>[1] &quot;作者&quot; &quot;看板&quot; &quot;標題&quot; &quot;時間&quot;</code></pre>
</div>
<ul>
<li>From the <code>article.header</code>, we are able to extract the <code>author</code>, <code>title</code>, and <code>time stamp</code> of the article.</li>
</ul>
<div class="sourceCode" id="cb22"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb22-1"><a href="creating-corpus.html#cb22-1" aria-hidden="true" tabindex="-1"></a>article.author <span class="ot">&lt;-</span> article.header[<span class="dv">1</span>] <span class="sc">%&gt;%</span> <span class="fu">str_extract</span>(<span class="st">&quot;^[A-z0-9_]+&quot;</span>) <span class="co"># athuor</span></span>
<span id="cb22-2"><a href="creating-corpus.html#cb22-2" aria-hidden="true" tabindex="-1"></a>article.title <span class="ot">&lt;-</span> article.header[<span class="dv">3</span>] <span class="co"># title</span></span>
<span id="cb22-3"><a href="creating-corpus.html#cb22-3" aria-hidden="true" tabindex="-1"></a>article.datetime <span class="ot">&lt;-</span> article.header[<span class="dv">4</span>] <span class="co"># time stamp</span></span>
<span id="cb22-4"><a href="creating-corpus.html#cb22-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-5"><a href="creating-corpus.html#cb22-5" aria-hidden="true" tabindex="-1"></a>article.author</span></code></pre></div>
<pre class="Rout"><code>[1] &quot;poonebetty&quot;</code></pre>
<div class="sourceCode" id="cb24"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb24-1"><a href="creating-corpus.html#cb24-1" aria-hidden="true" tabindex="-1"></a>article.title</span></code></pre></div>
<pre class="Rout"><code>[1] &quot;[問卦] 如何用一句話違停讓警察不開單&quot;</code></pre>
<div class="sourceCode" id="cb26"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb26-1"><a href="creating-corpus.html#cb26-1" aria-hidden="true" tabindex="-1"></a>article.datetime</span></code></pre></div>
<pre class="Rout"><code>[1] &quot;Thu May 19 18:29:32 2022&quot;</code></pre>
<ul>
<li>Now we extract the main contents of the article</li>
</ul>
<div class="sourceCode" id="cb28"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb28-1"><a href="creating-corpus.html#cb28-1" aria-hidden="true" tabindex="-1"></a>article.content <span class="ot">&lt;-</span> temp.html <span class="sc">%&gt;%</span></span>
<span id="cb28-2"><a href="creating-corpus.html#cb28-2" aria-hidden="true" tabindex="-1"></a>        <span class="fu">html_nodes</span>( <span class="co"># article body</span></span>
<span id="cb28-3"><a href="creating-corpus.html#cb28-3" aria-hidden="true" tabindex="-1"></a>          <span class="at">xpath =</span> <span class="st">&#39;//div[@id=&quot;main-content&quot;]/node()[not(self::div|self::span[@class=&quot;f2&quot;])]&#39;</span></span>
<span id="cb28-4"><a href="creating-corpus.html#cb28-4" aria-hidden="true" tabindex="-1"></a>        ) <span class="sc">%&gt;%</span></span>
<span id="cb28-5"><a href="creating-corpus.html#cb28-5" aria-hidden="true" tabindex="-1"></a>        <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> <span class="co"># extract texts</span></span>
<span id="cb28-6"><a href="creating-corpus.html#cb28-6" aria-hidden="true" tabindex="-1"></a>        <span class="fu">str_c</span>(<span class="at">collapse =</span> <span class="st">&quot;&quot;</span>) <span class="co"># combine all lines into one</span></span>
<span id="cb28-7"><a href="creating-corpus.html#cb28-7" aria-hidden="true" tabindex="-1"></a>article.content</span></code></pre></div>
<pre class="Rout"><code>[1] &quot;我阿肥啦\n台北難停車\n一不小心紅線違停\n被警察開單\n如何用一句話讓警察不開阿肥的單\n有嗎\n\n--&quot;</code></pre>
<div class="info">
<p>
<code>XPath</code> (or XML Path Language) is a query language which
is useful for addressing and extracting particular elements from
XML/HTML documents. XPath allows you to exploit more features of the
hierarchical tree that an HTML file represents in locating the relevant
HTML elements. For more information, please see <span class="citation"><span class="citation">Munzert et al. (<a href="#ref-munzert2014" role="doc-biblioref">2014</a>)</span></span>, Chapter 4.
</p>
<p>
In the above example, the <code>XPath</code> identifies the nodes
<em>under</em> <code>&lt;div id = “main-content”&gt;</code>, but
excludes sister nodes that are <code>&lt;div&gt;</code> or
<code>&lt;span class=“f2”&gt;</code>.
</p>
<p>
These children <code>&lt;div&gt;</code> or
<code>&lt;span class=“f2”&gt;</code> of the
<code>&lt;div id = “main-content”&gt;</code> include the push comments
(推文) of the article, which are not the main content of the
article.
</p>
</div>
<ul>
<li>Now we can combine all information related to the article into a data frame</li>
</ul>
<div class="sourceCode" id="cb30"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb30-1"><a href="creating-corpus.html#cb30-1" aria-hidden="true" tabindex="-1"></a>article.table <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb30-2"><a href="creating-corpus.html#cb30-2" aria-hidden="true" tabindex="-1"></a>      <span class="at">datetime =</span> article.datetime,</span>
<span id="cb30-3"><a href="creating-corpus.html#cb30-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">title =</span> article.title,</span>
<span id="cb30-4"><a href="creating-corpus.html#cb30-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">author =</span> article.author,</span>
<span id="cb30-5"><a href="creating-corpus.html#cb30-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">content =</span> article.content,</span>
<span id="cb30-6"><a href="creating-corpus.html#cb30-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">url =</span> article.url</span>
<span id="cb30-7"><a href="creating-corpus.html#cb30-7" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb30-8"><a href="creating-corpus.html#cb30-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-9"><a href="creating-corpus.html#cb30-9" aria-hidden="true" tabindex="-1"></a>article.table</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["datetime"],"name":[1],"type":["chr"],"align":["left"]},{"label":["title"],"name":[2],"type":["chr"],"align":["left"]},{"label":["author"],"name":[3],"type":["chr"],"align":["left"]},{"label":["content"],"name":[4],"type":["chr"],"align":["left"]},{"label":["url"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"Thu May 19 18:29:32 2022","2":"[問卦] 如何用一句話違停讓警察不開單","3":"poonebetty","4":"我阿肥啦\\n台北難停車\\n一不小心紅線違停\\n被警察開單\\n如何用一句話讓警察不開阿肥的單\\n有嗎\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956174.A.D67.html"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<ul>
<li>Next we extract the push comments at the end of the article</li>
</ul>
<div class="sourceCode" id="cb31"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb31-1"><a href="creating-corpus.html#cb31-1" aria-hidden="true" tabindex="-1"></a>article.push <span class="ot">&lt;-</span> temp.html <span class="sc">%&gt;%</span> </span>
<span id="cb31-2"><a href="creating-corpus.html#cb31-2" aria-hidden="true" tabindex="-1"></a>        <span class="fu">html_nodes</span>(<span class="at">xpath =</span> <span class="st">&quot;//div[@class = &#39;push&#39;]&quot;</span>)</span>
<span id="cb31-3"><a href="creating-corpus.html#cb31-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-4"><a href="creating-corpus.html#cb31-4" aria-hidden="true" tabindex="-1"></a>article.push</span></code></pre></div>
<pre class="Rout"><code>{xml_nodeset (13)}
 [1] &lt;div class=&quot;push&quot;&gt;\n&lt;span class=&quot;hl push-tag&quot;&gt;推 &lt;/span&gt;&lt;span class=&quot;f3 h ...
 [2] &lt;div class=&quot;push&quot;&gt;\n&lt;span class=&quot;hl push-tag&quot;&gt;推 &lt;/span&gt;&lt;span class=&quot;f3 h ...
 [3] &lt;div class=&quot;push&quot;&gt;\n&lt;span class=&quot;f1 hl push-tag&quot;&gt;→ &lt;/span&gt;&lt;span class=&quot;f ...
 [4] &lt;div class=&quot;push&quot;&gt;\n&lt;span class=&quot;f1 hl push-tag&quot;&gt;→ &lt;/span&gt;&lt;span class=&quot;f ...
 [5] &lt;div class=&quot;push&quot;&gt;\n&lt;span class=&quot;hl push-tag&quot;&gt;推 &lt;/span&gt;&lt;span class=&quot;f3 h ...
 [6] &lt;div class=&quot;push&quot;&gt;\n&lt;span class=&quot;f1 hl push-tag&quot;&gt;→ &lt;/span&gt;&lt;span class=&quot;f ...
 [7] &lt;div class=&quot;push&quot;&gt;\n&lt;span class=&quot;f1 hl push-tag&quot;&gt;→ &lt;/span&gt;&lt;span class=&quot;f ...
 [8] &lt;div class=&quot;push&quot;&gt;\n&lt;span class=&quot;f1 hl push-tag&quot;&gt;→ &lt;/span&gt;&lt;span class=&quot;f ...
 [9] &lt;div class=&quot;push&quot;&gt;\n&lt;span class=&quot;hl push-tag&quot;&gt;推 &lt;/span&gt;&lt;span class=&quot;f3 h ...
[10] &lt;div class=&quot;push&quot;&gt;\n&lt;span class=&quot;f1 hl push-tag&quot;&gt;→ &lt;/span&gt;&lt;span class=&quot;f ...
[11] &lt;div class=&quot;push&quot;&gt;\n&lt;span class=&quot;hl push-tag&quot;&gt;推 &lt;/span&gt;&lt;span class=&quot;f3 h ...
[12] &lt;div class=&quot;push&quot;&gt;\n&lt;span class=&quot;f1 hl push-tag&quot;&gt;→ &lt;/span&gt;&lt;span class=&quot;f ...
[13] &lt;div class=&quot;push&quot;&gt;\n&lt;span class=&quot;hl push-tag&quot;&gt;推 &lt;/span&gt;&lt;span class=&quot;f3 h ...</code></pre>
<ul>
<li><p>We then extract relevant information from each push nodes <code>article.push</code>.</p>
<ul>
<li>push types</li>
<li>push authors</li>
<li>push contents</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb33"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb33-1"><a href="creating-corpus.html#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># push tags</span></span>
<span id="cb33-2"><a href="creating-corpus.html#cb33-2" aria-hidden="true" tabindex="-1"></a>push.table.tag <span class="ot">&lt;-</span> article.push <span class="sc">%&gt;%</span> </span>
<span id="cb33-3"><a href="creating-corpus.html#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="st">&quot;span.push-tag&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb33-4"><a href="creating-corpus.html#cb33-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>) <span class="co"># push types (like or dislike)</span></span>
<span id="cb33-5"><a href="creating-corpus.html#cb33-5" aria-hidden="true" tabindex="-1"></a>push.table.tag</span></code></pre></div>
<pre class="Rout"><code> [1] &quot;推&quot; &quot;推&quot; &quot;→&quot;  &quot;→&quot;  &quot;推&quot; &quot;→&quot;  &quot;→&quot;  &quot;→&quot;  &quot;推&quot; &quot;→&quot;  &quot;推&quot; &quot;→&quot;  &quot;推&quot;</code></pre>
<div class="sourceCode" id="cb35"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb35-1"><a href="creating-corpus.html#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># push authors</span></span>
<span id="cb35-2"><a href="creating-corpus.html#cb35-2" aria-hidden="true" tabindex="-1"></a>push.table.author <span class="ot">&lt;-</span> article.push <span class="sc">%&gt;%</span> </span>
<span id="cb35-3"><a href="creating-corpus.html#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="st">&quot;span.push-userid&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb35-4"><a href="creating-corpus.html#cb35-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>) <span class="co"># author</span></span>
<span id="cb35-5"><a href="creating-corpus.html#cb35-5" aria-hidden="true" tabindex="-1"></a>push.table.author</span></code></pre></div>
<pre class="Rout"><code> [1] &quot;Gandalf&quot;     &quot;frommr&quot;      &quot;brianuser&quot;   &quot;benptt&quot;      &quot;qa1122z&quot;    
 [6] &quot;luche&quot;       &quot;avgirl&quot;      &quot;milkyway168&quot; &quot;avexgroup&quot;   &quot;S2aqua&quot;     
[11] &quot;luna2000sea&quot; &quot;nautasechs&quot;  &quot;booth&quot;      </code></pre>
<div class="sourceCode" id="cb37"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb37-1"><a href="creating-corpus.html#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># push contents</span></span>
<span id="cb37-2"><a href="creating-corpus.html#cb37-2" aria-hidden="true" tabindex="-1"></a>push.table.content <span class="ot">&lt;-</span> article.push <span class="sc">%&gt;%</span> </span>
<span id="cb37-3"><a href="creating-corpus.html#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="st">&quot;span.push-content&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb37-4"><a href="creating-corpus.html#cb37-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>)</span>
<span id="cb37-5"><a href="creating-corpus.html#cb37-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-6"><a href="creating-corpus.html#cb37-6" aria-hidden="true" tabindex="-1"></a>push.table.content</span></code></pre></div>
<pre class="Rout"><code> [1] &quot;: 我爸是&quot;                          &quot;: 我pcr陽性&quot;                      
 [3] &quot;: 我媽蔡英文&quot;                      &quot;: may show gun more?&quot;             
 [5] &quot;: 馬上開走不會逆&quot;                  &quot;: 便衣學長&quot;                       
 [7] &quot;: 一開始不是勸導嗎?  這就是密語&quot;   &quot;: 我輸不起&quot;                       
 [9] &quot;: 我爸喬王&quot;                        &quot;: 我議座助理 議員大人等下就出來了&quot;
[11] &quot;: 好大的官威&quot;                      &quot;: 你勸導了沒（遞身分證）&quot;         
[13] &quot;: 拿出愛滋毒甲證明&quot;               </code></pre>
<div class="sourceCode" id="cb39"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb39-1"><a href="creating-corpus.html#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># push time</span></span>
<span id="cb39-2"><a href="creating-corpus.html#cb39-2" aria-hidden="true" tabindex="-1"></a>push.table.datetime <span class="ot">&lt;-</span> article.push <span class="sc">%&gt;%</span> </span>
<span id="cb39-3"><a href="creating-corpus.html#cb39-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="st">&quot;span.push-ipdatetime&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb39-4"><a href="creating-corpus.html#cb39-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>) <span class="co"># push time stamp</span></span>
<span id="cb39-5"><a href="creating-corpus.html#cb39-5" aria-hidden="true" tabindex="-1"></a>push.table.datetime</span></code></pre></div>
<pre class="Rout"><code> [1] &quot;130.88.226.13 05/19 18:29&quot;   &quot;27.53.145.28 05/19 18:29&quot;   
 [3] &quot;1.172.212.74 05/19 18:29&quot;    &quot;123.192.83.126 05/19 18:30&quot; 
 [5] &quot;223.141.26.31 05/19 18:30&quot;   &quot;1.200.254.72 05/19 18:30&quot;   
 [7] &quot;36.230.111.250 05/19 18:30&quot;  &quot;27.51.120.131 05/19 18:30&quot;  
 [9] &quot;49.216.224.24 05/19 18:32&quot;   &quot;1.200.1.240 05/19 18:33&quot;    
[11] &quot;223.136.162.214 05/19 18:34&quot; &quot;27.247.127.9 05/19 18:35&quot;   
[13] &quot;42.73.58.157 05/19 18:38&quot;   </code></pre>
<ul>
<li>Finally, we combine all into one Push data frame.</li>
</ul>
<div class="sourceCode" id="cb41"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb41-1"><a href="creating-corpus.html#cb41-1" aria-hidden="true" tabindex="-1"></a>push.table <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb41-2"><a href="creating-corpus.html#cb41-2" aria-hidden="true" tabindex="-1"></a>      <span class="at">tag =</span> push.table.tag,</span>
<span id="cb41-3"><a href="creating-corpus.html#cb41-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">author =</span> push.table.author,</span>
<span id="cb41-4"><a href="creating-corpus.html#cb41-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">content =</span> push.table.content,</span>
<span id="cb41-5"><a href="creating-corpus.html#cb41-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">datetime =</span> push.table.datetime,</span>
<span id="cb41-6"><a href="creating-corpus.html#cb41-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">url =</span> article.url)</span>
<span id="cb41-7"><a href="creating-corpus.html#cb41-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-8"><a href="creating-corpus.html#cb41-8" aria-hidden="true" tabindex="-1"></a>push.table</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["tag"],"name":[1],"type":["chr"],"align":["left"]},{"label":["author"],"name":[2],"type":["chr"],"align":["left"]},{"label":["content"],"name":[3],"type":["chr"],"align":["left"]},{"label":["datetime"],"name":[4],"type":["chr"],"align":["left"]},{"label":["url"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"推","2":"Gandalf","3":": 我爸是","4":"130.88.226.13 05/19 18:29","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956174.A.D67.html"},{"1":"推","2":"frommr","3":": 我pcr陽性","4":"27.53.145.28 05/19 18:29","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956174.A.D67.html"},{"1":"→","2":"brianuser","3":": 我媽蔡英文","4":"1.172.212.74 05/19 18:29","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956174.A.D67.html"},{"1":"→","2":"benptt","3":": may show gun more?","4":"123.192.83.126 05/19 18:30","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956174.A.D67.html"},{"1":"推","2":"qa1122z","3":": 馬上開走不會逆","4":"223.141.26.31 05/19 18:30","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956174.A.D67.html"},{"1":"→","2":"luche","3":": 便衣學長","4":"1.200.254.72 05/19 18:30","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956174.A.D67.html"},{"1":"→","2":"avgirl","3":": 一開始不是勸導嗎?  這就是密語","4":"36.230.111.250 05/19 18:30","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956174.A.D67.html"},{"1":"→","2":"milkyway168","3":": 我輸不起","4":"27.51.120.131 05/19 18:30","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956174.A.D67.html"},{"1":"推","2":"avexgroup","3":": 我爸喬王","4":"49.216.224.24 05/19 18:32","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956174.A.D67.html"},{"1":"→","2":"S2aqua","3":": 我議座助理 議員大人等下就出來了","4":"1.200.1.240 05/19 18:33","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956174.A.D67.html"},{"1":"推","2":"luna2000sea","3":": 好大的官威","4":"223.136.162.214 05/19 18:34","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956174.A.D67.html"},{"1":"→","2":"nautasechs","3":": 你勸導了沒（遞身分證）","4":"27.247.127.9 05/19 18:35","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956174.A.D67.html"},{"1":"推","2":"booth","3":": 拿出愛滋毒甲證明","4":"42.73.58.157 05/19 18:38","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956174.A.D67.html"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div id="functional-programming" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> Functional Programming</h2>
<p>It should now be clear that there are several routines that we need to do again and again if we want to collect text data in large amounts:</p>
<ul>
<li>For each index page, we need to extract all the article hyperlinks of the page.</li>
<li>For each article hyperlink, we need to extract the article content, metadata, and the push comments.</li>
</ul>
<p>So, it would be great if we can wrap these two routines into two functions.</p>
<div id="extract_art_links" class="section level3" number="3.3.1">
<h3><span class="header-section-number">3.3.1</span> <code>extract_art_links()</code></h3>
<ul>
<li><code>extract_art_links()</code>: This function takes an HTML session <code>session</code> and an index page of the PTT Gossiping <code>index_page</code> as the arguments and extract all article links from the index page. It returns a vector of article links.</li>
</ul>
<div class="sourceCode" id="cb42"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb42-1"><a href="creating-corpus.html#cb42-1" aria-hidden="true" tabindex="-1"></a>extract_art_links <span class="ot">&lt;-</span> <span class="cf">function</span>(index_page, session){</span>
<span id="cb42-2"><a href="creating-corpus.html#cb42-2" aria-hidden="true" tabindex="-1"></a>  links.article <span class="ot">&lt;-</span> session <span class="sc">%&gt;%</span></span>
<span id="cb42-3"><a href="creating-corpus.html#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">session_jump_to</span>(index_page) <span class="sc">%&gt;%</span></span>
<span id="cb42-4"><a href="creating-corpus.html#cb42-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="st">&quot;a&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb42-5"><a href="creating-corpus.html#cb42-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_attr</span>(<span class="st">&quot;href&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb42-6"><a href="creating-corpus.html#cb42-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_subset</span>(<span class="st">&quot;[A-z]</span><span class="sc">\\</span><span class="st">.[0-9]+</span><span class="sc">\\</span><span class="st">.[A-z]</span><span class="sc">\\</span><span class="st">.[A-z0-9]+</span><span class="sc">\\</span><span class="st">.html&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb42-7"><a href="creating-corpus.html#cb42-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_c</span>(<span class="st">&quot;https://www.ptt.cc&quot;</span>,.)</span>
<span id="cb42-8"><a href="creating-corpus.html#cb42-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-9"><a href="creating-corpus.html#cb42-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(links.article)</span>
<span id="cb42-10"><a href="creating-corpus.html#cb42-10" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>For example, we can extract all the article links from the most recent index page:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb43-1"><a href="creating-corpus.html#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get index page</span></span>
<span id="cb43-2"><a href="creating-corpus.html#cb43-2" aria-hidden="true" tabindex="-1"></a>cur_index_page <span class="ot">&lt;-</span> <span class="fu">str_c</span>(ptt.url, <span class="st">&quot;/index&quot;</span>, page.latest, <span class="st">&quot;.html&quot;</span>)</span>
<span id="cb43-3"><a href="creating-corpus.html#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Get all article links from the most recent index page</span></span>
<span id="cb43-4"><a href="creating-corpus.html#cb43-4" aria-hidden="true" tabindex="-1"></a>cur_art_links <span class="ot">&lt;-</span><span class="fu">extract_art_links</span>(cur_index_page, gossiping)</span>
<span id="cb43-5"><a href="creating-corpus.html#cb43-5" aria-hidden="true" tabindex="-1"></a>cur_art_links</span></code></pre></div>
<pre class="Rout"><code> [1] &quot;https://www.ptt.cc/bbs/Gossiping/M.1652956174.A.D67.html&quot;
 [2] &quot;https://www.ptt.cc/bbs/Gossiping/M.1652956180.A.2E9.html&quot;
 [3] &quot;https://www.ptt.cc/bbs/Gossiping/M.1652956194.A.DFA.html&quot;
 [4] &quot;https://www.ptt.cc/bbs/Gossiping/M.1652956242.A.224.html&quot;
 [5] &quot;https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html&quot;
 [6] &quot;https://www.ptt.cc/bbs/Gossiping/M.1652956253.A.C9E.html&quot;
 [7] &quot;https://www.ptt.cc/bbs/Gossiping/M.1652956317.A.A97.html&quot;
 [8] &quot;https://www.ptt.cc/bbs/Gossiping/M.1652956327.A.031.html&quot;
 [9] &quot;https://www.ptt.cc/bbs/Gossiping/M.1652956415.A.79F.html&quot;
[10] &quot;https://www.ptt.cc/bbs/Gossiping/M.1652956424.A.5E1.html&quot;
[11] &quot;https://www.ptt.cc/bbs/Gossiping/M.1652956448.A.E46.html&quot;
[12] &quot;https://www.ptt.cc/bbs/Gossiping/M.1652956530.A.4C6.html&quot;
[13] &quot;https://www.ptt.cc/bbs/Gossiping/M.1652956545.A.929.html&quot;
[14] &quot;https://www.ptt.cc/bbs/Gossiping/M.1652956583.A.D7C.html&quot;
[15] &quot;https://www.ptt.cc/bbs/Gossiping/M.1652956626.A.691.html&quot;
[16] &quot;https://www.ptt.cc/bbs/Gossiping/M.1652956651.A.8B3.html&quot;
[17] &quot;https://www.ptt.cc/bbs/Gossiping/M.1652956658.A.A00.html&quot;
[18] &quot;https://www.ptt.cc/bbs/Gossiping/M.1652956668.A.E49.html&quot;
[19] &quot;https://www.ptt.cc/bbs/Gossiping/M.1652956676.A.578.html&quot;
[20] &quot;https://www.ptt.cc/bbs/Gossiping/M.1652956753.A.D69.html&quot;</code></pre>
</div>
<div id="extract_article_push_tables" class="section level3" number="3.3.2">
<h3><span class="header-section-number">3.3.2</span> <code>extract_article_push_tables()</code></h3>
<ul>
<li><code>extract_article_push_tables()</code>: This function takes an article link <code>link</code> as the argument and extracts the metadata, textual contents, and pushes of the article. It returns a <em>list</em> of two elements—article and push data frames.</li>
</ul>
<div class="sourceCode" id="cb45"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb45-1"><a href="creating-corpus.html#cb45-1" aria-hidden="true" tabindex="-1"></a>extract_article_push_tables <span class="ot">&lt;-</span> <span class="cf">function</span>(link){</span>
<span id="cb45-2"><a href="creating-corpus.html#cb45-2" aria-hidden="true" tabindex="-1"></a>  article.url <span class="ot">&lt;-</span> link</span>
<span id="cb45-3"><a href="creating-corpus.html#cb45-3" aria-hidden="true" tabindex="-1"></a>  temp.html <span class="ot">&lt;-</span> gossiping <span class="sc">%&gt;%</span> <span class="fu">session_jump_to</span>(article.url) <span class="co"># link to the www</span></span>
<span id="cb45-4"><a href="creating-corpus.html#cb45-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># article header</span></span>
<span id="cb45-5"><a href="creating-corpus.html#cb45-5" aria-hidden="true" tabindex="-1"></a>  article.header <span class="ot">&lt;-</span> temp.html <span class="sc">%&gt;%</span></span>
<span id="cb45-6"><a href="creating-corpus.html#cb45-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_nodes</span>(<span class="st">&quot;span.article-meta-value&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># meta info regarding the article</span></span>
<span id="cb45-7"><a href="creating-corpus.html#cb45-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_text</span>()</span>
<span id="cb45-8"><a href="creating-corpus.html#cb45-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb45-9"><a href="creating-corpus.html#cb45-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># article meta</span></span>
<span id="cb45-10"><a href="creating-corpus.html#cb45-10" aria-hidden="true" tabindex="-1"></a>  article.author <span class="ot">&lt;-</span> article.header[<span class="dv">1</span>] <span class="sc">%&gt;%</span> <span class="fu">str_extract</span>(<span class="st">&quot;^[A-z0-9_]+&quot;</span>) <span class="co"># athuor</span></span>
<span id="cb45-11"><a href="creating-corpus.html#cb45-11" aria-hidden="true" tabindex="-1"></a>  article.title <span class="ot">&lt;-</span> article.header[<span class="dv">3</span>] <span class="co"># title</span></span>
<span id="cb45-12"><a href="creating-corpus.html#cb45-12" aria-hidden="true" tabindex="-1"></a>  article.datetime <span class="ot">&lt;-</span> article.header[<span class="dv">4</span>] <span class="co"># time stamp</span></span>
<span id="cb45-13"><a href="creating-corpus.html#cb45-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb45-14"><a href="creating-corpus.html#cb45-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># article content</span></span>
<span id="cb45-15"><a href="creating-corpus.html#cb45-15" aria-hidden="true" tabindex="-1"></a>  article.content <span class="ot">&lt;-</span> temp.html <span class="sc">%&gt;%</span></span>
<span id="cb45-16"><a href="creating-corpus.html#cb45-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_nodes</span>( <span class="co"># article body</span></span>
<span id="cb45-17"><a href="creating-corpus.html#cb45-17" aria-hidden="true" tabindex="-1"></a>      <span class="at">xpath =</span> <span class="st">&#39;//div[@id=&quot;main-content&quot;]/node()[not(self::div|self::span[@class=&quot;f2&quot;])]&#39;</span></span>
<span id="cb45-18"><a href="creating-corpus.html#cb45-18" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb45-19"><a href="creating-corpus.html#cb45-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb45-20"><a href="creating-corpus.html#cb45-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_c</span>(<span class="at">collapse =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb45-21"><a href="creating-corpus.html#cb45-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb45-22"><a href="creating-corpus.html#cb45-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Merge article table </span></span>
<span id="cb45-23"><a href="creating-corpus.html#cb45-23" aria-hidden="true" tabindex="-1"></a>  article.table <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb45-24"><a href="creating-corpus.html#cb45-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">datetime =</span> article.datetime,</span>
<span id="cb45-25"><a href="creating-corpus.html#cb45-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> article.title,</span>
<span id="cb45-26"><a href="creating-corpus.html#cb45-26" aria-hidden="true" tabindex="-1"></a>        <span class="at">author =</span> article.author,</span>
<span id="cb45-27"><a href="creating-corpus.html#cb45-27" aria-hidden="true" tabindex="-1"></a>        <span class="at">content =</span> article.content,</span>
<span id="cb45-28"><a href="creating-corpus.html#cb45-28" aria-hidden="true" tabindex="-1"></a>        <span class="at">url =</span> article.url</span>
<span id="cb45-29"><a href="creating-corpus.html#cb45-29" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb45-30"><a href="creating-corpus.html#cb45-30" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb45-31"><a href="creating-corpus.html#cb45-31" aria-hidden="true" tabindex="-1"></a>  <span class="co"># push nodes</span></span>
<span id="cb45-32"><a href="creating-corpus.html#cb45-32" aria-hidden="true" tabindex="-1"></a>  article.push <span class="ot">&lt;-</span> temp.html <span class="sc">%&gt;%</span> </span>
<span id="cb45-33"><a href="creating-corpus.html#cb45-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_nodes</span>(<span class="at">xpath =</span> <span class="st">&quot;//div[@class = &#39;push&#39;]&quot;</span>) <span class="co"># extracting pushes</span></span>
<span id="cb45-34"><a href="creating-corpus.html#cb45-34" aria-hidden="true" tabindex="-1"></a>    <span class="co"># </span><span class="al">NOTE</span><span class="co">: If CSS is used, div.push does a lazy match (extracting div.push.... also)</span></span>
<span id="cb45-35"><a href="creating-corpus.html#cb45-35" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb45-36"><a href="creating-corpus.html#cb45-36" aria-hidden="true" tabindex="-1"></a>  <span class="co"># push tags    </span></span>
<span id="cb45-37"><a href="creating-corpus.html#cb45-37" aria-hidden="true" tabindex="-1"></a>  push.table.tag <span class="ot">&lt;-</span> article.push <span class="sc">%&gt;%</span> </span>
<span id="cb45-38"><a href="creating-corpus.html#cb45-38" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_nodes</span>(<span class="st">&quot;span.push-tag&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb45-39"><a href="creating-corpus.html#cb45-39" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>) <span class="co"># push types (like or dislike)</span></span>
<span id="cb45-40"><a href="creating-corpus.html#cb45-40" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb45-41"><a href="creating-corpus.html#cb45-41" aria-hidden="true" tabindex="-1"></a>  <span class="co"># push author id</span></span>
<span id="cb45-42"><a href="creating-corpus.html#cb45-42" aria-hidden="true" tabindex="-1"></a>  push.table.author <span class="ot">&lt;-</span> article.push <span class="sc">%&gt;%</span> </span>
<span id="cb45-43"><a href="creating-corpus.html#cb45-43" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_nodes</span>(<span class="st">&quot;span.push-userid&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb45-44"><a href="creating-corpus.html#cb45-44" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>) <span class="co"># author</span></span>
<span id="cb45-45"><a href="creating-corpus.html#cb45-45" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb45-46"><a href="creating-corpus.html#cb45-46" aria-hidden="true" tabindex="-1"></a>  <span class="co"># push content    </span></span>
<span id="cb45-47"><a href="creating-corpus.html#cb45-47" aria-hidden="true" tabindex="-1"></a>  push.table.content <span class="ot">&lt;-</span> article.push <span class="sc">%&gt;%</span> </span>
<span id="cb45-48"><a href="creating-corpus.html#cb45-48" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_nodes</span>(<span class="st">&quot;span.push-content&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb45-49"><a href="creating-corpus.html#cb45-49" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>)</span>
<span id="cb45-50"><a href="creating-corpus.html#cb45-50" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb45-51"><a href="creating-corpus.html#cb45-51" aria-hidden="true" tabindex="-1"></a>  <span class="co"># push datetime      </span></span>
<span id="cb45-52"><a href="creating-corpus.html#cb45-52" aria-hidden="true" tabindex="-1"></a>  push.table.datetime <span class="ot">&lt;-</span> article.push <span class="sc">%&gt;%</span> </span>
<span id="cb45-53"><a href="creating-corpus.html#cb45-53" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_nodes</span>(<span class="st">&quot;span.push-ipdatetime&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb45-54"><a href="creating-corpus.html#cb45-54" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>) <span class="co"># push time stamp</span></span>
<span id="cb45-55"><a href="creating-corpus.html#cb45-55" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb45-56"><a href="creating-corpus.html#cb45-56" aria-hidden="true" tabindex="-1"></a>  <span class="co"># merge push table</span></span>
<span id="cb45-57"><a href="creating-corpus.html#cb45-57" aria-hidden="true" tabindex="-1"></a>  push.table <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb45-58"><a href="creating-corpus.html#cb45-58" aria-hidden="true" tabindex="-1"></a>          <span class="at">tag =</span> push.table.tag,</span>
<span id="cb45-59"><a href="creating-corpus.html#cb45-59" aria-hidden="true" tabindex="-1"></a>          <span class="at">author =</span> push.table.author,</span>
<span id="cb45-60"><a href="creating-corpus.html#cb45-60" aria-hidden="true" tabindex="-1"></a>          <span class="at">content =</span> push.table.content,</span>
<span id="cb45-61"><a href="creating-corpus.html#cb45-61" aria-hidden="true" tabindex="-1"></a>          <span class="at">datetime =</span> push.table.datetime,</span>
<span id="cb45-62"><a href="creating-corpus.html#cb45-62" aria-hidden="true" tabindex="-1"></a>          <span class="at">url =</span> article.url</span>
<span id="cb45-63"><a href="creating-corpus.html#cb45-63" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb45-64"><a href="creating-corpus.html#cb45-64" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb45-65"><a href="creating-corpus.html#cb45-65" aria-hidden="true" tabindex="-1"></a>  <span class="co"># return</span></span>
<span id="cb45-66"><a href="creating-corpus.html#cb45-66" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb45-67"><a href="creating-corpus.html#cb45-67" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">list</span>(<span class="at">article.table =</span> article.table, </span>
<span id="cb45-68"><a href="creating-corpus.html#cb45-68" aria-hidden="true" tabindex="-1"></a>              <span class="at">push.table =</span> push.table))</span>
<span id="cb45-69"><a href="creating-corpus.html#cb45-69" aria-hidden="true" tabindex="-1"></a>}<span class="co">#endfunc</span></span></code></pre></div>
<p>For example, we can get the <code>article</code> and <code>push</code> tables from the first article link:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb46-1"><a href="creating-corpus.html#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">extract_article_push_tables</span>(cur_art_links[<span class="dv">1</span>])</span></code></pre></div>
<pre class="Rout"><code>$article.table
# A tibble: 1 × 5
  datetime                 title        author  content            url          
  &lt;chr&gt;                    &lt;chr&gt;        &lt;chr&gt;   &lt;chr&gt;              &lt;chr&gt;        
1 Thu May 19 18:29:32 2022 [問卦] 如何… pooneb… &quot;我阿肥啦\n台北難… https://www.…

$push.table
# A tibble: 13 × 5
   tag   author      content                           datetime    url          
   &lt;chr&gt; &lt;chr&gt;       &lt;chr&gt;                             &lt;chr&gt;       &lt;chr&gt;        
 1 推    Gandalf     : 我爸是                          130.88.226… https://www.…
 2 推    frommr      : 我pcr陽性                       27.53.145.… https://www.…
 3 →     brianuser   : 我媽蔡英文                      1.172.212.… https://www.…
 4 →     benptt      : may show gun more?              123.192.83… https://www.…
 5 推    qa1122z     : 馬上開走不會逆                  223.141.26… https://www.…
 6 →     luche       : 便衣學長                        1.200.254.… https://www.…
 7 →     avgirl      : 一開始不是勸導嗎?  這就是密語   36.230.111… https://www.…
 8 →     milkyway168 : 我輸不起                        27.51.120.… https://www.…
 9 推    avexgroup   : 我爸喬王                        49.216.224… https://www.…
10 →     S2aqua      : 我議座助理 議員大人等下就出來了 1.200.1.24… https://www.…
11 推    luna2000sea : 好大的官威                      223.136.16… https://www.…
12 →     nautasechs  : 你勸導了沒（遞身分證）          27.247.127… https://www.…
13 推    booth       : 拿出愛滋毒甲證明                42.73.58.1… https://www.…</code></pre>
</div>
<div id="streamline-the-codes" class="section level3" number="3.3.3">
<h3><span class="header-section-number">3.3.3</span> Streamline the Codes</h3>
<p>Now we can simplify our codes quite a bit:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb48-1"><a href="creating-corpus.html#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get index page</span></span>
<span id="cb48-2"><a href="creating-corpus.html#cb48-2" aria-hidden="true" tabindex="-1"></a>cur_index_page <span class="ot">&lt;-</span> <span class="fu">str_c</span>(ptt.url, <span class="st">&quot;/index&quot;</span>, page.latest, <span class="st">&quot;.html&quot;</span>)</span>
<span id="cb48-3"><a href="creating-corpus.html#cb48-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-4"><a href="creating-corpus.html#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Scrape all article.tables and push.tables from each article hyperlink</span></span>
<span id="cb48-5"><a href="creating-corpus.html#cb48-5" aria-hidden="true" tabindex="-1"></a>cur_index_page <span class="sc">%&gt;%</span></span>
<span id="cb48-6"><a href="creating-corpus.html#cb48-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">extract_art_links</span>(<span class="at">session =</span> gossiping) <span class="sc">%&gt;%</span></span>
<span id="cb48-7"><a href="creating-corpus.html#cb48-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(extract_article_push_tables) <span class="ot">-&gt;</span> ptt_data</span></code></pre></div>
<div class="sourceCode" id="cb49"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb49-1"><a href="creating-corpus.html#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># number of articles on this index page</span></span>
<span id="cb49-2"><a href="creating-corpus.html#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(ptt_data)</span></code></pre></div>
<pre class="Rout"><code>[1] 20</code></pre>
<div class="sourceCode" id="cb51"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb51-1"><a href="creating-corpus.html#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check the first contents of 1st hyperlink</span></span>
<span id="cb51-2"><a href="creating-corpus.html#cb51-2" aria-hidden="true" tabindex="-1"></a>ptt_data[[<span class="dv">1</span>]]<span class="sc">$</span>article.table</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["datetime"],"name":[1],"type":["chr"],"align":["left"]},{"label":["title"],"name":[2],"type":["chr"],"align":["left"]},{"label":["author"],"name":[3],"type":["chr"],"align":["left"]},{"label":["content"],"name":[4],"type":["chr"],"align":["left"]},{"label":["url"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"Thu May 19 18:29:32 2022","2":"[問卦] 如何用一句話違停讓警察不開單","3":"poonebetty","4":"我阿肥啦\\n台北難停車\\n一不小心紅線違停\\n被警察開單\\n如何用一句話讓警察不開阿肥的單\\n有嗎\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956174.A.D67.html"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="sourceCode" id="cb52"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb52-1"><a href="creating-corpus.html#cb52-1" aria-hidden="true" tabindex="-1"></a>ptt_data[[<span class="dv">1</span>]]<span class="sc">$</span>push.table</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["tag"],"name":[1],"type":["chr"],"align":["left"]},{"label":["author"],"name":[2],"type":["chr"],"align":["left"]},{"label":["content"],"name":[3],"type":["chr"],"align":["left"]},{"label":["datetime"],"name":[4],"type":["chr"],"align":["left"]},{"label":["url"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"推","2":"Gandalf","3":": 我爸是","4":"130.88.226.13 05/19 18:29","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956174.A.D67.html"},{"1":"推","2":"frommr","3":": 我pcr陽性","4":"27.53.145.28 05/19 18:29","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956174.A.D67.html"},{"1":"→","2":"brianuser","3":": 我媽蔡英文","4":"1.172.212.74 05/19 18:29","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956174.A.D67.html"},{"1":"→","2":"benptt","3":": may show gun more?","4":"123.192.83.126 05/19 18:30","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956174.A.D67.html"},{"1":"推","2":"qa1122z","3":": 馬上開走不會逆","4":"223.141.26.31 05/19 18:30","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956174.A.D67.html"},{"1":"→","2":"luche","3":": 便衣學長","4":"1.200.254.72 05/19 18:30","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956174.A.D67.html"},{"1":"→","2":"avgirl","3":": 一開始不是勸導嗎?  這就是密語","4":"36.230.111.250 05/19 18:30","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956174.A.D67.html"},{"1":"→","2":"milkyway168","3":": 我輸不起","4":"27.51.120.131 05/19 18:30","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956174.A.D67.html"},{"1":"推","2":"avexgroup","3":": 我爸喬王","4":"49.216.224.24 05/19 18:32","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956174.A.D67.html"},{"1":"→","2":"S2aqua","3":": 我議座助理 議員大人等下就出來了","4":"1.200.1.240 05/19 18:33","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956174.A.D67.html"},{"1":"推","2":"luna2000sea","3":": 好大的官威","4":"223.136.162.214 05/19 18:34","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956174.A.D67.html"},{"1":"→","2":"nautasechs","3":": 你勸導了沒（遞身分證）","4":"27.247.127.9 05/19 18:35","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956174.A.D67.html"},{"1":"推","2":"booth","3":": 拿出愛滋毒甲證明","4":"42.73.58.157 05/19 18:38","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956174.A.D67.html"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<ul>
<li>Finally, the last thing we can do is to combine all article tables from each index page into one; and all push tables into one for later analysis.</li>
</ul>
<div class="sourceCode" id="cb53"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb53-1"><a href="creating-corpus.html#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge all article.tables into one</span></span>
<span id="cb53-2"><a href="creating-corpus.html#cb53-2" aria-hidden="true" tabindex="-1"></a>article.table.all <span class="ot">&lt;-</span> ptt_data <span class="sc">%&gt;%</span> </span>
<span id="cb53-3"><a href="creating-corpus.html#cb53-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="cf">function</span>(x) x<span class="sc">$</span>article.table) <span class="sc">%&gt;%</span></span>
<span id="cb53-4"><a href="creating-corpus.html#cb53-4" aria-hidden="true" tabindex="-1"></a>  bind_rows</span>
<span id="cb53-5"><a href="creating-corpus.html#cb53-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-6"><a href="creating-corpus.html#cb53-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge all push.tables into one</span></span>
<span id="cb53-7"><a href="creating-corpus.html#cb53-7" aria-hidden="true" tabindex="-1"></a>push.table.all <span class="ot">&lt;-</span> ptt_data <span class="sc">%&gt;%</span></span>
<span id="cb53-8"><a href="creating-corpus.html#cb53-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="cf">function</span>(x) x<span class="sc">$</span>push.table) <span class="sc">%&gt;%</span></span>
<span id="cb53-9"><a href="creating-corpus.html#cb53-9" aria-hidden="true" tabindex="-1"></a>  bind_rows</span>
<span id="cb53-10"><a href="creating-corpus.html#cb53-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-11"><a href="creating-corpus.html#cb53-11" aria-hidden="true" tabindex="-1"></a>article.table.all</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["datetime"],"name":[1],"type":["chr"],"align":["left"]},{"label":["title"],"name":[2],"type":["chr"],"align":["left"]},{"label":["author"],"name":[3],"type":["chr"],"align":["left"]},{"label":["content"],"name":[4],"type":["chr"],"align":["left"]},{"label":["url"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"Thu May 19 18:29:32 2022","2":"[問卦] 如何用一句話違停讓警察不開單","3":"poonebetty","4":"我阿肥啦\\n台北難停車\\n一不小心紅線違停\\n被警察開單\\n如何用一句話讓警察不開阿肥的單\\n有嗎\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956174.A.D67.html"},{"1":"Thu May 19 18:29:38 2022","2":"[問卦] 確診是遲早的事了吧？","3":"YiGangYiTiao","4":"周圍熟識的親戚 親戚小孩\\n好友 好友小孩\\n同事 同事小孩\\n\\n都開始陸續有人確診\\n\\n現在也沒有什麼認真的防疫配套措施\\n是不是確診就早或晚的事\\n\\n有沒有八卦？\\n\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956180.A.2E9.html"},{"1":"Thu May 19 18:29:52 2022","2":"Re: [爆卦] 北市徐巧芯議員違停不給開單 (當事人回應)","3":"violetking","4":"我覺得密錄器應該要公開，\\n\\n然後新聞台24小時輪播，政論節目在請個行為專家。\\n\\n\\n分析徐巧芯的聲調是否帶有威脅，這應該可以賺不少流量。\\n\\n\\n還可以請小員警上節目，好好敘述自己當時如何被威脅，\\n為了對抗萬惡的議員，執政黨可以支持員警年底跟徐巧芯在同一選區競爭。\\n\\n\\n\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956194.A.DFA.html"},{"1":"Thu May 19 18:30:40 2022","2":"Re: [爆卦] 北市徐巧芯議員違停不給開單","3":"theskyofblue","4":": https://i.imgur.com/QxEaPjn.jpeg: 本魯朋友在台北市當警察: 今天下午雨很大 徐大議員的車直接紅線違停: 正巧被辛苦巡邏的員警看到: 不是檢舉 是直接看見: 要開單的時候徐議員正氣凜然: 當眾教育了警察同仁 真是議員典範: 議座議座得第一: 不曉得是否又為各位上了一課？: https://i.imgur.com/fQjJdo2.jpeg: 本魯...沒害...朋...友..: 本魯朋友最恨違停了...: 警察...不可洩漏...秘錄器..: 平時很恨違停的人怎麼都不見了: 懷疑的可以去跟徐大議員查證歐: 八卦板眾真派 所以小魯可以違停了嗎？: ※註:有電視或媒體有報導者，請勿使用爆卦!，切勿用爆卦張貼新聞: 無重大八卦請勿使用此分類，否則視同濫用爆卦鬧板(文章退回、水桶6個月): 未滿30繁體中文字 水桶3個月: -----: Sent from MeowPtt on my iPhone:\\n\\n不用太過刁難偉哲\\n\\n但他IG有提到\\n\\n\"之前的經驗有開也等於沒開\"\\n\\n那些算是已經成了既成事實的案件\\n\\n不如趁這次一波爆出來吧\\n\\n看是哪些政黨的哪些人\\n\\n把那些人都咬出來吧\\n\\n還是之前也開過巧芯被她吃單?\\n\\n反正要玩公審\\n\\n總比只有自己燒傷好QQ\\n\\n偉哲勇氣拿出來\\n\\n幫你加油\\n\\n\\n\\n\\n\\n--QQtrueQQ","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956242.A.224.html"},{"1":"Thu May 19 18:30:45 2022","2":"Re: [爆卦] 徐巧芯違停事件 警察局調閱後出面說明","3":"YO0779Y","4":"笑死\\n\\n這邊不是很痛恨違停？\\n\\n整天po交通意外死多少人\\n\\n怎麼顏色對了就轉彎 都是警察的錯？\\n\\n民意代表對警察恐嚇\\n\\n不是勸導就好了？\\n\\n不然我跟警察局再確認一下好了\\n\\n施壓完說說你開呀你開呀你開呀\\n\\n小警察哪吃的消？\\n\\n結果現在都警察的錯不依法開單？\\n\\n真是顏色對了怎麼樣都可以: 來源: 徐巧芯 FB: https://www.facebook.com/HsuChiaoHsin/videos/367868198727996: (內有該警察局出面說明影片): 節錄警察開頭逐字稿:: 本分局經檢視執行同仁密錄器，徐議員全程確實沒有要求同仁不可以開單，反而是請我們: 執行同仁依規定來開單: 經查徐議員也從來沒有因為本人或者是其他民眾來向本分局關心過交通違規的案件: ...: [下面是 FB 原文]: -: 與警察局說明「員警爆料徐巧芯違停不給開單事件」，市警局看過密錄器後確認：: 1、當下員警看到違停車輛，準備開單，車主人在現場，因此警方要求看對方的證件。: 2、我詢問開單規定，一般來說是勸導或是直接開單？在員警說明完畢後，請員警開單，: 表明如果還有問題，會另外詢問，可以先開單沒問題。: 3、員警不願意，要交還身分證 。車主數次拜託，提到「如果你不開單，這樣我們很為: 難 。」: 4、但該員警仍然堅持不要，我覺得很奇怪，擔心因為當下員警不開單導致日後會有糾紛: ，因此記下了他密錄器上面寫的姓名。: 5、下午看到PTT爆卦「徐巧芯不讓員警開單」，並非事實，且徐巧芯辦公室從未關說或銷: 單任何民眾或辦公室同仁包括自己本身的交通罰單，該密錄器請分局長看過後，所長密錄: 器後對外澄清。: 6、該起違規事件，已主動請信義分局開下違規罰單。違規停車是我的不對，非常抱歉，: 日後會改進！: 但絕對沒有要求員警不能開單是事實，該員警與友人透過IG爆料內容不實，已損害我的名: 譽。過程造成大家的討論與誤解真的非常抱歉！--你也看看車主是誰\\n你惹得起嗎？","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"Thu May 19 18:30:51 2022","2":"Re: [新聞] 上海關到崩潰！李立群：解封後想回台灣","3":"kawazakiz2","4":"其實他回來台灣爽的咧\\n在中國他的資歷可能贏不了多少人，\\n搞不好只是看他年紀大尊稱一下哥啊爺啊\\n\\n但是台灣可不一樣，人家牌子在台灣算大的總要敬老尊賢吧\\n以台灣談話節目盛行炒作的風氣，每天上到不想上\\n上完了還有劇場油土伯為了蹭人氣找他直播\\n\\n搞不好還可以到某些劇團當個名譽總監之類\\n甚至開班授課，再不然學邰哥放下身段和年輕人當油土伯\\n\\n或許哪天就百萬訂閱代言接飽飽\\n盛竹如只會那一百零八招都吃得開，他怎麼不可能\\n\\n咱寶島台灣多樂和啊您說是不是\\n\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956253.A.C9E.html"},{"1":"Thu May 19 18:31:55 2022","2":"[新聞] 國民黨徵召張善政選桃園 賴香伶不排除向","3":"sodabing","4":"國民黨徵召張善政選桃園賴香伶不排除向羅智強請益https://www.chinatimes.com/realtimenews/20220519001860-260407?chdtv11:002022/05/19 中時 林縉明\\n\\n國民黨昨天突然宣布，徵召前行政院長張善政參選桃園市長。民進黨則傳出不排除有大咖\\n空降參選。對此，民眾黨桃園市長參選人賴香伶表示，不論對手是誰，希望提出政見、政\\n策擘畫桃園，而不是口水跟紛爭模糊焦點。至於國民黨前台北市議員羅智強爭取提名失利\\n，賴香伶說，有機會將向羅智強請益，或許可以就教選戰策略。\\n\\n國民黨徵召張善政參選桃園市長，引發各界議論，賴香伶今天受訪表示，各黨派人選要各\\n自地方處理，應該要用更大的智慧跟溝通，選舉沒必要變成口水多、紛爭多。\\n\\n張善政聲稱，接受國民黨徵召參選桃園市長，理由是快篩之亂，讓快篩國家隊變成國家一\\n起排隊。賴香伶說，疫情期間政府難免有地方做不足，不該以疫情做為參選的出發點，尤\\n其是張善政過去曾任行政院長，應該理性分析問題，並提出解方，沒必要情緒化跟簡單化\\n，這樣的發言很不妥當。\\n\\n另外，羅智強先前曾拜會台北市長柯文哲，傳出會中兩人觸及「藍白在野合作」議題；如\\n今國民黨確定提名張善政，賴香伶說，羅智強過去在議會與北市府關係契合，也許是送行客套話交流，但羅智強的特色跟爆發力，有機會會請教他在桃園行腳請益的想法，也許可以就教在選戰策略上。賴香伶強調，各黨推派人選是否空降是假議題，例如林佳龍不是台中人，擔任台中市長也做得不錯；朱立倫在桃園跟新北都當過首長，所以空降不是真議題，市民真正關心的是提\\n出願景及過去資歷是否被認可，最重要的是政治承諾。\\n\\n\\n------------------\\n\\n香伶加油 香伶加油   香伶香伶香伶加油加油加油 ~~~\\n\\n哥哥把把真偉大 名譽照我家 為黨去選舉 選輸苦哈哈\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956317.A.A97.html"},{"1":"Thu May 19 18:32:05 2022","2":"[問卦] 不小心吃進蘋果的籽 要怎麼辦==","3":"ashilol","4":"欸欸靠\\n\\n小魯剛才吃蘋果\\n\\n不小心把籽一起吃下肚惹辣\\n\\n籽該不會 會在我肚子裡慢慢萌芽\\n\\n然後長成蘋果樹 鑽出我的身體ㄅ？\\n\\n現在要怎摸辦辣！！！\\n\\nU人知道ㄇ？\\n-----\\nSent from MeowPtt on my iPhone\\n\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956327.A.031.html"},{"1":"Thu May 19 18:33:32 2022","2":"Re: [新聞] 屁孩慘了！澳洲少年犯不押看守所　改送「","3":"aynmeow","4":"太多恐怖電影的元素了吧\\n\\n屁孩 + 偏僻鄉下 + 通訊不方便\\n\\n未看先猜會先死幾個藏在草叢裡做愛的屁孩\\n\\n求助找不到大人 不然就是已經死光了\\n\\n最後又死幾個人好不容易拿到通訊設備\\n\\n在大人來支援前 反殺殺人魔成功\\n\\n大人警隊姍姍來遲收屍\\n\\n但其實殺人魔還沒死\\n\\n直到10年後...\\n\\n\\n\\n\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956415.A.79F.html"},{"1":"Thu May 19 18:33:42 2022","2":"[問卦] 恐慌仔的一天都怎麼過的？","3":"QQBB","4":"阿肥我是放推仔啦\\n\\n2020疫情開始到現在一直都消極防疫，從來不主動量體溫、消毒、實聯制\\n\\n內用到最後一天，然後內用解封第一天就立刻跑去內用、電影院的禁食令有時會不小心忘記\\n、在學校懶得去室外直接在教室脫口罩吃東西\\n\\n這樣的生活我已經覺得很壓抑了，有點難想像恐慌仔這2年快3年都是怎麼生活的欸\\n\\n有沒有卦？\\n\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956424.A.5E1.html"},{"1":"Thu May 19 18:34:04 2022","2":"[問卦] 只有【3+4】或【0+7】?","3":"orze04","4":"現行規定接觸者隔離可自行選擇【3+4】或【0+7】\\n\\n那可以開放以下選擇嗎?\\n【1+6】\\n【2+5】\\n【4+3】\\n【5+2】\\n【6+1】\\n【7+0】\\n\\n反正加起來都是7天，應該沒甚麼不同吧?\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956448.A.E46.html"},{"1":"Thu May 19 18:35:26 2022","2":"[問卦] 一條龍的兵種是不是變多了?","3":"your135","4":"過去說的側翼一條龍，多半是側翼FB粉專(匿名)發文→側翼轉推(實名or匿名)→PPT發文(可選)→新聞抄→政論節目討論最後再回流到側翼粉專今天下午出現的不開單事件，是不是表示一條龍的範圍再次擴大了\\n\\n一點發生的事情，三點就被放上PTT爆料，而且刻意誘導輿論發展，側翼轉推等。\\n\\n而且目前看鴿子側錄器也發現事情的真相反而是在違規方支持開單情況下，\\n刻意的不開單，營造特權假象後，事情迅速流出到社群網站以及側翼跟上轉錄攻擊。\\n\\n這件事情是不是代表，部分政府機構人員如部分鴿子也進入一條龍產業鏈，\\n參與假新聞或扭曲事實的製造業，成為側翼團體資訊來源的一員\\n\\n歷史是不是開始了新的篇章?\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956530.A.4C6.html"},{"1":"Thu May 19 18:35:43 2022","2":"[問卦] 嗆完全校同學結果自己成績最爛","3":"Raphael666","4":"如題，學校有位同學他自恃甚高，很中二的說“全校同學怎麼跟得上他”，甚至跟大家說他可以幫忙提升大家的成績，就這樣憑藉著運氣好，他前一個學期的成績也算名列前矛。\\n但好景不長，這學期他突然成績一落千丈，之前準備考試的方法在新學期裡完全不管用，不僅如此，其他同學買參考書的價格都相當便宜，數量也夠，但這位同學買的參考書價格貴得誇張，而且不齊全，請問遇到這種同學該怎麼辦？有人在唸書時期也遇過這種同學嗎？\\n\\n-----\\nSent from JPTT on my Sony XQ-AS72.\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956545.A.929.html"},{"1":"Thu May 19 18:36:20 2022","2":"[問卦] 女性領導者都會養小狼狗嗎???","3":"lovea","4":"武則天的男寵最有名的就是張易之和張昌宗兄弟\\n\\n二人輪番侍寢，把武則天伺候的十分舒服\\n\\n權傾朝野，結黨營私干涉朝政，後來政變後被殺\\n\\n近現代的慈禧太后也是\\n\\n朴槿惠和翁山蘇姬不知道有沒有\\n\\n不知道還有哪些女性領導者\\n\\n自己60~70幾歲，還養那種20幾~30幾歲的小狼狗，時不時出來狐假虎威\\n\\n然後自己整天躲起來的案例???\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956583.A.D7C.html"},{"1":"Thu May 19 18:37:04 2022","2":"[問卦] 君子劍岳不群","3":"nbarepeat","4":"君子劍岳不群\\n在江湖上每個人都很敬重他\\n但是私底下\\n卻不是這樣\\n為了自己的貪念亂搞\\n大家身邊這種人多嗎\\n-----\\nSent from JPTT on my iPhone\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956626.A.691.html"},{"1":"Thu May 19 18:37:29 2022","2":"[問卦] ＝.＝ 警察讓人看不起不也剛好而已？！","3":"xzcb2008","4":"林北阿肥啦\\n\\n＝.＝\\n\\n他媽的真的有夠杜蘭\\n\\n看到那種警察\\n\\n竟然不是依法律怎樣就怎樣\\n\\n還看人欸\\n\\n幹他媽的林北也違停就沒有這麼爽\\n\\n幹\\n\\n啥小\\n\\n欺善怕惡欸\\n\\n難怪林北最瞧不起警察\\n\\n以後小朋友要是考警察\\n\\n林北一定電到臭頭\\n\\n怎麼會有這種狀況啦＝.＝\\n\\n警察\\n\\n呵...有八卦嗎？！\\n\\n阿肥想問國外警察一樣讓人瞧不起嗎\\n\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956651.A.8B3.html"},{"1":"Thu May 19 18:37:36 2022","2":"[新聞]性向測驗入國考！考選部研議推動納入部分公務人員考試類科","3":"pl132","4":"備註請放最後面 違者新聞文章刪除\\n\\n1.媒體來源:\\n\\n ETtoday新聞雲\\n\\n\\n2.記者署名:\\n\\n記者林銘翰／台北報導\\n\\n3.完整新聞標題:\\n\\n\\n性向測驗入國考！考選部研議推動　納入部分公務人員考試類科\\n\\n\\n\\n4.完整新聞內文:\\n\\n\\n記者林銘翰／台北報導\\n\\n考選部19日表示，性向測驗已被廣泛運用在其他國家或私部門人事決策，國家人才的甄補\\n可以善加利用，考量國人對性向測驗的理解及信任仍有不足，政策立論基礎有再強化、厚\\n實的必要，未來如果能夠順利開展，也將進一步結合電腦化測驗系統，使其成為為國掄才\\n的多元考試方法之一。\\n\\n考試院19日召開院會，考選部以「規劃性向測驗納入公務人員考試制度」為題提出專案報\\n告，與會的考試委員就我國公務人員考選實況，以及對性向測驗納入考試體制的構想進行\\n充分討論。\\n\\n考試院長黃榮村表示，性向測驗是廣為各國採用的政府選才工具，但任何考選制度的變革\\n，均應從影響層面最小處著手，以期後續推動順利，請考選部持續與用人機關、公共行政\\n學界及測驗評量專家充分討論，謹慎研議推動的模式。\\n\\n黃榮村指出，早在民國40、50年代，我國公務人員考試就曾短暫實施過心理測驗，前兩屆\\n考試委員也曾將實施心理測驗或採行多元評量途徑，列為政策主張，但都是因為考量國人\\n對心理測驗認識不深，以及對考選機關專業承受量能有所顧慮而暫緩。\\n\\n黃榮村說明，有鑑於我國公部門缺乏使用標準化測驗工具辦理性向測驗的經驗，考選部在\\n推動本案時，應衡量社會的理解與信任，評估對現行制度的衝擊程度，並且與用人機關、\\n公共行政領域學者進行充分協商與溝通。\\n\\n黃榮村也說，性向測驗研發、施測、成績計算、解釋等工作具高度專業性，如果沒有堅實\\n的專業知能，恐怕難以負荷，因此務必邀請測驗評量專長的專家學者協助，甚至要委託專\\n業機構辦理。\\n\\n考選部指出，性向測驗已被廣泛運用在其他國家或私部門人事決策，國家人才的甄補可以\\n善加利用，對於將性向測驗納為公務人員考試方法之一，考選部籌劃已久，除了多次邀請\\n學者專家表達專業見解，也分別在2017年、2019年間委託學者專家完成可行性研究，以及\\n研發編製試題。\\n\\n考選部表示，國人對性向測驗的理解及信任仍有不足，政策立論基礎有再強化、厚實的必\\n要，因此現階段為求審慎，仍應持續累積實證研究成果，才能開始能規劃試行。\\n\\n考選部說，未來將以最穩健周妥的態度及方式，多方徵詢、探討及研議，等到完備政策規\\n劃及評估後，再選擇合適的考試類科逐步推動，如果能夠順利開展，也將進一步結合電腦\\n化測驗系統，使性向測驗成為為國掄才的多元考試方法之一。\\n\\n\\n5.完整新聞連結 (或短網址)需放媒體原始連結，不可用轉載媒體連結:https://www.ettoday.net/news/20220519/2254822.htm6.備註:--","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956658.A.A00.html"},{"1":"Thu May 19 18:37:46 2022","2":"Re: [爆卦] 北市徐巧芯議員違停不給開單 (當事人回應)","3":"TOMMY75410","4":"差那麼多\\n\\n我之前在高雄機車梯在騎樓，後來被警察開單，我全程陪笑臉還是被開單，還被多記安全\\n帽沒有扣，幹\\n\\n我是在波蘭老外抗議人行道騎機車之前，泥可以查查之前一年高雄有幾張人行道騎機車安\\n全帽沒扣好紅單\\n\\n我草你妹的^_^\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956668.A.E49.html"},{"1":"Thu May 19 18:37:53 2022","2":"[問卦] 20歲的人都聽什麼音樂？","3":"lockinboy","4":"安安你好如題\\n\\n是這樣啦\\n\\n每一世代都有自己喜歡的音樂\\n\\n中年人喜歡瀟灑走一回、笑傲江湖\\n\\n老年人喜歡費玉清\\n\\n那20歲的人又喜歡什麼音樂呢？\\n\\n卦？\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956676.A.578.html"},{"1":"Thu May 19 18:39:11 2022","2":"[問卦] 共存會帶走多少老人","3":"a29976137","4":"話說這次共存\\n\\n會帶走多少老人\\n\\n八卦版怎麼好像都沒有討論\\n\\n台灣老人是否不討喜\\n\\n沒事喜歡跑醫院\\n\\n爛用健保資源\\n\\n之後應該看不到了吧\\n\\n共存會帶走多少老人？\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956753.A.D69.html"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="sourceCode" id="cb54"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb54-1"><a href="creating-corpus.html#cb54-1" aria-hidden="true" tabindex="-1"></a>push.table.all</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["tag"],"name":[1],"type":["chr"],"align":["left"]},{"label":["author"],"name":[2],"type":["chr"],"align":["left"]},{"label":["content"],"name":[3],"type":["chr"],"align":["left"]},{"label":["datetime"],"name":[4],"type":["chr"],"align":["left"]},{"label":["url"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"推","2":"Gandalf","3":": 我爸是","4":"130.88.226.13 05/19 18:29","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956174.A.D67.html"},{"1":"推","2":"frommr","3":": 我pcr陽性","4":"27.53.145.28 05/19 18:29","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956174.A.D67.html"},{"1":"→","2":"brianuser","3":": 我媽蔡英文","4":"1.172.212.74 05/19 18:29","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956174.A.D67.html"},{"1":"→","2":"benptt","3":": may show gun more?","4":"123.192.83.126 05/19 18:30","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956174.A.D67.html"},{"1":"推","2":"qa1122z","3":": 馬上開走不會逆","4":"223.141.26.31 05/19 18:30","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956174.A.D67.html"},{"1":"→","2":"luche","3":": 便衣學長","4":"1.200.254.72 05/19 18:30","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956174.A.D67.html"},{"1":"→","2":"avgirl","3":": 一開始不是勸導嗎?  這就是密語","4":"36.230.111.250 05/19 18:30","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956174.A.D67.html"},{"1":"→","2":"milkyway168","3":": 我輸不起","4":"27.51.120.131 05/19 18:30","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956174.A.D67.html"},{"1":"推","2":"avexgroup","3":": 我爸喬王","4":"49.216.224.24 05/19 18:32","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956174.A.D67.html"},{"1":"→","2":"S2aqua","3":": 我議座助理 議員大人等下就出來了","4":"1.200.1.240 05/19 18:33","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956174.A.D67.html"},{"1":"推","2":"luna2000sea","3":": 好大的官威","4":"223.136.162.214 05/19 18:34","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956174.A.D67.html"},{"1":"→","2":"nautasechs","3":": 你勸導了沒（遞身分證）","4":"27.247.127.9 05/19 18:35","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956174.A.D67.html"},{"1":"推","2":"booth","3":": 拿出愛滋毒甲證明","4":"42.73.58.157 05/19 18:38","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956174.A.D67.html"},{"1":"→","2":"james732","3":": 每個人都會感冒是在怕什麼","4":"223.137.154.14 05/19 18:30","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956180.A.2E9.html"},{"1":"推","2":"milkyway168","3":": 4","4":"27.51.120.131 05/19 18:30","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956180.A.2E9.html"},{"1":"→","2":"brianuser","3":": 先去死，但是死後還是有可能確診 麻煩","4":"1.172.212.74 05/19 18:30","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956180.A.2E9.html"},{"1":"→","2":"TWilde","3":": 已經勃起超過2個小時了請問該怎麼辦","4":"122.121.129.63 05/19 18:30","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956180.A.2E9.html"},{"1":"→","2":"brianuser","3":": 剁掉","4":"1.172.212.74 05/19 18:30","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956180.A.2E9.html"},{"1":"→","2":"winglight","3":": 八卦是你認識的人可能會死","4":"220.135.69.109 05/19 18:31","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956180.A.2E9.html"},{"1":"→","2":"hinajian","3":": 盡人事 聽天命","4":"111.255.112.249 05/19 18:32","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956180.A.2E9.html"},{"1":"推","2":"nowitzki0207","3":": 本來就是了，恐慌仔看了就火","4":"101.12.18.206 05/19 18:33","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956180.A.2E9.html"},{"1":"推","2":"obrag","3":": 感謝政府感謝黨","4":"223.136.4.91 05/19 18:33","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956180.A.2E9.html"},{"1":"推","2":"archon","3":": 你這輩子沒感冒過是不？","4":"125.227.31.1 05/19 18:34","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956180.A.2E9.html"},{"1":"推","2":"gamania5972","3":": 4","4":"36.231.133.81 05/19 18:37","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956180.A.2E9.html"},{"1":"推","2":"dragontwo","3":": 暴太多料，黨要下手了","4":"223.140.217.118 05/19 18:30","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956194.A.DFA.html"},{"1":"噓","2":"asdfghjklasd","3":": 1450","4":"140.238.52.217 05/19 18:30","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956194.A.DFA.html"},{"1":"→","2":"avgirl","3":": 我也覺得","4":"36.230.111.250 05/19 18:30","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956194.A.DFA.html"},{"1":"→","2":"air8426","3":": 這很塔","4":"114.46.141.209 05/19 18:33","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956194.A.DFA.html"},{"1":"推","2":"sted0101","3":": 我也覺得","4":"111.250.38.205 05/19 18:38","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956194.A.DFA.html"},{"1":"推","2":"yymeow","3":": 應該是妨害名譽成立，GG","4":"125.227.33.45 05/19 18:31","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956242.A.224.html"},{"1":"噓","2":"rinatwo","3":": 我之前的經驗 警察的話可以信 狗屎都能","4":"101.8.10.17 05/19 18:33","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956242.A.224.html"},{"1":"→","2":"rinatwo","3":": 吃了","4":"101.8.10.17 05/19 18:33","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956242.A.224.html"},{"1":"→","2":"hiphopmei","3":": 不開就是瀆職 就這麼簡單","4":"223.140.2.5 05/19 18:34","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956242.A.224.html"},{"1":"→","2":"rinatwo","3":": 整天只想吃案 還一堆人護航 等到長榮女","4":"101.8.10.17 05/19 18:34","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956242.A.224.html"},{"1":"→","2":"rinatwo","3":": 大生被殺死 才要記過 有個屁用","4":"101.8.10.17 05/19 18:35","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956242.A.224.html"},{"1":"噓","2":"yukiinsummer","3":": 笑死 你比較像轉彎啦","4":"101.10.46.95 05/19 18:31","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"→","2":"avgirl","3":": 所以要公佈影像阿  看口氣是施壓還是詢問?","4":"36.230.111.250 05/19 18:31","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"噓","2":"k1986","3":": 少把兩件事混在一起談","4":"49.216.130.114 05/19 18:31","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"→","2":"yukiinsummer","3":": 不開單在那邊帶風向 現在還要來哭","4":"101.10.46.95 05/19 18:31","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"→","2":"avgirl","3":": 誰知道當下的口氣是怎樣  累死基層惹","4":"36.230.111.250 05/19 18:31","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"→","2":"yukiinsummer","3":": 有夠噁心","4":"101.10.46.95 05/19 18:31","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"噓","2":"hiphopmei","3":": 哪隻狗眼看到有人說違停是對的？","4":"223.140.2.5 05/19 18:32","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"推","2":"guaiacol","3":": 哇賽 這不是經典的二分法嗎XD 都給你講","4":"111.248.183.19 05/19 18:32","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"噓","2":"pan0531","3":": 違停就罰啊? 有人挺違停?","4":"111.249.152.51 05/19 18:32","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"→","2":"stlinman","3":": 證據呢? 亂噴亂抹?","4":"150.116.129.113 05/19 18:32","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"噓","2":"ilw4e","3":": 這隻真的很可憐","4":"110.26.130.155 05/19 18:32","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"→","2":"guaiacol","3":": 就好啦","4":"111.248.183.19 05/19 18:32","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"→","2":"yymeow","3":": 吃不消會叫人在ptt爆料喔?","4":"125.227.33.45 05/19 18:32","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"噓","2":"Jeff911","3":": 痛恨違停 結果你挺不開單的警察？","4":"114.42.56.213 05/19 18:32","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"噓","2":"tatol","3":": 你聽過密錄器嗎  怎知道恐嚇？ 小心亂指控","4":"133.18.208.150 05/19 18:32","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"噓","2":"Benance","3":": 好慘只能一直崩潰跳針停紅線=死罪","4":"1.162.224.106 05/19 18:33","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"→","2":"tatol","3":": 小心被告","4":"133.18.208.150 05/19 18:33","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"噓","2":"a3900656","3":": 好了啦，去領錢去領錢","4":"49.216.177.113 05/19 18:33","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"噓","2":"ckhou","3":": 違停當然是錯,警察就該開啊,不開又找人爆料","4":"125.227.145.49 05/19 18:33","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"噓","2":"melluu","3":": 塔綠斑死全家啦","4":"42.77.203.235 05/19 18:33","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"推","2":"angraer","3":": 違停有人護航嗎？兩件事混在一起講真的很","4":"122.118.36.109 05/19 18:33","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"→","2":"angraer","3":": 會內","4":"122.118.36.109 05/19 18:33","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"→","2":"tosh2","3":": 果然人一綠 腦堪慮","4":"123.241.195.23 05/19 18:34","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"→","2":"IY1227","3":": 沒看到誰支持違停但看到支持不開單的一堆","4":"42.77.148.129 05/19 18:34","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"噓","2":"tania1210","3":": 被檢討的重點是施壓，不是在違停吧","4":"61.61.165.158 05/19 18:34","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"→","2":"tanchuchan","3":": 亂造謠就是很垃圾","4":"49.216.53.20 05/19 18:34","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"噓","2":"lalalahu","3":": 收錢辦事","4":"114.25.223.173 05/19 18:34","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"→","2":"tanchuchan","3":": 重點是亂造謠  還想帶風向","4":"49.216.53.20 05/19 18:34","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"推","2":"jim543000","3":": 開-特權 不開-關說 怎麼樣才好 救命","4":"220.141.170.194 05/19 18:34","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"→","2":"Jeff911","3":": 不開你說施壓,開了又戰違停,都給你爽吼","4":"114.42.56.213 05/19 18:34","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"推","2":"anoreader","3":": 哪位民意代表對警察恐嚇?可以說清楚點","4":"111.243.113.212 05/19 18:34","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"推","2":"deadbody","3":": 誰轉灣了  你才全家都轉灣啦","4":"42.77.236.112 05/19 18:35","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"→","2":"anoreader","3":": 有自信點喔","4":"111.243.113.212 05/19 18:35","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"→","2":"tania1210","3":": 違停就是開單囉，要釐清的是施壓吧","4":"61.61.165.158 05/19 18:35","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"噓","2":"hankuego5566","3":": 沒臭到又自爆就像這樣，見笑轉生氣","4":"111.83.118.125 05/19 18:35","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"→","2":"tanchuchan","3":": 如果是po巧芯違停太可惡 沒人會噓啊","4":"49.216.53.20 05/19 18:35","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"噓","2":"mink520","3":": 你是不是一日工讀生 風向這麼不會帶 會被","4":"42.72.10.117 05/19 18:35","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"噓","2":"GLung","3":": 阿蔡政府修限縮違停檢舉的時候你有去噴嗎","4":"223.137.68.29 05/19 18:35","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"→","2":"mink520","3":": 開除捏","4":"42.72.10.117 05/19 18:35","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"→","2":"GLung","3":":  不愧是支持造謠仔的水準呢","4":"223.137.68.29 05/19 18:35","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"→","2":"IY1227","3":": 痛恨違停所以支持敢開單 不敢開滾啦","4":"42.77.148.129 05/19 18:35","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"推","2":"aaaa5487","3":": 在八卦你還期待什麼","4":"42.73.82.169 05/19 18:35","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"→","2":"tanchuchan","3":": 造謠仔滾啦","4":"49.216.53.20 05/19 18:36","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"噓","2":"dx4368","3":": 不開單然後上網爆料到底是瀆職還是被施壓","4":"61.221.189.103 05/19 18:36","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"噓","2":"qwerapple","3":": 違停就該罵該罰 所以是為什麼不開單","4":"49.216.63.21 05/19 18:36","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"→","2":"Jeff911","3":": 這邊有誰護航她違停？帶三小風向","4":"114.42.56.213 05/19 18:36","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"→","2":"dx4368","3":": 啊","4":"61.221.189.103 05/19 18:36","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"噓","2":"xxMIGxx","3":": 講五六次請你開 你就不開還亂爆料 傻了","4":"118.231.184.94 05/19 18:36","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"→","2":"tim32142000","3":": 立法院不痛恨 鄭文燦不痛恨","4":"114.25.62.176 05/19 18:36","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"噓","2":"boss88893","3":":    國會誰過半?  總統是誰?","4":"61.228.52.123 05/19 18:37","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"噓","2":"giggleboy","3":": 這ID直接給噓","4":"101.9.100.82 05/19 18:38","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"噓","2":"ui","3":": 會開罰阿，又沒說不開罰，問題是上網造謠阿！","4":"140.109.136.222 05/19 18:38","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"噓","2":"JT0624","3":": 違停有錯 瀆職不開單的警察也有錯","4":"36.233.121.100 05/19 18:38","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"→","2":"coolan","3":": 時空背景不同  懂的都懂","4":"210.209.186.105 05/19 18:39","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"→","2":"ui","3":": 塔綠班現在碰到造謠直接無視喔？要不是有密錄","4":"140.109.136.222 05/19 18:39","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"→","2":"ui","3":": 又要被你們惡搞一波了","4":"140.109.136.222 05/19 18:39","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"噓","2":"encoreb00124","3":": 嘻嘻","4":"118.160.64.43 05/19 18:39","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"噓","2":"puritylife","3":": 都已經確認過密錄器了還硬要洗喔","4":"223.137.172.136 05/19 18:39","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"噓","2":"n1031","3":": 就問你為何警察不開單囉？氣的勒笑死","4":"111.71.101.92 05/19 18:40","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"→","2":"members","3":": 洗一堆文，苦無大師是對的， ptt只有一種","4":"122.117.6.14 05/19 18:40","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"→","2":"members","3":": 顏色的網軍","4":"122.117.6.14 05/19 18:40","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"噓","2":"talrasha","3":": 這篇可備份給徐巧馨 嘻","4":"61.223.109.65 05/19 18:40","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"推","2":"samonella","3":": 議員說這種要先勸導是真的嗎？","4":"49.216.225.137 05/19 18:40","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956247.A.17A.html"},{"1":"→","2":"purplebfly","3":": 但都沒什麼錢,在中國隨便一個節目給的","4":"118.167.163.35 05/19 18:34","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956253.A.C9E.html"},{"1":"→","2":"purplebfly","3":": 在台灣可以吃好幾個月","4":"118.167.163.35 05/19 18:34","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956253.A.C9E.html"},{"1":"推","2":"godofsex","3":": https://i.imgur.com/QetlmdF.jpg","4":"101.10.56.41 05/19 18:35","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956253.A.C9E.html"},{"1":"→","2":"bathilda","3":": 台灣這些都只有微博報酬吧","4":"112.78.92.5 05/19 18:35","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956253.A.C9E.html"},{"1":"→","2":"bathilda","3":": 微薄","4":"112.78.92.5 05/19 18:35","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956253.A.C9E.html"},{"1":"→","2":"kawazakiz2","3":": 但他總還是有存款吧","4":"49.216.20.119 05/19 18:37","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956253.A.C9E.html"},{"1":"推","2":"sellgd","3":": 根本是小綠思維 不過能搞倒大綠就是好狗","4":"203.222.14.70 05/19 18:33","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956317.A.A97.html"},{"1":"推","2":"kutkin","3":": 我想跟他換 是這樣嗎","4":"1.200.19.237 05/19 18:33","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956317.A.A97.html"},{"1":"→","2":"Jack2277","3":": 誰能搞倒大綠我一律支持","4":"36.228.145.110 05/19 18:34","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956317.A.A97.html"},{"1":"→","2":"sellgd","3":": 更正: 搞倒畜綠","4":"203.222.14.70 05/19 18:34","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956317.A.A97.html"},{"1":"推","2":"oncemore","3":": 推那個議長，就是藍白分票，綠的撿走","4":"111.82.179.153 05/19 18:35","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956317.A.A97.html"},{"1":"推","2":"jid","3":": 賴正羅副 賴當8年期間培養羅 跟培養黃珊珊ㄧ","4":"101.137.50.191 05/19 18:35","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956317.A.A97.html"},{"1":"→","2":"oncemore","3":": 朱是處理的太粗糙了，但不提議長是對的","4":"111.82.179.153 05/19 18:36","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956317.A.A97.html"},{"1":"→","2":"jid","3":": 樣","4":"101.137.50.191 05/19 18:36","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956317.A.A97.html"},{"1":"→","2":"qa1122z","3":": 馬上去急診，急","4":"223.141.26.31 05/19 18:32","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956327.A.031.html"},{"1":"推","2":"badbadook","3":": 尻一槍看看","4":"36.224.34.239 05/19 18:32","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956327.A.031.html"},{"1":"推","2":"diabolica","3":": 接下來幾天都不要喝水 他就不會發芽了","4":"49.158.78.174 05/19 18:32","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956327.A.031.html"},{"1":"→","2":"james732","3":": 趕快給二樓口暴他ㄉ洨會把蘋果淹死","4":"223.137.154.14 05/19 18:32","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956327.A.031.html"},{"1":"→","2":"likeair","3":": 掛急診開刀","4":"210.242.52.55 05/19 18:32","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956327.A.031.html"},{"1":"→","2":"derrick1220","3":": 節哀","4":"101.136.205.93 05/19 18:32","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956327.A.031.html"},{"1":"→","2":"GOD5566","3":": 每天好好觀察肚臍ㄅ","4":"180.217.73.4 05/19 18:33","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956327.A.031.html"},{"1":"推","2":"purplebfly","3":": 你知道蘋果籽有氰化物成份嗎?","4":"118.167.163.35 05/19 18:33","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956327.A.031.html"},{"1":"→","2":"s871413","3":": 完蛋了沒救了，你很快就會變成頻果樹的一","4":"42.74.212.179 05/19 18:33","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956327.A.031.html"},{"1":"→","2":"s871413","3":": 部分","4":"42.74.212.179 05/19 18:33","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956327.A.031.html"},{"1":"噓","2":"oplk","3":": 哈姆立克","4":"61.223.180.73 05/19 18:33","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956327.A.031.html"},{"1":"推","2":"booth","3":": 喝一瓶鹽酸","4":"42.73.58.157 05/19 18:33","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956327.A.031.html"},{"1":"推","2":"venomsoul","3":": 吞一些肥料明年等收成","4":"42.79.206.122 05/19 18:33","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956327.A.031.html"},{"1":"→","2":"HARUbo","3":": 寄生樹","4":"118.166.67.206 05/19 18:33","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956327.A.031.html"},{"1":"推","2":"sdbb","3":": 先快篩","4":"112.104.66.162 05/19 18:33","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956327.A.031.html"},{"1":"噓","2":"jp6vu04boy","3":": 十五樓不小心吃下甲洨生出小甲甲","4":"39.9.136.18 05/19 18:33","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956327.A.031.html"},{"1":"推","2":"windlan","3":": 有杏仁味","4":"111.254.213.32 05/19 18:34","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956327.A.031.html"},{"1":"推","2":"maple0425","3":": 完蛋了 幫QQ","4":"49.215.10.77 05/19 18:35","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956327.A.031.html"},{"1":"→","2":"poru","3":": 具備豐富單寧酸可以分解新冠病毒","4":"182.234.128.179 05/19 18:35","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956327.A.031.html"},{"1":"→","2":"poru","3":": 恭喜妳了.你吃了解藥","4":"182.234.128.179 05/19 18:35","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956327.A.031.html"},{"1":"噓","2":"maxwells","3":": 先看急診嗎？","4":"125.229.60.48 05/19 18:35","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956327.A.031.html"},{"1":"→","2":"em4","3":": 會潮到出水","4":"110.26.168.24 05/19 18:37","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956327.A.031.html"},{"1":"→","2":"minoru04","3":": 殺人魔就在他們之中","4":"114.40.81.243 05/19 18:36","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956415.A.79F.html"},{"1":"噓","2":"hiphopmei","3":": 上ptt噓智障和正常人","4":"223.140.2.5 05/19 18:35","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956424.A.5E1.html"},{"1":"→","2":"james732","3":": 關家裡上PTT亂罵人智障像二樓那個智障","4":"223.137.154.14 05/19 18:35","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956424.A.5E1.html"},{"1":"→","2":"xoyster","3":": 洗板仔","4":"36.238.111.165 05/19 18:35","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956424.A.5E1.html"},{"1":"→","2":"bathilda","3":": 整天鎖在家裡不出門，靠外送或爸媽送飯","4":"112.78.92.5 05/19 18:36","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956424.A.5E1.html"},{"1":"推","2":"citizen5566","3":": 吃到飽餐廳大吃一頓","4":"114.44.13.152 05/19 18:36","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956424.A.5E1.html"},{"1":"→","2":"S2aqua","3":": 現在好像變少了 三個禮拜前是詛咒別人全家","4":"1.200.1.240 05/19 18:41","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956424.A.5E1.html"},{"1":"噓","2":"xoyster","3":": 有完沒完","4":"36.238.111.165 05/19 18:34","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956448.A.E46.html"},{"1":"推","2":"snsdakb48","3":": -14+7","4":"220.136.60.76 05/19 18:34","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956448.A.E46.html"},{"1":"→","2":"avgirl","3":": 沒空  現在在吵大議員違停","4":"36.230.111.250 05/19 18:34","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956448.A.E46.html"},{"1":"→","2":"coollfd","3":": 各位自主應變 阿中市長加油","4":"123.240.136.224 05/19 18:34","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956448.A.E46.html"},{"1":"→","2":"i376ers","3":": 如果接觸者0+7就是可以去上班 那確診者","4":"114.24.78.243 05/19 18:35","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956448.A.E46.html"},{"1":"→","2":"i376ers","3":": 就自己在家自生自滅？","4":"114.24.78.243 05/19 18:35","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956448.A.E46.html"},{"1":"推","2":"jil","3":": 3+11黨說了算","4":"111.253.209.169 05/19 18:36","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956448.A.E46.html"},{"1":"推","2":"lee7922412","3":": 問晨晨啦，長頸鹿數學","4":"49.216.223.99 05/19 18:36","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956448.A.E46.html"},{"1":"→","2":"pan0531","3":": 自主應變 懂?","4":"111.249.152.51 05/19 18:36","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956448.A.E46.html"},{"1":"推","2":"jeffj89972","3":": 麥當勞不賣薯條，肯德基不賣蛋撻，指","4":"27.242.139.31 05/19 18:43","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956448.A.E46.html"},{"1":"→","2":"jeffj89972","3":": 揮中心不指揮也很合理吧","4":"27.242.139.31 05/19 18:43","5":"https://www.ptt.cc/bbs/Gossiping/M.1652956448.A.E46.html"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="danger">
<p>
There is still one problem with the Push data frame. Right now it is
still not very clear how we can match the pushes to the articles from
which they were extracted. The only shared index is the
<code>url</code>. It would be better if all the articles in the data
frame have their own unique indices and in the Push data frame each push
comment corresponds to a particular article index.
</p>
</div>
<hr />
<p>The following graph summarizes our work flowchart for PTT Gossipping Scraping:</p>
<p><img src="images/ptt-crawling.png" width="90%" /></p>
</div>
</div>
<div id="save-corpus" class="section level2" number="3.4">
<h2><span class="header-section-number">3.4</span> Save Corpus</h2>
<p>You can easily save your scraped texts in a <code>CSV</code> format.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb55-1"><a href="creating-corpus.html#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Save ------</span></span>
<span id="cb55-2"><a href="creating-corpus.html#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(article.table, <span class="at">path =</span> <span class="st">&quot;PTT_GOSSIPPING_ARTICLE.csv&quot;</span>)</span>
<span id="cb55-3"><a href="creating-corpus.html#cb55-3" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(push.table, <span class="at">path =</span> <span class="st">&quot;PTT_GOSSIPPING_PUSH.csv&quot;</span>)</span></code></pre></div>
</div>
<div id="additional-resources" class="section level2" number="3.5">
<h2><span class="header-section-number">3.5</span> Additional Resources</h2>
<p>Collecting texts and digitizing them into machine-readable files is only the initial step for corpus construction. There are many other things that need to be considered to ensure the effectiveness and the sustainability of the corpus data. In particular, I would like to point you to a very useful resource, <a href="http://icar.cnrs.fr/ecole_thematique/contaci/documents/Baude/wynne.pdf">Developing Linguistic Corpora: A Guide to Good Practice</a>, compiled by Martin Wynne. Other important issues in corpus creation include:</p>
<ol style="list-style-type: decimal">
<li>Adding linguistic <strong>annotations</strong> to the corpus data (cf. Leech’s Chapter 2)</li>
<li><strong>Metadata</strong> representation of the documents (cf. Burnard’s Chapter 4)</li>
<li>Spoken corpora (cf. Thompson’s Chapter 5)</li>
<li>Technical parts for corpus creation (cf. Sinclair’s Appendix)</li>
</ol>
</div>
<div id="final-remarks" class="section level2" number="3.6">
<h2><span class="header-section-number">3.6</span> Final Remarks</h2>
<ol style="list-style-type: decimal">
<li>Please pay attention to the ethical aspects involved in the process of web crawling (esp. with personal private matters).</li>
<li>If the website has their own API built specifically for one to gather data, use it instead of scraping.</li>
<li>Always read the terms and conditions provided by the website regarding data gathering.</li>
<li>Always be gentle with the data scraping (e.g., off-peak hours, spacing out the requests)</li>
<li>Value the data you gather and treat the data with respect.</li>
</ol>
<hr />

<div class="exercise">
<span id="exr:wcex1" class="exercise"><strong>Exercise 3.1  </strong></span>Can you modify the R codes so that the script can automatically scrape more than one index page?
</div>

<div class="exercise">
<p><span id="exr:unnamed-chunk-48" class="exercise"><strong>Exercise 3.2  </strong></span>Please utilize the code from Exercise <a href="creating-corpus.html#exr:wcex1">3.1</a> and collect all texts on <code>PTT/Gossipings</code> from <strong>3</strong> index pages. Please have the articles saved in <code>PTT_GOSSIPING_ARTICLE.csv</code> and the pushes saved in <code>PTT_GOSSIPING_PUSH.csv</code> under your working directory.</p>
<p>Also, at the end of your code, please also output in the Console the corpus size, including both the articles and the pushes. Please provide the total number of <em>characters</em> of all your PTT text data collected (Note: You DO NOT have to do the word segmentation yet. Please use the characters as the base unit for corpus size.)</p>
Hint: <code>nchar()</code>
</div>
<p><em>Your script may look something like:</em></p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb56-1"><a href="creating-corpus.html#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I define my own `scrapePTT()` function:</span></span>
<span id="cb56-2"><a href="creating-corpus.html#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="co"># ptt_url: specify the board to scrape texts from</span></span>
<span id="cb56-3"><a href="creating-corpus.html#cb56-3" aria-hidden="true" tabindex="-1"></a><span class="co"># num_index_page: specify the number of index pages to be scraped</span></span>
<span id="cb56-4"><a href="creating-corpus.html#cb56-4" aria-hidden="true" tabindex="-1"></a><span class="co"># return: list(article, push)</span></span>
<span id="cb56-5"><a href="creating-corpus.html#cb56-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-6"><a href="creating-corpus.html#cb56-6" aria-hidden="true" tabindex="-1"></a>PTT_data <span class="ot">&lt;-</span><span class="fu">scrapePTT</span>(<span class="at">ptt_url =</span> <span class="st">&quot;https://www.ptt.cc/bbs/Gossiping&quot;</span>, <span class="at">num_index_page =</span> <span class="dv">3</span>)</span>
<span id="cb56-7"><a href="creating-corpus.html#cb56-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-8"><a href="creating-corpus.html#cb56-8" aria-hidden="true" tabindex="-1"></a>PTT_data<span class="sc">$</span>article <span class="sc">%&gt;%</span> head</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["datetime"],"name":[1],"type":["chr"],"align":["left"]},{"label":["title"],"name":[2],"type":["chr"],"align":["left"]},{"label":["author"],"name":[3],"type":["chr"],"align":["left"]},{"label":["content"],"name":[4],"type":["chr"],"align":["left"]},{"label":["url"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"Thu May 19 18:11:01 2022","2":"[問卦] 會不會我早就確診還不自知？？","3":"suck55426","4":"安安\\n\\n小弟現在都窩在家\\n\\n遠端上職訓課\\n\\n有時候出門買東西\\n叫外送\\n\\n喉嚨一直時不時都會卡卡的\\n好像是天生支氣管不好\\n\\n但我也不敢驗\\n\\n不驗是不是就不會確診了\\n\\ngenius？\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1652955063.A.04B.html"},{"1":"Thu May 19 18:11:33 2022","2":"[新聞] 99%民眾不滿高房價 民團籲總統兌現房市","3":"Martin0414","4":"1.媒體來源:民視新聞網\\n\\n2.記者署名:民視新聞／葉霈萱、簡士峯 台北報導\\n\\n3.完整新聞標題:99%民眾不滿高房價　民團籲總統兌現房市政策\\n\\n4.完整新聞內文:\\n\\n2022/05/19 12:36:39https://reurl.cc/GxjeKd民間團體巢運今天（5月19日）發布「青年居住困境」民調，顯示有過半年輕人住在租屋\\n處，而對於台灣的高房價，更有高達99.3%的民眾認為問題嚴重。巢運呼籲總統蔡英文兌\\n現「房市三箭」承諾，在最後2年任期，把「改革房產稅制」、「健全租屋體系」兩箭補\\n上。\\n\\n舉著手板、高喊口號，民團「巢運」召開記者會，發布最新「青年居住困境」民調，指出\\n總統蔡英文在2016年上任時的「房市三箭」政策，並沒有讓年輕人有感。\\n\\n巢運發言人彭揚凱說，「這個箭最後射了半天，其實把青年射垮了，房子依舊是買不起，\\n租屋黑市租不好的困境，還是從來沒有被解決。」\\n\\n巢運進行網路調查，在5千多份問卷中，92%是年齡介於18~45歲的民眾，過半數年收入超\\n過50萬元。然而仍有51%的人是租屋族，近30%與父母共住，只有10%住在自宅。探究主要\\n原因，有高達99%的民眾認為，台灣的高房價問題嚴重，而近年內有40%的人沒買到房，或\\n沒計畫買，甚至在未來5年內，只有不到30%的人打算買房。\\n\\n崔媽媽基金會執行長呂秉怡說，「把握這兩年內的一個政治（選舉）的機會，巢運以及各\\n民間的團體，會結合我們的各黨派的立委，一起來做居住正義的一個倡議。」\\n\\n民團也說，有87%的租屋族認為，政府推動的300億擴大租金補貼方案沒有實際成效，民眾\\n期待的政策，是打擊交易炒作、反囤房與去黑市。呼籲蔡總統，在最後2年任期，把「改\\n革房產稅制」、「健全租屋體系」的兩箭補上。https://reurl.cc/moMl0Y立委（民眾）賴香伶說，「整體上面對於社會住宅興建及推動，各地方政府到底努力了多\\n少？。」\\n\\n立委（國）蔣萬安說，「家不應該背不起，健全租屋市場是當前最迫切的課題，我希望每\\n一個人，都能夠在台北市安居樂業。」\\n\\n將角逐台北市長的國民黨立委蔣萬安，與瞄準桃園市的民眾黨立委賴香伶，都出席與會，\\n趁機大談自己的居住政策，搶攻年輕選票的意圖明顯。\\n\\n（民視新聞／葉霈萱、簡士峯 台北報導）\\n\\n\\n5.完整新聞連結 (或短網址)需放媒體原始連結，不可用轉載媒體連結:https://www.ftvnews.com.tw/news/detail/2022519P04M1--","5":"https://www.ptt.cc/bbs/Gossiping/M.1652955096.A.D46.html"},{"1":"Thu May 19 18:11:50 2022","2":"Re: [爆卦] 北市徐巧芯議員違停不給開單","3":"questioner","4":"廢話那麼多\\n\\n警持身上不是都有秘錄器嗎，拿出來啊\\n\\n有沒有官威，有沒有威脅\\n\\n秘錄器拿出來不就一槍斃命了！？\\n\\n你要鄉民幫你辦案，你證據要準備充足啊\\n拜託趕快秘錄器拿出來！！\\n\\n還是你跟你家主子一樣\\n\\n「我們疫苗都有買，只是還沒到」\\n\\n結果連個採購合約都不敢拿出來！！\\n\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1652955112.A.D60.html"},{"1":"Thu May 19 18:12:25 2022","2":"Re: [爆卦] 北市徐巧芯議員違停不給開單 (當事人回應)","3":"luckysmallsu","4":"這要看情況吧，基本上如果人在車上警察通常是趕人\\n\\n但我也有遇過人在車上警察還是開單的我也是摸著鼻子就認了\\n\\n但既然罰單都開了我就乾脆停滿兩小時再走\\n\\n對於違停車上沒人的開單沒啥好說\\n\\n只要有載人上下車多少都會違停，我才不信開車的人從來沒有在紅黃線臨停過\\n\\n但車上有人的情況下勸導(趕人)應該是比開單好\\n\\n警察的目的是要疏導交通還是開罰單？\\n\\n--再犯機率不是很高而是100% 我開車載朋友上下車確實是不管紅黃線臨停的","5":"https://www.ptt.cc/bbs/Gossiping/M.1652955147.A.C0D.html"},{"1":"Thu May 19 18:13:30 2022","2":"Re: [問卦] 糖尿病那麼可怕？","3":"francis98","4":"借串問一下\\n\\n我同事小孩 今年十歲\\n\\n前陣子肚子痛送醫發現血糖飆到400\\n\\n後來住院後醫生說確定是第一型糖尿病…\\n\\n所以往後的日子都要施打胰島素\\n\\n但爸媽阿公阿媽都沒有得過糖尿病\\n\\n想問這種機會高嗎？\\n\\n\\n\\n\\n引述《cesped866》之銘言: 我覺得更可怕的是，很多年輕人，: 完全不知道糖尿病有家族基因這件事情，: 你爸媽爺爺奶奶外公外婆有糖尿病，: 你比一般正常人得病的機率會高很多，: 我家裡前幾輩幾乎每個人都有，: 我兄弟姊妹也幾乎都得了，大家也才30初頭，: 害我現在飲食控制得非常嚴格，幾乎每天都去運動，: 甜點幾乎不吃，啥滷味炸雞太重口味也幾乎都不吃，: 那個得病就完全不可逆的，真的不是在開玩笑: ※ 引述《mason710 (我不是妳想像的那麼勇敢)》之銘言：: : https://i.imgur.com/hHsRO6r.jpg: : 最近在看重症死亡分析時: : 發現大概80-90%死亡案例都有糖尿病: : 是老年人80%都有糖尿病？: : 還是糖尿病會大幅影響免疫系統？: : 讓新冠肺炎發病5天死亡: : 小弟醫學小白一名: : 有沒有神人可以解釋一下？--","5":"https://www.ptt.cc/bbs/Gossiping/M.1652955212.A.ACE.html"},{"1":"Thu May 19 18:14:16 2022","2":"Re: [爆卦] 北市徐巧芯議員違停不給開單 (當事人回應)","3":"james7923","4":"其實能有更聰明的做法\\n\\n違規就默默地讓警察開單就好了\\n\\n罰一次又沒多少錢\\n\\n違停停車才罰$900\\n\\n最貴的併排停車也才$2400\\n\\n\\n身為公眾人物，違規被抓了，聰明的作法最好是低調再低調\\n\\n應該盡快罰錢了事，會比事情弄大還要輕鬆得多\\n\\n還在那邊問說「人在現場，不是勸導為主」、「之後我再問問看警察局相關規定」\\n\\n這樣反而壞事好嗎\\n\\n\\n當然最理想的情況是沒被認出來\\n\\n被認出來了也是趕快把罰單簽一簽\\n\\n乾脆一點被罰也不用在那邊浪費時間\\n\\n事後也不用為了這件事解釋一些有的沒的: 徐巧芯好像在開直播講違停開單的事。: 起手式都差不多就是為了違規的事道歉。: 接下來大概內容和下面原PO寫的差不多，只是她說她本來沒有要記員警是哪位，: 不過對方堅持不開單的舉動讓她覺得怪怪的，所以才去看了一下密錄器上員警的名字。: 然後密錄器的內容已經有警局其他的員警跟分局長看過了。。: 而且照徐的說法是1點多發生的事，3點就上PTT了。: 看來還是公開密錄影像給大家公評看看是鴿子的問題還是徐的問題。: ※ 引述《encoreb00124 (江帥)》之銘言：: : 關於這件事情，是因為叫做徐偉哲的員警，今天我在餐廳吃飯，車臨停在紅線，他要來開: : 單，我就出去給證件，並且詢問員警：「請問這種情況的一般如果人在現場，不是勸導嗎: : ？之前市警局是跟我說民眾人在現場，以勸導為主，不過沒關係，可能我沒弄清楚，之後: : 我再問問看警察局相關規定，請你開單吧！」: : 員警突然說自己不願意開單了。我就說：「沒關係你趕快開，不然這樣我們也很難做，拜: : 託你！」，講了四次五次，但他還是不願意開單，我只好離開。正打算詢問市警局，這種: : 情況到底是怎麼回事，結果該員警就跑去八卦版「爆料」了。: : 我會請市警局釣出監視器，並和該員警對質，是否我五度請他開單但他不願意。: : 以上說明（抱歉本來應該直接八卦回文，但我被水桶了只好發臉書，歡迎有帳號的人幫我: : 回）: : https://www.facebook.com/HsuChiaoHsin: : 巧芯吃飯看到鴿子走出去說人在旁: : 偉哲被問是不是該勸導就五度堅持瀆職: : dochi?: : 我只覺得巧芯好像變胖了不少--誰說問一下犯法了 我只是覺得不問反而是比較聰明的作法我以為正常人是會盡量不違規 啊抱歉我忘了這裡是台灣","5":"https://www.ptt.cc/bbs/Gossiping/M.1652955259.A.75F.html"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="sourceCode" id="cb57"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb57-1"><a href="creating-corpus.html#cb57-1" aria-hidden="true" tabindex="-1"></a>PTT_data<span class="sc">$</span>push <span class="sc">%&gt;%</span> head</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["tag"],"name":[1],"type":["chr"],"align":["left"]},{"label":["author"],"name":[2],"type":["chr"],"align":["left"]},{"label":["content"],"name":[3],"type":["chr"],"align":["left"]},{"label":["datetime"],"name":[4],"type":["chr"],"align":["left"]},{"label":["url"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"推","2":"MK47","3":": 確實 你根本無敵","4":"203.217.116.152 05/19 18:11","5":"https://www.ptt.cc/bbs/Gossiping/M.1652955063.A.04B.html"},{"1":"推","2":"fack3170","3":": 有可能哦","4":"110.26.192.44 05/19 18:11","5":"https://www.ptt.cc/bbs/Gossiping/M.1652955063.A.04B.html"},{"1":"推","2":"l11111111","3":": 我也很懷疑","4":"42.72.44.221 05/19 18:11","5":"https://www.ptt.cc/bbs/Gossiping/M.1652955063.A.04B.html"},{"1":"噓","2":"jjjjjjs","3":": 去 買 快篩 180","4":"101.137.76.91 05/19 18:11","5":"https://www.ptt.cc/bbs/Gossiping/M.1652955063.A.04B.html"},{"1":"噓","2":"love0504","3":": 不驗就不知道了==","4":"111.249.38.226 05/19 18:11","5":"https://www.ptt.cc/bbs/Gossiping/M.1652955063.A.04B.html"},{"1":"→","2":"fenderrb","3":": 會。","4":"101.12.90.142 05/19 18:12","5":"https://www.ptt.cc/bbs/Gossiping/M.1652955063.A.04B.html"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="sourceCode" id="cb58"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb58-1"><a href="creating-corpus.html#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co"># corpus size</span></span>
<span id="cb58-2"><a href="creating-corpus.html#cb58-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-3"><a href="creating-corpus.html#cb58-3" aria-hidden="true" tabindex="-1"></a>PTT_data<span class="sc">$</span>article<span class="sc">$</span>content <span class="sc">%&gt;%</span> nchar <span class="sc">%&gt;%</span> sum</span></code></pre></div>
<pre class="Rout"><code>[1] 21638</code></pre>
<div class="exercise">
<p><span id="exr:unlabeled-div-1" class="exercise"><strong>Exercise 3.3  </strong></span>Please choose a website (other than PTT) you are interested in and demonstrate how you can use R to retrieve textual data from the site. The final scraped text collection could be from only one static web page. The purpose of this exercise is to show that you know how to parse the HTML structure of the web page and retrieve the data you need from the website.</p>
</div>
<!-- ```{exercise} -->
<!-- Now you should have basic ideas how we can crawl data from the Internet. Sometimes, we not only collect texts but statistics as well. Please try to collect the statistics of COVID-19 outbreak from the [Wikipedia 2019–20 coronavirus pandemic](https://en.wikipedia.org/wiki/2019%E2%80%9320_coronavirus_pandemic). Specifically, write a short script to automatically get the table included in the Wiki page, where the numbers of confirmed cases, deaths, and recoveries for each country are recorded. Your script should output a data frame as follows. Please name the columns of your data frame as follows as well. (Note: The numbers may vary because of the constant updates of the wiki page.) [*needs updating*] -->
<!-- ``` -->

</div>
</div>
<h3> References</h3>
<div id="refs" class="references csl-bib-body hanging-indent" line-spacing="2">
<div id="ref-munzert2014" class="csl-entry">
Munzert, S., Rubba, C., Meißner, P., &amp; Nyhuis, D. (2014). <em>Automated data collection with <span>R</span>: A practical guide to web scraping and text mining</em>. John Wiley &amp; Sons.
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="r-fundamentals.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="corpus-analysis-a-start.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
