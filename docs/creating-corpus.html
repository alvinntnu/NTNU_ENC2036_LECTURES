<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Creating Corpus | Corpus Linguistics</title>
  <meta name="description" content="ENC2036 Course material first edition" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Creating Corpus | Corpus Linguistics" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="ENC2036 Course material first edition" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Creating Corpus | Corpus Linguistics" />
  
  <meta name="twitter:description" content="ENC2036 Course material first edition" />
  

<meta name="author" content="Alvin Cheng-Hsien Chen" />


<meta name="date" content="2022-03-04" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="r-fundamentals.html"/>
<link rel="next" href="corpus-analysis-a-start.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="libs/pagedtable-1.1/js/pagedtable.js"></script>
<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style-new.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://alvinntnu.github.io/NTNU_ENC2036/"><img src="images/alerts/home.svg" height = "20" width = "20"> Course Website</a></li>
<li><a href="./"><img src="images/alerts/book-solid.svg" height = "20" width = "20"> ENC 2036 Corpus Linguistics</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#course-objective"><i class="fa fa-check"></i>Course Objective</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#reading-materials"><i class="fa fa-check"></i>Reading Materials</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#course-requirement"><i class="fa fa-check"></i>Course Requirement</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#exams"><i class="fa fa-check"></i>Exams</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#course-website"><i class="fa fa-check"></i>Course Website</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#contributing-to-the-lecture-notes"><i class="fa fa-check"></i>Contributing to the Lecture Notes</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#course-demo-data"><i class="fa fa-check"></i>Course Demo Data</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#academic-integrity"><i class="fa fa-check"></i>Academic Integrity</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#house-keeping-guidelines"><i class="fa fa-check"></i>House-keeping Guidelines</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#necessary-packages"><i class="fa fa-check"></i>Necessary Packages</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#environment-settings"><i class="fa fa-check"></i>Environment Settings</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="what-is-corpus-linguistics.html"><a href="what-is-corpus-linguistics.html"><i class="fa fa-check"></i><b>1</b> What is Corpus Linguistics?</a>
<ul>
<li class="chapter" data-level="1.1" data-path="what-is-corpus-linguistics.html"><a href="what-is-corpus-linguistics.html#why-do-we-need-corpus-data"><i class="fa fa-check"></i><b>1.1</b> Why do we need corpus data?</a></li>
<li class="chapter" data-level="1.2" data-path="what-is-corpus-linguistics.html"><a href="what-is-corpus-linguistics.html#what-is-corpus"><i class="fa fa-check"></i><b>1.2</b> What is corpus?</a></li>
<li class="chapter" data-level="1.3" data-path="what-is-corpus-linguistics.html"><a href="what-is-corpus-linguistics.html#what-is-a-corpus-linguistic-study"><i class="fa fa-check"></i><b>1.3</b> What is a corpus linguistic study?</a></li>
<li class="chapter" data-level="1.4" data-path="what-is-corpus-linguistics.html"><a href="what-is-corpus-linguistics.html#additional-information-on-cl"><i class="fa fa-check"></i><b>1.4</b> Additional Information on CL</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="r-fundamentals.html"><a href="r-fundamentals.html"><i class="fa fa-check"></i><b>2</b> R Fundamentals</a>
<ul>
<li class="chapter" data-level="" data-path="r-fundamentals.html"><a href="r-fundamentals.html#a-quick-note"><i class="fa fa-check"></i>A Quick Note</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="creating-corpus.html"><a href="creating-corpus.html"><i class="fa fa-check"></i><b>3</b> Creating Corpus</a>
<ul>
<li class="chapter" data-level="3.1" data-path="creating-corpus.html"><a href="creating-corpus.html#html-structure"><i class="fa fa-check"></i><b>3.1</b> HTML Structure</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="creating-corpus.html"><a href="creating-corpus.html#html-syntax"><i class="fa fa-check"></i><b>3.1.1</b> HTML Syntax</a></li>
<li class="chapter" data-level="3.1.2" data-path="creating-corpus.html"><a href="creating-corpus.html#tags-and-attributes"><i class="fa fa-check"></i><b>3.1.2</b> Tags and Attributes</a></li>
<li class="chapter" data-level="3.1.3" data-path="creating-corpus.html"><a href="creating-corpus.html#css"><i class="fa fa-check"></i><b>3.1.3</b> CSS</a></li>
<li class="chapter" data-level="3.1.4" data-path="creating-corpus.html"><a href="creating-corpus.html#html-css-javascript"><i class="fa fa-check"></i><b>3.1.4</b> HTML + CSS ( + JavaScript)</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="creating-corpus.html"><a href="creating-corpus.html#web-crawling"><i class="fa fa-check"></i><b>3.2</b> Web Crawling</a></li>
<li class="chapter" data-level="3.3" data-path="creating-corpus.html"><a href="creating-corpus.html#functional-programming"><i class="fa fa-check"></i><b>3.3</b> Functional Programming</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="creating-corpus.html"><a href="creating-corpus.html#extract_art_links"><i class="fa fa-check"></i><b>3.3.1</b> <code>extract_art_links()</code></a></li>
<li class="chapter" data-level="3.3.2" data-path="creating-corpus.html"><a href="creating-corpus.html#extract_article_push_tables"><i class="fa fa-check"></i><b>3.3.2</b> <code>extract_article_push_tables()</code></a></li>
<li class="chapter" data-level="3.3.3" data-path="creating-corpus.html"><a href="creating-corpus.html#streamline-the-codes"><i class="fa fa-check"></i><b>3.3.3</b> Streamline the Codes</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="creating-corpus.html"><a href="creating-corpus.html#save-corpus"><i class="fa fa-check"></i><b>3.4</b> Save Corpus</a></li>
<li class="chapter" data-level="3.5" data-path="creating-corpus.html"><a href="creating-corpus.html#additional-resources"><i class="fa fa-check"></i><b>3.5</b> Additional Resources</a></li>
<li class="chapter" data-level="3.6" data-path="creating-corpus.html"><a href="creating-corpus.html#final-remarks"><i class="fa fa-check"></i><b>3.6</b> Final Remarks</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="corpus-analysis-a-start.html"><a href="corpus-analysis-a-start.html"><i class="fa fa-check"></i><b>4</b> Corpus Analysis: A Start</a>
<ul>
<li class="chapter" data-level="4.1" data-path="corpus-analysis-a-start.html"><a href="corpus-analysis-a-start.html#installing-quanteda"><i class="fa fa-check"></i><b>4.1</b> Installing <code>quanteda</code></a></li>
<li class="chapter" data-level="4.2" data-path="corpus-analysis-a-start.html"><a href="corpus-analysis-a-start.html#building-a-corpus-from-character-vector"><i class="fa fa-check"></i><b>4.2</b> Building a <code>corpus</code> from character vector</a></li>
<li class="chapter" data-level="4.3" data-path="corpus-analysis-a-start.html"><a href="corpus-analysis-a-start.html#keyword-in-context-kwic"><i class="fa fa-check"></i><b>4.3</b> Keyword-in-Context (KWIC)</a></li>
<li class="chapter" data-level="4.4" data-path="corpus-analysis-a-start.html"><a href="corpus-analysis-a-start.html#kwic-with-regular-expressions"><i class="fa fa-check"></i><b>4.4</b> KWIC with Regular Expressions</a></li>
<li class="chapter" data-level="4.5" data-path="corpus-analysis-a-start.html"><a href="corpus-analysis-a-start.html#tidy-text-format-of-the-corpus"><i class="fa fa-check"></i><b>4.5</b> Tidy Text Format of the Corpus</a></li>
<li class="chapter" data-level="4.6" data-path="corpus-analysis-a-start.html"><a href="corpus-analysis-a-start.html#processing-flowchart"><i class="fa fa-check"></i><b>4.6</b> Processing Flowchart</a></li>
<li class="chapter" data-level="4.7" data-path="corpus-analysis-a-start.html"><a href="corpus-analysis-a-start.html#frequency-lists"><i class="fa fa-check"></i><b>4.7</b> Frequency Lists</a>
<ul>
<li class="chapter" data-level="4.7.1" data-path="corpus-analysis-a-start.html"><a href="corpus-analysis-a-start.html#word-unigram"><i class="fa fa-check"></i><b>4.7.1</b> Word (Unigram)</a></li>
<li class="chapter" data-level="4.7.2" data-path="corpus-analysis-a-start.html"><a href="corpus-analysis-a-start.html#bigrams"><i class="fa fa-check"></i><b>4.7.2</b> Bigrams</a></li>
<li class="chapter" data-level="4.7.3" data-path="corpus-analysis-a-start.html"><a href="corpus-analysis-a-start.html#ngrams-lexical-bundles"><i class="fa fa-check"></i><b>4.7.3</b> Ngrams (Lexical Bundles)</a></li>
<li class="chapter" data-level="4.7.4" data-path="corpus-analysis-a-start.html"><a href="corpus-analysis-a-start.html#frequency-and-dispersion"><i class="fa fa-check"></i><b>4.7.4</b> Frequency and Dispersion</a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="corpus-analysis-a-start.html"><a href="corpus-analysis-a-start.html#word-cloud"><i class="fa fa-check"></i><b>4.8</b> Word Cloud</a></li>
<li class="chapter" data-level="4.9" data-path="corpus-analysis-a-start.html"><a href="corpus-analysis-a-start.html#collocations"><i class="fa fa-check"></i><b>4.9</b> Collocations</a>
<ul>
<li class="chapter" data-level="4.9.1" data-path="corpus-analysis-a-start.html"><a href="corpus-analysis-a-start.html#cooccurrence-table-and-observed-frequencies"><i class="fa fa-check"></i><b>4.9.1</b> Cooccurrence Table and Observed Frequencies</a></li>
<li class="chapter" data-level="4.9.2" data-path="corpus-analysis-a-start.html"><a href="corpus-analysis-a-start.html#expected-frequencies"><i class="fa fa-check"></i><b>4.9.2</b> Expected Frequencies</a></li>
<li class="chapter" data-level="4.9.3" data-path="corpus-analysis-a-start.html"><a href="corpus-analysis-a-start.html#association-measures"><i class="fa fa-check"></i><b>4.9.3</b> Association Measures</a></li>
</ul></li>
<li class="chapter" data-level="4.10" data-path="corpus-analysis-a-start.html"><a href="corpus-analysis-a-start.html#constructions"><i class="fa fa-check"></i><b>4.10</b> Constructions</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="parts-of-speech-tagging.html"><a href="parts-of-speech-tagging.html"><i class="fa fa-check"></i><b>5</b> Parts-of-Speech Tagging</a>
<ul>
<li class="chapter" data-level="5.1" data-path="parts-of-speech-tagging.html"><a href="parts-of-speech-tagging.html#installing-the-package"><i class="fa fa-check"></i><b>5.1</b> Installing the Package</a></li>
<li class="chapter" data-level="5.2" data-path="parts-of-speech-tagging.html"><a href="parts-of-speech-tagging.html#quick-overview"><i class="fa fa-check"></i><b>5.2</b> Quick Overview</a></li>
<li class="chapter" data-level="5.3" data-path="parts-of-speech-tagging.html"><a href="parts-of-speech-tagging.html#working-pipeline"><i class="fa fa-check"></i><b>5.3</b> Working Pipeline</a></li>
<li class="chapter" data-level="5.4" data-path="parts-of-speech-tagging.html"><a href="parts-of-speech-tagging.html#parsing-your-texts"><i class="fa fa-check"></i><b>5.4</b> Parsing Your Texts</a></li>
<li class="chapter" data-level="5.5" data-path="parts-of-speech-tagging.html"><a href="parts-of-speech-tagging.html#metalingusitic-analysis"><i class="fa fa-check"></i><b>5.5</b> Metalingusitic Analysis</a></li>
<li class="chapter" data-level="5.6" data-path="parts-of-speech-tagging.html"><a href="parts-of-speech-tagging.html#construction-analysis"><i class="fa fa-check"></i><b>5.6</b> Construction Analysis</a></li>
<li class="chapter" data-level="5.7" data-path="parts-of-speech-tagging.html"><a href="parts-of-speech-tagging.html#issues-on-pattern-retrieval"><i class="fa fa-check"></i><b>5.7</b> Issues on Pattern Retrieval</a></li>
<li class="chapter" data-level="5.8" data-path="parts-of-speech-tagging.html"><a href="parts-of-speech-tagging.html#saving-pos-tagged-texts"><i class="fa fa-check"></i><b>5.8</b> Saving POS-tagged Texts</a></li>
<li class="chapter" data-level="5.9" data-path="parts-of-speech-tagging.html"><a href="parts-of-speech-tagging.html#finalize-spacy"><i class="fa fa-check"></i><b>5.9</b> Finalize spaCy</a></li>
<li class="chapter" data-level="5.10" data-path="parts-of-speech-tagging.html"><a href="parts-of-speech-tagging.html#notes-on-chinese-processing"><i class="fa fa-check"></i><b>5.10</b> Notes on Chinese Processing</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="keyword-analysis.html"><a href="keyword-analysis.html"><i class="fa fa-check"></i><b>6</b> Keyword Analysis</a>
<ul>
<li class="chapter" data-level="6.1" data-path="keyword-analysis.html"><a href="keyword-analysis.html#about-keywords"><i class="fa fa-check"></i><b>6.1</b> About Keywords</a></li>
<li class="chapter" data-level="6.2" data-path="keyword-analysis.html"><a href="keyword-analysis.html#statistics-for-keyness"><i class="fa fa-check"></i><b>6.2</b> Statistics for Keyness</a></li>
<li class="chapter" data-level="6.3" data-path="keyword-analysis.html"><a href="keyword-analysis.html#implementation"><i class="fa fa-check"></i><b>6.3</b> Implementation</a></li>
<li class="chapter" data-level="6.4" data-path="keyword-analysis.html"><a href="keyword-analysis.html#tidy-data"><i class="fa fa-check"></i><b>6.4</b> Tidy Data</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="keyword-analysis.html"><a href="keyword-analysis.html#an-long-to-wide-example"><i class="fa fa-check"></i><b>6.4.1</b> An Long-to-Wide Example</a></li>
<li class="chapter" data-level="6.4.2" data-path="keyword-analysis.html"><a href="keyword-analysis.html#a-wide-to-long-example"><i class="fa fa-check"></i><b>6.4.2</b> A Wide-to-Long Example</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="keyword-analysis.html"><a href="keyword-analysis.html#word-frequency-transformation"><i class="fa fa-check"></i><b>6.5</b> Word Frequency Transformation</a></li>
<li class="chapter" data-level="6.6" data-path="keyword-analysis.html"><a href="keyword-analysis.html#computing-keynesss"><i class="fa fa-check"></i><b>6.6</b> Computing Keynesss</a></li>
<li class="chapter" data-level="6.7" data-path="keyword-analysis.html"><a href="keyword-analysis.html#conclusion"><i class="fa fa-check"></i><b>6.7</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html"><i class="fa fa-check"></i><b>7</b> Chinese Text Processing</a>
<ul>
<li class="chapter" data-level="7.1" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#chinese-word-segmenter-jiebar"><i class="fa fa-check"></i><b>7.1</b> Chinese Word Segmenter <code>jiebaR</code></a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#start"><i class="fa fa-check"></i><b>7.1.1</b> Start</a></li>
<li class="chapter" data-level="7.1.2" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#parameters-setting"><i class="fa fa-check"></i><b>7.1.2</b> Parameters Setting</a></li>
<li class="chapter" data-level="7.1.3" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#user-defined-dictionary"><i class="fa fa-check"></i><b>7.1.3</b> User-defined dictionary</a></li>
<li class="chapter" data-level="7.1.4" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#stopwords"><i class="fa fa-check"></i><b>7.1.4</b> Stopwords</a></li>
<li class="chapter" data-level="7.1.5" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#pos-tagging"><i class="fa fa-check"></i><b>7.1.5</b> POS Tagging</a></li>
<li class="chapter" data-level="7.1.6" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#default-word-lists-in-jiebar"><i class="fa fa-check"></i><b>7.1.6</b> Default Word Lists in JiebaR</a></li>
<li class="chapter" data-level="7.1.7" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#reminders"><i class="fa fa-check"></i><b>7.1.7</b> Reminders</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#chinese-text-analytics-pipeline"><i class="fa fa-check"></i><b>7.2</b> Chinese Text Analytics Pipeline</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#creating-a-corpus-object"><i class="fa fa-check"></i><b>7.2.1</b> Creating a Corpus Object</a></li>
<li class="chapter" data-level="7.2.2" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#tidy-structure-framework"><i class="fa fa-check"></i><b>7.2.2</b> Tidy Structure Framework</a></li>
<li class="chapter" data-level="7.2.3" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#quanteda-framework"><i class="fa fa-check"></i><b>7.2.3</b> <code>Quanteda</code> Framework</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#comparing-tokenization-methods"><i class="fa fa-check"></i><b>7.3</b> Comparing Tokenization Methods</a></li>
<li class="chapter" data-level="7.4" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#data"><i class="fa fa-check"></i><b>7.4</b> Data</a></li>
<li class="chapter" data-level="7.5" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#loading-text-data"><i class="fa fa-check"></i><b>7.5</b> Loading Text Data</a></li>
<li class="chapter" data-level="7.6" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#quantedatokens-vs.-jiebarsegment"><i class="fa fa-check"></i><b>7.6</b> <code>quanteda::tokens()</code> vs. <code>jiebaR::segment()</code></a></li>
<li class="chapter" data-level="7.7" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#case-study-1-word-frequency-and-wordcloud"><i class="fa fa-check"></i><b>7.7</b> Case Study 1: Word Frequency and Wordcloud</a></li>
<li class="chapter" data-level="7.8" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#case-study-2-patterns"><i class="fa fa-check"></i><b>7.8</b> Case Study 2: Patterns</a>
<ul>
<li class="chapter" data-level="7.8.1" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#bei-construction"><i class="fa fa-check"></i><b>7.8.1</b> BEI Construction</a></li>
</ul></li>
<li class="chapter" data-level="7.9" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#case-study-3-lexical-bundles"><i class="fa fa-check"></i><b>7.9</b> Case Study 3: Lexical Bundles</a>
<ul>
<li class="chapter" data-level="7.9.1" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#n-grams-extraction"><i class="fa fa-check"></i><b>7.9.1</b> N-grams Extraction</a></li>
<li class="chapter" data-level="7.9.2" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#frequency-and-dispersion-1"><i class="fa fa-check"></i><b>7.9.2</b> Frequency and Dispersion</a></li>
</ul></li>
<li class="chapter" data-level="7.10" data-path="chinese-text-processing.html"><a href="chinese-text-processing.html#afterwords"><i class="fa fa-check"></i><b>7.10</b> Afterwords</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="constructions-and-idioms.html"><a href="constructions-and-idioms.html"><i class="fa fa-check"></i><b>8</b> Constructions and Idioms</a>
<ul>
<li class="chapter" data-level="8.1" data-path="constructions-and-idioms.html"><a href="constructions-and-idioms.html#collostruction"><i class="fa fa-check"></i><b>8.1</b> Collostruction</a></li>
<li class="chapter" data-level="8.2" data-path="constructions-and-idioms.html"><a href="constructions-and-idioms.html#corpus"><i class="fa fa-check"></i><b>8.2</b> Corpus</a></li>
<li class="chapter" data-level="8.3" data-path="constructions-and-idioms.html"><a href="constructions-and-idioms.html#word-segmentation"><i class="fa fa-check"></i><b>8.3</b> Word Segmentation</a></li>
<li class="chapter" data-level="8.4" data-path="constructions-and-idioms.html"><a href="constructions-and-idioms.html#extract-constructions"><i class="fa fa-check"></i><b>8.4</b> Extract Constructions</a></li>
<li class="chapter" data-level="8.5" data-path="constructions-and-idioms.html"><a href="constructions-and-idioms.html#distributional-information-needed-for-ca"><i class="fa fa-check"></i><b>8.5</b> Distributional Information Needed for CA</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="constructions-and-idioms.html"><a href="constructions-and-idioms.html#word-frequency-list"><i class="fa fa-check"></i><b>8.5.1</b> Word Frequency List</a></li>
<li class="chapter" data-level="8.5.2" data-path="constructions-and-idioms.html"><a href="constructions-and-idioms.html#joint-frequencies"><i class="fa fa-check"></i><b>8.5.2</b> Joint Frequencies</a></li>
<li class="chapter" data-level="8.5.3" data-path="constructions-and-idioms.html"><a href="constructions-and-idioms.html#input-for-coll.analysis.r"><i class="fa fa-check"></i><b>8.5.3</b> Input for <code>coll.analysis.r</code></a></li>
<li class="chapter" data-level="8.5.4" data-path="constructions-and-idioms.html"><a href="constructions-and-idioms.html#other-information"><i class="fa fa-check"></i><b>8.5.4</b> Other Information</a></li>
<li class="chapter" data-level="8.5.5" data-path="constructions-and-idioms.html"><a href="constructions-and-idioms.html#create-output-file"><i class="fa fa-check"></i><b>8.5.5</b> Create Output File</a></li>
<li class="chapter" data-level="8.5.6" data-path="constructions-and-idioms.html"><a href="constructions-and-idioms.html#run-coll.analysis.r"><i class="fa fa-check"></i><b>8.5.6</b> Run <code>coll.analysis.r</code></a></li>
<li class="chapter" data-level="8.5.7" data-path="constructions-and-idioms.html"><a href="constructions-and-idioms.html#interpretations"><i class="fa fa-check"></i><b>8.5.7</b> Interpretations</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="constructions-and-idioms.html"><a href="constructions-and-idioms.html#exercises"><i class="fa fa-check"></i><b>8.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="ckiptagger.html"><a href="ckiptagger.html"><i class="fa fa-check"></i><b>9</b> CKIP Tagger</a>
<ul>
<li class="chapter" data-level="9.1" data-path="ckiptagger.html"><a href="ckiptagger.html#installation"><i class="fa fa-check"></i><b>9.1</b> Installation</a></li>
<li class="chapter" data-level="9.2" data-path="ckiptagger.html"><a href="ckiptagger.html#download-the-model-files"><i class="fa fa-check"></i><b>9.2</b> Download the Model Files</a></li>
<li class="chapter" data-level="9.3" data-path="ckiptagger.html"><a href="ckiptagger.html#r-python-communication"><i class="fa fa-check"></i><b>9.3</b> R-Python Communication</a></li>
<li class="chapter" data-level="9.4" data-path="ckiptagger.html"><a href="ckiptagger.html#word-segmentation-in-r"><i class="fa fa-check"></i><b>9.4</b> Word Segmentation in R</a></li>
<li class="chapter" data-level="9.5" data-path="ckiptagger.html"><a href="ckiptagger.html#r-environment-setting"><i class="fa fa-check"></i><b>9.5</b> R Environment Setting</a></li>
<li class="chapter" data-level="9.6" data-path="ckiptagger.html"><a href="ckiptagger.html#creating-conda-environment-for-ckiptagger"><i class="fa fa-check"></i><b>9.6</b> Creating Conda Environment for <code>ckiptagger</code></a></li>
<li class="chapter" data-level="9.7" data-path="ckiptagger.html"><a href="ckiptagger.html#initialization"><i class="fa fa-check"></i><b>9.7</b> Initialization</a></li>
<li class="chapter" data-level="9.8" data-path="ckiptagger.html"><a href="ckiptagger.html#segmenting-texts"><i class="fa fa-check"></i><b>9.8</b> Segmenting Texts</a></li>
<li class="chapter" data-level="9.9" data-path="ckiptagger.html"><a href="ckiptagger.html#define-own-dictionary"><i class="fa fa-check"></i><b>9.9</b> Define Own Dictionary</a></li>
<li class="chapter" data-level="9.10" data-path="ckiptagger.html"><a href="ckiptagger.html#beyond-word-boundaries"><i class="fa fa-check"></i><b>9.10</b> Beyond Word Boundaries</a></li>
<li class="chapter" data-level="9.11" data-path="ckiptagger.html"><a href="ckiptagger.html#tidy-up-the-results"><i class="fa fa-check"></i><b>9.11</b> Tidy Up the Results</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="structured-corpus.html"><a href="structured-corpus.html"><i class="fa fa-check"></i><b>10</b> Structured Corpus</a>
<ul>
<li class="chapter" data-level="10.1" data-path="structured-corpus.html"><a href="structured-corpus.html#nccu-spoken-mandarin"><i class="fa fa-check"></i><b>10.1</b> NCCU Spoken Mandarin</a></li>
<li class="chapter" data-level="10.2" data-path="structured-corpus.html"><a href="structured-corpus.html#childes-format"><i class="fa fa-check"></i><b>10.2</b> CHILDES Format</a></li>
<li class="chapter" data-level="10.3" data-path="structured-corpus.html"><a href="structured-corpus.html#loading-the-corpus"><i class="fa fa-check"></i><b>10.3</b> Loading the Corpus</a></li>
<li class="chapter" data-level="10.4" data-path="structured-corpus.html"><a href="structured-corpus.html#from-text-based-to-turn-based-df"><i class="fa fa-check"></i><b>10.4</b> From Text-based to Turn-based DF</a></li>
<li class="chapter" data-level="10.5" data-path="structured-corpus.html"><a href="structured-corpus.html#metadata-vs.-utterances"><i class="fa fa-check"></i><b>10.5</b> Metadata vs. Utterances</a></li>
<li class="chapter" data-level="10.6" data-path="structured-corpus.html"><a href="structured-corpus.html#word-based-df-and-frequency-list"><i class="fa fa-check"></i><b>10.6</b> Word-based DF and Frequency List</a></li>
<li class="chapter" data-level="10.7" data-path="structured-corpus.html"><a href="structured-corpus.html#concordances"><i class="fa fa-check"></i><b>10.7</b> Concordances</a></li>
<li class="chapter" data-level="10.8" data-path="structured-corpus.html"><a href="structured-corpus.html#collocations-bigrams"><i class="fa fa-check"></i><b>10.8</b> Collocations (Bigrams)</a></li>
<li class="chapter" data-level="10.9" data-path="structured-corpus.html"><a href="structured-corpus.html#n-grams-lexical-bundles"><i class="fa fa-check"></i><b>10.9</b> N-grams (Lexical Bundles)</a></li>
<li class="chapter" data-level="10.10" data-path="structured-corpus.html"><a href="structured-corpus.html#connecting-spid-to-metadata"><i class="fa fa-check"></i><b>10.10</b> Connecting SPID to Metadata</a></li>
<li class="chapter" data-level="10.11" data-path="structured-corpus.html"><a href="structured-corpus.html#corpus-headers"><i class="fa fa-check"></i><b>10.11</b> Corpus Headers</a></li>
<li class="chapter" data-level="10.12" data-path="structured-corpus.html"><a href="structured-corpus.html#sociolinguistic-analyses"><i class="fa fa-check"></i><b>10.12</b> Sociolinguistic Analyses</a>
<ul>
<li class="chapter" data-level="10.12.1" data-path="structured-corpus.html"><a href="structured-corpus.html#check-bigrams-distribution-by-age-groups"><i class="fa fa-check"></i><b>10.12.1</b> Check Bigrams Distribution By Age Groups</a></li>
<li class="chapter" data-level="10.12.2" data-path="structured-corpus.html"><a href="structured-corpus.html#numbers-of-bigrams-above-cut-off-by-age"><i class="fa fa-check"></i><b>10.12.2</b> Numbers of Bigrams above Cut-off by Age</a></li>
<li class="chapter" data-level="10.12.3" data-path="structured-corpus.html"><a href="structured-corpus.html#bigram-word-clouds-by-age"><i class="fa fa-check"></i><b>10.12.3</b> Bigram Word clouds by Age</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="xml.html"><a href="xml.html"><i class="fa fa-check"></i><b>11</b> XML</a>
<ul>
<li class="chapter" data-level="11.1" data-path="xml.html"><a href="xml.html#bnc-spoken-2014"><i class="fa fa-check"></i><b>11.1</b> BNC Spoken 2014</a></li>
<li class="chapter" data-level="11.2" data-path="xml.html"><a href="xml.html#process-the-whole-directory-of-bnc2014-sample"><i class="fa fa-check"></i><b>11.2</b> Process the Whole Directory of BNC2014 Sample</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="xml.html"><a href="xml.html#define-function"><i class="fa fa-check"></i><b>11.2.1</b> Define Function</a></li>
<li class="chapter" data-level="11.2.2" data-path="xml.html"><a href="xml.html#process-the-all-files-in-the-directory"><i class="fa fa-check"></i><b>11.2.2</b> Process the all files in the Directory</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="xml.html"><a href="xml.html#metadata"><i class="fa fa-check"></i><b>11.3</b> Metadata</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="xml.html"><a href="xml.html#text-metadata"><i class="fa fa-check"></i><b>11.3.1</b> Text Metadata</a></li>
<li class="chapter" data-level="11.3.2" data-path="xml.html"><a href="xml.html#speaker-metadata"><i class="fa fa-check"></i><b>11.3.2</b> Speaker Metadata</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="xml.html"><a href="xml.html#bnc2014-for-socio-linguistic-variation"><i class="fa fa-check"></i><b>11.4</b> BNC2014 for Socio-linguistic Variation</a></li>
<li class="chapter" data-level="11.5" data-path="xml.html"><a href="xml.html#lexical-analysis"><i class="fa fa-check"></i><b>11.5</b> Lexical Analysis</a>
<ul>
<li class="chapter" data-level="11.5.1" data-path="xml.html"><a href="xml.html#word-frequency-vs.-gender"><i class="fa fa-check"></i><b>11.5.1</b> Word Frequency vs. Gender</a></li>
<li class="chapter" data-level="11.5.2" data-path="xml.html"><a href="xml.html#frequency-and-keyword-analysis"><i class="fa fa-check"></i><b>11.5.2</b> Frequency and Keyword Analysis</a></li>
</ul></li>
<li class="chapter" data-level="11.6" data-path="xml.html"><a href="xml.html#constructions-analysis"><i class="fa fa-check"></i><b>11.6</b> Constructions Analysis</a>
<ul>
<li class="chapter" data-level="11.6.1" data-path="xml.html"><a href="xml.html#from-token-based-to-turn-based-data-frame"><i class="fa fa-check"></i><b>11.6.1</b> From Token-based to Turn-based Data Frame</a></li>
<li class="chapter" data-level="11.6.2" data-path="xml.html"><a href="xml.html#degree-adv-adj"><i class="fa fa-check"></i><b>11.6.2</b> Degree ADV + ADJ</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="vector-space-representation.html"><a href="vector-space-representation.html"><i class="fa fa-check"></i><b>12</b> Vector Space Representation</a>
<ul>
<li class="chapter" data-level="12.1" data-path="vector-space-representation.html"><a href="vector-space-representation.html#distributional-semantics"><i class="fa fa-check"></i><b>12.1</b> Distributional Semantics</a></li>
<li class="chapter" data-level="12.2" data-path="vector-space-representation.html"><a href="vector-space-representation.html#vector-space-semantics-parameters"><i class="fa fa-check"></i><b>12.2</b> Vector Space Semantics: Parameters</a></li>
<li class="chapter" data-level="12.3" data-path="vector-space-representation.html"><a href="vector-space-representation.html#vector-space-model-for-documents"><i class="fa fa-check"></i><b>12.3</b> Vector Space Model for Documents</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="vector-space-representation.html"><a href="vector-space-representation.html#data-processing-flowchart"><i class="fa fa-check"></i><b>12.3.1</b> Data Processing Flowchart</a></li>
<li class="chapter" data-level="12.3.2" data-path="vector-space-representation.html"><a href="vector-space-representation.html#document-feature-matrix-dfm"><i class="fa fa-check"></i><b>12.3.2</b> Document-Feature Matrix (<code>dfm</code>)</a></li>
<li class="chapter" data-level="12.3.3" data-path="vector-space-representation.html"><a href="vector-space-representation.html#corpus-1"><i class="fa fa-check"></i><b>12.3.3</b> Corpus</a></li>
<li class="chapter" data-level="12.3.4" data-path="vector-space-representation.html"><a href="vector-space-representation.html#document-feature-matrix-dfm-1"><i class="fa fa-check"></i><b>12.3.4</b> Document-Feature Matrix (<code>dfm</code>)</a></li>
<li class="chapter" data-level="12.3.5" data-path="vector-space-representation.html"><a href="vector-space-representation.html#distance-similarity-metrics"><i class="fa fa-check"></i><b>12.3.5</b> Distributional Hypothesis and Distance/Similarity Metrics</a></li>
<li class="chapter" data-level="12.3.6" data-path="vector-space-representation.html"><a href="vector-space-representation.html#multidimensiona-space"><i class="fa fa-check"></i><b>12.3.6</b> Multidimensiona Space</a></li>
<li class="chapter" data-level="12.3.7" data-path="vector-space-representation.html"><a href="vector-space-representation.html#vector-semantics-considerations"><i class="fa fa-check"></i><b>12.3.7</b> Vector Semantics Considerations</a></li>
<li class="chapter" data-level="12.3.8" data-path="vector-space-representation.html"><a href="vector-space-representation.html#feature-selection"><i class="fa fa-check"></i><b>12.3.8</b> Feature Selection</a></li>
<li class="chapter" data-level="12.3.9" data-path="vector-space-representation.html"><a href="vector-space-representation.html#exploratory-analysis-of-dfm"><i class="fa fa-check"></i><b>12.3.9</b> Exploratory Analysis of <code>dfm</code></a></li>
<li class="chapter" data-level="12.3.10" data-path="vector-space-representation.html"><a href="vector-space-representation.html#document-similarity"><i class="fa fa-check"></i><b>12.3.10</b> Document Similarity</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="vector-space-representation.html"><a href="vector-space-representation.html#vector-space-model-for-words"><i class="fa fa-check"></i><b>12.4</b> Vector Space Model for Words</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="vector-space-representation.html"><a href="vector-space-representation.html#feature-coocurrence-matrix-fcm"><i class="fa fa-check"></i><b>12.4.1</b> Feature-Coocurrence Matrix (<code>fcm</code>)</a></li>
<li class="chapter" data-level="12.4.2" data-path="vector-space-representation.html"><a href="vector-space-representation.html#from-corpustokens-to-fcm"><i class="fa fa-check"></i><b>12.4.2</b> From <code>corpus/tokens</code> to <code>fcm</code></a></li>
<li class="chapter" data-level="12.4.3" data-path="vector-space-representation.html"><a href="vector-space-representation.html#from-dfm-to-fcm"><i class="fa fa-check"></i><b>12.4.3</b> From <code>dfm</code> to <code>fcm</code></a></li>
<li class="chapter" data-level="12.4.4" data-path="vector-space-representation.html"><a href="vector-space-representation.html#which-method-to-choose"><i class="fa fa-check"></i><b>12.4.4</b> Which method to choose?</a></li>
<li class="chapter" data-level="12.4.5" data-path="vector-space-representation.html"><a href="vector-space-representation.html#lexical-similarity"><i class="fa fa-check"></i><b>12.4.5</b> Lexical Similarity</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="vector-space-representation.html"><a href="vector-space-representation.html#exercises-1"><i class="fa fa-check"></i><b>12.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="python-environment.html"><a href="python-environment.html"><i class="fa fa-check"></i><b>13</b> Python Environment</a>
<ul>
<li><a href="python-environment.html#install-the-python-with-anaconda">Install the python with <span>Anaconda</span></a></li>
<li class="chapter" data-level="" data-path="python-environment.html"><a href="python-environment.html#create-conda-environment"><i class="fa fa-check"></i>Create Conda Environment</a></li>
<li class="chapter" data-level="" data-path="python-environment.html"><a href="python-environment.html#install-python-modules"><i class="fa fa-check"></i>Install Python Modules</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>14</b> References</a></li>
<li class="divider"></li>
<li><a href="https://web.ntnu.edu.tw/~alvinchen" target ="blank">Alvin Chen </a></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Corpus Linguistics</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<script src="https://hypothes.is/embed.js" async></script>
<div id="creating-corpus" class="section level1" number="3">
<h1><span class="header-section-number">Chapter 3</span> Creating Corpus</h1>
<p>Linguistic data are important to us linguists. Data usually tell us something we don’t know, or something we are not sure of. In this chapter, I would like to show you a quick way to extract linguistic data from web pages, which is by now undoubtedly the largest source of textual data available.</p>
<p>While there are many existing text data collections (cf. <a href="#structured-coprus">Structured Corpus</a> and <a href="xml.html#xml">XML</a>), chances are that sometimes you still need to collect your own data for a particular research question. But please note that when you are creating your own corpus for specific research questions, always pay attention to the three important criteria: <strong>representativeness</strong>, <strong>authenticity</strong>, and <strong>size</strong>.</p>
<p>Following the spirit of tidy <svg viewBox="0 0 581 512" style="height:1em;position:relative;display:inline-block;top:.1em;" xmlns="http://www.w3.org/2000/svg"> <path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"></path></svg>, we will mainly do our tasks with the libraries of <code>tidyverse</code> and <code>rvests</code>.</p>
<div class="info">
<p>If you are new to <strong>tidyverse</strong> R, please check its <a href="https://www.tidyverse.org/learn/">official webpage</a> for learning resources.</p>
</div>
<div class="sourceCode" id="cb1"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb1-1"><a href="creating-corpus.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Uncomment the following line for installation</span></span>
<span id="cb1-2"><a href="creating-corpus.html#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages(c(&quot;tidyverse&quot;, &quot;rvest&quot;))</span></span>
<span id="cb1-3"><a href="creating-corpus.html#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-4"><a href="creating-corpus.html#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rvest)</span></code></pre></div>
<div id="html-structure" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> HTML Structure</h2>
<p>The <strong>H</strong>yper<strong>T</strong>ext <strong>M</strong>arkup <strong>L</strong>anguage, or HTML is the standard markup language for documents designed to be displayed in a web browser.</p>
<div id="html-syntax" class="section level3" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> HTML Syntax</h3>
<p>To illustrate the structure of the HTML, please download the sample <code>html</code> file from: <code>demo_data/data-sample-html.html</code> and first open it with your browser.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode html Rchunk"><code class="sourceCode html"><span id="cb2-1"><a href="creating-corpus.html#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;!DOCTYPE </span>html<span class="dt">&gt;</span></span>
<span id="cb2-2"><a href="creating-corpus.html#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;html&gt;</span></span>
<span id="cb2-3"><a href="creating-corpus.html#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;head&gt;</span></span>
<span id="cb2-4"><a href="creating-corpus.html#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;title&gt;</span>My First HTML <span class="kw">&lt;/title&gt;</span></span>
<span id="cb2-5"><a href="creating-corpus.html#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="creating-corpus.html#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;/head&gt;</span></span>
<span id="cb2-7"><a href="creating-corpus.html#cb2-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-8"><a href="creating-corpus.html#cb2-8" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;body&gt;</span></span>
<span id="cb2-9"><a href="creating-corpus.html#cb2-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;h1&gt;</span> Introduction <span class="kw">&lt;/h1&gt;</span></span>
<span id="cb2-10"><a href="creating-corpus.html#cb2-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;p&gt;</span> Have you ever read the source code of a html page? This is how to get back to the course page: <span class="kw">&lt;a</span> <span class="er">href</span><span class="ot">=</span><span class="st">&quot;https://alvinntnu.github.io/NTNU_ENC2036_LECTURES/&quot;</span><span class="er">,</span> <span class="er">target</span><span class="ot">=</span><span class="st">&quot;_blank&quot;</span><span class="kw">&gt;</span>ENC2036<span class="kw">&lt;/a&gt;</span>. <span class="kw">&lt;/p&gt;</span></span>
<span id="cb2-11"><a href="creating-corpus.html#cb2-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;h1&gt;</span> Contents of the Page <span class="kw">&lt;/h1&gt;</span></span>
<span id="cb2-12"><a href="creating-corpus.html#cb2-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;p&gt;</span> Anything you can say about the page.....<span class="kw">&lt;/p&gt;</span></span>
<span id="cb2-13"><a href="creating-corpus.html#cb2-13" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;/body&gt;</span></span>
<span id="cb2-14"><a href="creating-corpus.html#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/html&gt;</span></span></code></pre></div>
<p>An <code>HTML</code> document includes several important elements (cf. Figure <a href="creating-corpus.html#fig:htmltag">3.1</a>):</p>
<ul>
<li><code>DTD</code>: document type definition which informs the browser about the version of the HTML standard that the document adheres to (e.g., <code>&lt;!DOCTYPE HTML&gt;</code>)</li>
<li><code>element</code>: the combination of start tag, content, and end tag (e.g, <code>&lt;title&gt;My First HTML&lt;/title&gt;</code>)</li>
<li><code>tag</code>: named braces that enclose the content and define its structural function (e.g., <code>title</code>, <code>body</code>, <code>p</code>)</li>
<li><code>attribute</code>: specific properties of the tag, which are often placed in the start end of the element (e.g., <code>&lt;a href= "index.html"&gt; Homepage &lt;/a&gt;</code>). They are expressed as <code>name = "value"</code> pairs.</li>
</ul>
<!-- ```{r echo=F, purl = F, out.width = "70%"} -->
<!-- htmltools::includeHTML("demo_data/my-first-html.html") -->
<!-- ``` -->
<div class="figure"><span style="display:block;" id="fig:htmltag"></span>
<img src="images/html-tag.png" alt="Syntax of An HTML Tag Element" width="90%" />
<p class="caption">
Figure 3.1: Syntax of An HTML Tag Element
</p>
</div>
<p>An <code>HTML</code> document starts with the root element <code>&lt;html&gt;</code>, which splits into two branches, <code>&lt;head&gt;</code> and <code>&lt;body&gt;</code>.</p>
<ul>
<li>Most of the webpage <strong>textual contents</strong> would go into the <code>&lt;body&gt;</code> part.</li>
<li>Most of the web-related codes and metadata (e.g., javascripts, CSS) are often included in the <code>&lt;head&gt;</code> part.</li>
</ul>
<p>All elements need to be strictly nested within each other in a well-formed and valid HTML file, as shown in Figure <a href="creating-corpus.html#fig:htmltree">3.2</a>.</p>
<div class="figure"><span style="display:block;" id="fig:htmltree"></span>
<img src="images/html-tree.png" alt="Tree Structure of An HTML Document" width="648" />
<p class="caption">
Figure 3.2: Tree Structure of An HTML Document
</p>
</div>
</div>
<div id="tags-and-attributes" class="section level3" number="3.1.2">
<h3><span class="header-section-number">3.1.2</span> Tags and Attributes</h3>
<p>HTML has plenty of legal tags and attributes. On <a href="https://www.w3schools.com/html/html_basic.asp">W3CSchools</a>, there is a complete list of HTML tags and attributes for your reference. Common tags may include:</p>
<ul>
<li>Anchor tag <code>&lt;a&gt;</code></li>
<li>Metadata tag <code>&lt;meta&gt;</code></li>
<li>External tag <code>&lt;link&gt;</code></li>
<li>Emphasizing tags <code>&lt;b&gt;</code>, <code>&lt;i&gt;</code>, <code>&lt;strong&gt;</code></li>
<li>Paragraph tags <code>&lt;p&gt;</code></li>
<li>Heading tags <code>&lt;h1&gt;</code>, <code>&lt;h2&gt;</code>, <code>&lt;h3&gt;</code></li>
<li>Listing content tags <code>&lt;ul&gt;</code>, <code>&lt;ol&gt;</code></li>
<li>Block tags <code>&lt;div&gt;</code>, <code>&lt;span&gt;</code></li>
<li>Form-related tag <code>&lt;form&gt;</code>, <code>&lt;input&gt;</code></li>
<li>Foreign script tag <code>&lt;script&gt;</code></li>
<li>Table tag <code>&lt;table&gt;</code>, <code>&lt;th&gt;</code>, <code>&lt;tr&gt;</code>, <code>&lt;td&gt;</code></li>
</ul>
<p>You probably don’t have to know all the detail about the HTML tags and elements. However, in order to scrape the textual data from the Internet, you need to know at least from which parts of HTML elements you need your textual data from on the web pages.</p>
<div class="info">
<p>Usually, before you scrape the data from the webpage, bear the following questions in mind:</p>
<ul>
<li>From which HTML <strong>elements/tags</strong> would you like to extract the data for corpus construction?</li>
<li>Do you need the <strong>textual</strong> content of the HTML element?</li>
<li>Do you need a specific <strong>attribute</strong> of the HTML element?</li>
</ul>
</div>
</div>
<div id="css" class="section level3" number="3.1.3">
<h3><span class="header-section-number">3.1.3</span> CSS</h3>
<p>Cascading Style Sheet (CSS) is a language for describing the layout of HTML and other markup documents (e.g., XML).</p>
<p>HTML + CSS is by now the standard way to create and design web pages. The idea is that CSS specifies the formats/styles of the HTML elements. The following is an example of the CSS:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode css Rchunk"><code class="sourceCode css"><span id="cb3-1"><a href="creating-corpus.html#cb3-1" aria-hidden="true" tabindex="-1"></a>div<span class="fu">.warnings</span> {</span>
<span id="cb3-2"><a href="creating-corpus.html#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">color</span>: <span class="cn">pink</span><span class="op">;</span></span>
<span id="cb3-3"><a href="creating-corpus.html#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">font-family</span>: <span class="st">&quot;Arial&quot;</span></span>
<span id="cb3-4"><a href="creating-corpus.html#cb3-4" aria-hidden="true" tabindex="-1"></a>  font-size: <span class="dv">120</span><span class="dt">%</span></span>
<span id="cb3-5"><a href="creating-corpus.html#cb3-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-6"><a href="creating-corpus.html#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="creating-corpus.html#cb3-7" aria-hidden="true" tabindex="-1"></a>h1 {</span>
<span id="cb3-8"><a href="creating-corpus.html#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="kw">padding-top</span>: <span class="dv">20</span><span class="dt">px</span></span>
<span id="cb3-9"><a href="creating-corpus.html#cb3-9" aria-hidden="true" tabindex="-1"></a>  padding-bottom: <span class="dv">20</span><span class="dt">px</span></span>
<span id="cb3-10"><a href="creating-corpus.html#cb3-10" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<style type="text/css">
div.warnings {
  color: pink;
  font-family: "Arial"
  font-size: 120%
}

h1 {
  padding-top: 20px
  padding-bottom: 20px
}
</style>
<div class="info">
<p>You probably would wonder how to link a set of CSS style definitions to an HTML document. There are in general three ways: inline, internal and external. You can learn more about this in <a href="https://www.w3schools.com/html/html_css.asp">W3School.com</a>.</p>
<p>Here I will show you an example of the <strong>internal</strong> method. Below is a CSS style definition for <code>&lt;h1&gt;</code>.</p>
<pre><code>h1 {
  color: red;
  margin-bottom: 2em;
}</code></pre>
<p>We can embed this within a <code>&lt;style&gt;...&lt;/style&gt;</code> element. Then you put the entire <code>&lt;style&gt;</code> element under <code>&lt;head&gt;</code> of the HTML file you would like to style.</p>
<pre><code>&lt;style&gt;
h1 {
  color: red;
  margin-bottom: 1.5em;
}
&lt;/style&gt;</code></pre>
<p>After you include the <code>&lt;style&gt;</code> in the HTML file, refresh the web page to see if the CSS style works.</p>
</div>
</div>
<div id="html-css-javascript" class="section level3" number="3.1.4">
<h3><span class="header-section-number">3.1.4</span> HTML + CSS ( + JavaScript)</h3>
<p><img src="images/web-page-design.png" width="80%" /></p>
<ul>
<li><p><a href="https://www.w3schools.com/">Try it</a>:</p>
<ul>
<li>HTML: the language for building web pages</li>
<li>CSS: the language for styling web pages</li>
<li>JavaScript: the language for programming web pages</li>
</ul></li>
</ul>
</div>
</div>
<div id="web-crawling" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Web Crawling</h2>
<div class="warning">
<p>In the following demonstration, the text data scraped from the PTT forum is presented as it is without adjustment. However, please note that the language on PTT may strike some readers as profane, vulgar or even offensive.</p>
</div>
<div class="sourceCode" id="cb6"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb6-1"><a href="creating-corpus.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb6-2"><a href="creating-corpus.html#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rvest)</span></code></pre></div>
<p>In this tutorial, let’s assume that we like to scrape texts from <a href="https://www.ptt.cc/bbs/index.html">PTT Forum</a>. In particular, we will demonstrate how to scrape texts from the <a href="https://www.ptt.cc/bbs/Gossiping/index.html"><code>Gossiping</code></a> board of PTT.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb7-1"><a href="creating-corpus.html#cb7-1" aria-hidden="true" tabindex="-1"></a>ptt.url <span class="ot">&lt;-</span> <span class="st">&quot;https://www.ptt.cc/bbs/Gossiping&quot;</span></span></code></pre></div>
<p>If you use your browser to view <a href="https://www.ptt.cc/bbs/Gossiping">PTT Gossiping</a> page, you would see that you need to go through the age verification before you can enter the content page. So, our first job is to pass through this age verification.</p>
<ul>
<li>First, we create an <code>session()</code> (like we open a browser linking to the page)</li>
</ul>
<div class="sourceCode" id="cb8"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb8-1"><a href="creating-corpus.html#cb8-1" aria-hidden="true" tabindex="-1"></a>gossiping.session <span class="ot">&lt;-</span> <span class="fu">session</span>(ptt.url)</span></code></pre></div>
<ul>
<li>Second, we extract the age verification form from the current page (<code>form</code> is also a defined HTML element)</li>
</ul>
<div class="sourceCode" id="cb9"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb9-1"><a href="creating-corpus.html#cb9-1" aria-hidden="true" tabindex="-1"></a>gossiping.form <span class="ot">&lt;-</span> gossiping.session <span class="sc">%&gt;%</span></span>
<span id="cb9-2"><a href="creating-corpus.html#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_node</span>(<span class="st">&quot;form&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-3"><a href="creating-corpus.html#cb9-3" aria-hidden="true" tabindex="-1"></a>  html_form</span></code></pre></div>
<ul>
<li>Then we automatically submit an <code>yes</code> to the age verification form in the earlier created <code>session()</code> and create another session.</li>
</ul>
<div class="sourceCode" id="cb10"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb10-1"><a href="creating-corpus.html#cb10-1" aria-hidden="true" tabindex="-1"></a>gossiping <span class="ot">&lt;-</span> <span class="fu">session_submit</span>(</span>
<span id="cb10-2"><a href="creating-corpus.html#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> gossiping.session,</span>
<span id="cb10-3"><a href="creating-corpus.html#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">form =</span> gossiping.form,</span>
<span id="cb10-4"><a href="creating-corpus.html#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">submit =</span> <span class="st">&quot;yes&quot;</span></span>
<span id="cb10-5"><a href="creating-corpus.html#cb10-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb10-6"><a href="creating-corpus.html#cb10-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-7"><a href="creating-corpus.html#cb10-7" aria-hidden="true" tabindex="-1"></a>gossiping</span></code></pre></div>
<pre class="Rout"><code>&lt;session&gt; https://www.ptt.cc/bbs/Gossiping/index.html
  Status: 200
  Type:   text/html; charset=utf-8
  Size:   8578</code></pre>
<p>Now our html <code>session</code>, i.e., <code>gossiping</code>, should be on the front page of the <code>Gossiping</code> board.</p>
<hr />
<div class="info">
<p>
Most browsers come with the functionality to inspect the page source (i.e., HTML). This is very useful for web crawling. Before we scrape data from the webpage, we often need to inspect the structure of the web page first. Most importantly, we need to know (a) which HTML elements, or (b) which particular attributes/values of the HTML elements we are interested in .
</p>
</div>
<p><img src="images/view-page-source.png" width="80%" /><img src="images/view-page-source-2.png" width="80%" /></p>
<hr />
<ul>
<li>Next we need to find the most recent index page of the board</li>
</ul>
<div class="sourceCode" id="cb12"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb12-1"><a href="creating-corpus.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Decide the number of index pages ----</span></span>
<span id="cb12-2"><a href="creating-corpus.html#cb12-2" aria-hidden="true" tabindex="-1"></a>page.latest <span class="ot">&lt;-</span> gossiping <span class="sc">%&gt;%</span></span>
<span id="cb12-3"><a href="creating-corpus.html#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="st">&quot;a&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># extract all &lt;a&gt; elements</span></span>
<span id="cb12-4"><a href="creating-corpus.html#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_attr</span>(<span class="st">&quot;href&quot;</span>) <span class="sc">%&gt;%</span>  <span class="co"># extract the attributes `href`</span></span>
<span id="cb12-5"><a href="creating-corpus.html#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_subset</span>(<span class="st">&quot;index[0-9]{2,}</span><span class="sc">\\</span><span class="st">.html&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># find the `href` with the index number</span></span>
<span id="cb12-6"><a href="creating-corpus.html#cb12-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_extract</span>(<span class="st">&quot;[0-9]+&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># extract the number</span></span>
<span id="cb12-7"><a href="creating-corpus.html#cb12-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.numeric</span>()</span>
<span id="cb12-8"><a href="creating-corpus.html#cb12-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-9"><a href="creating-corpus.html#cb12-9" aria-hidden="true" tabindex="-1"></a>page.latest</span></code></pre></div>
<pre class="Rout"><code>[1] 39484</code></pre>
<ul>
<li>On the most recent index page, we need to extract the hyperlinks to the articles</li>
</ul>
<div class="sourceCode" id="cb14"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb14-1"><a href="creating-corpus.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Retreive links -----</span></span>
<span id="cb14-2"><a href="creating-corpus.html#cb14-2" aria-hidden="true" tabindex="-1"></a>link <span class="ot">&lt;-</span> <span class="fu">str_c</span>(ptt.url, <span class="st">&quot;/index&quot;</span>, page.latest, <span class="st">&quot;.html&quot;</span>)</span>
<span id="cb14-3"><a href="creating-corpus.html#cb14-3" aria-hidden="true" tabindex="-1"></a>links.article <span class="ot">&lt;-</span> gossiping <span class="sc">%&gt;%</span></span>
<span id="cb14-4"><a href="creating-corpus.html#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">session_jump_to</span>(link) <span class="sc">%&gt;%</span> <span class="co"># move session to the most recent page</span></span>
<span id="cb14-5"><a href="creating-corpus.html#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="st">&quot;a&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># extract article &lt;a&gt;</span></span>
<span id="cb14-6"><a href="creating-corpus.html#cb14-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_attr</span>(<span class="st">&quot;href&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># extract article &lt;a&gt; `href` attributes</span></span>
<span id="cb14-7"><a href="creating-corpus.html#cb14-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_subset</span>(<span class="st">&quot;[A-z]</span><span class="sc">\\</span><span class="st">.[0-9]+</span><span class="sc">\\</span><span class="st">.[A-z]</span><span class="sc">\\</span><span class="st">.[A-z0-9]+</span><span class="sc">\\</span><span class="st">.html&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># extract links</span></span>
<span id="cb14-8"><a href="creating-corpus.html#cb14-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_c</span>(<span class="st">&quot;https://www.ptt.cc&quot;</span>,.)</span>
<span id="cb14-9"><a href="creating-corpus.html#cb14-9" aria-hidden="true" tabindex="-1"></a>links.article</span></code></pre></div>
<pre class="Rout"><code> [1] &quot;https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html&quot;
 [2] &quot;https://www.ptt.cc/bbs/Gossiping/M.1646351387.A.5F9.html&quot;
 [3] &quot;https://www.ptt.cc/bbs/Gossiping/M.1646351400.A.06D.html&quot;
 [4] &quot;https://www.ptt.cc/bbs/Gossiping/M.1646351508.A.3DA.html&quot;
 [5] &quot;https://www.ptt.cc/bbs/Gossiping/M.1646351590.A.719.html&quot;
 [6] &quot;https://www.ptt.cc/bbs/Gossiping/M.1646351706.A.7B1.html&quot;
 [7] &quot;https://www.ptt.cc/bbs/Gossiping/M.1646351742.A.459.html&quot;
 [8] &quot;https://www.ptt.cc/bbs/Gossiping/M.1646351759.A.D79.html&quot;
 [9] &quot;https://www.ptt.cc/bbs/Gossiping/M.1646351773.A.329.html&quot;
[10] &quot;https://www.ptt.cc/bbs/Gossiping/M.1646351864.A.759.html&quot;
[11] &quot;https://www.ptt.cc/bbs/Gossiping/M.1646351918.A.594.html&quot;
[12] &quot;https://www.ptt.cc/bbs/Gossiping/M.1646351928.A.42C.html&quot;
[13] &quot;https://www.ptt.cc/bbs/Gossiping/M.1646351960.A.831.html&quot;
[14] &quot;https://www.ptt.cc/bbs/Gossiping/M.1646352057.A.FE4.html&quot;
[15] &quot;https://www.ptt.cc/bbs/Gossiping/M.1646352067.A.914.html&quot;
[16] &quot;https://www.ptt.cc/bbs/Gossiping/M.1646352080.A.F11.html&quot;
[17] &quot;https://www.ptt.cc/bbs/Gossiping/M.1646352097.A.7D9.html&quot;
[18] &quot;https://www.ptt.cc/bbs/Gossiping/M.1646352127.A.BE8.html&quot;
[19] &quot;https://www.ptt.cc/bbs/Gossiping/M.1646352138.A.46B.html&quot;
[20] &quot;https://www.ptt.cc/bbs/Gossiping/M.1646352194.A.38C.html&quot;</code></pre>
<ul>
<li>Next step is to scrape texts from each article hyperlink. Let’s consider one link first.</li>
</ul>
<div class="sourceCode" id="cb16"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb16-1"><a href="creating-corpus.html#cb16-1" aria-hidden="true" tabindex="-1"></a>article.url <span class="ot">&lt;-</span> links.article[<span class="dv">1</span>]</span>
<span id="cb16-2"><a href="creating-corpus.html#cb16-2" aria-hidden="true" tabindex="-1"></a>temp.html <span class="ot">&lt;-</span> gossiping <span class="sc">%&gt;%</span> </span>
<span id="cb16-3"><a href="creating-corpus.html#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">session_jump_to</span>(article.url) <span class="co"># link to the article</span></span></code></pre></div>
<ul>
<li>Now the <code>temp.html</code> is like a browser on the article page. Because we are interested in the metadata and the contents of each article, now the question is: where are they in the HTML? We need to go back to the source page of the article HTML again:</li>
</ul>
<p><img src="images/view-page-source-3.png" width="100%" /></p>
<ul>
<li><p>After a closer inspection of the article HTML, we know that:</p>
<ul>
<li>The metadata of the article are included in <code>&lt;span&gt;</code> tag elements, belonging to the class <code>class="article-meta-value"</code></li>
<li>The contents of the article are included in the <code>&lt;div&gt;</code> element, whose ID is <code>ID="main-content"</code></li>
</ul></li>
</ul>
<hr />
<ul>
<li>Now we are ready to extract the metadata of the article.</li>
</ul>
<div class="sourceCode" id="cb17"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb17-1"><a href="creating-corpus.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract article metadata</span></span>
<span id="cb17-2"><a href="creating-corpus.html#cb17-2" aria-hidden="true" tabindex="-1"></a>article.header <span class="ot">&lt;-</span> temp.html <span class="sc">%&gt;%</span></span>
<span id="cb17-3"><a href="creating-corpus.html#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="st">&quot;span.article-meta-value&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># get &lt;span&gt; of a particular class</span></span>
<span id="cb17-4"><a href="creating-corpus.html#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text</span>()</span>
<span id="cb17-5"><a href="creating-corpus.html#cb17-5" aria-hidden="true" tabindex="-1"></a>article.header</span></code></pre></div>
<pre class="Rout"><code>[1] &quot;yata4547 (yata)&quot;          &quot;Gossiping&quot;               
[3] &quot;[問卦] 才3月為什麼就停電&quot; &quot;Fri Mar  4 07:48:09 2022&quot;</code></pre>
<div class="info">
<p>The metadata of each PTT article in fact includes four pieces of information: author, board name, title, post time. The above code retrieves directly the values of these metadata.</p>
<p>We can retrieve the tags of these metadata values as well:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb19-1"><a href="creating-corpus.html#cb19-1" aria-hidden="true" tabindex="-1"></a>temp.html <span class="sc">%&gt;%</span></span>
<span id="cb19-2"><a href="creating-corpus.html#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="st">&quot;span.article-meta-tag&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># get &lt;span&gt; of a particular class</span></span>
<span id="cb19-3"><a href="creating-corpus.html#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text</span>()</span></code></pre></div>
<pre class="Rout"><code>[1] &quot;作者&quot; &quot;看板&quot; &quot;標題&quot; &quot;時間&quot;</code></pre>
</div>
<ul>
<li>From the <code>article.header</code>, we are able to extract the <code>author</code>, <code>title</code>, and <code>time stamp</code> of the article.</li>
</ul>
<div class="sourceCode" id="cb21"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb21-1"><a href="creating-corpus.html#cb21-1" aria-hidden="true" tabindex="-1"></a>article.author <span class="ot">&lt;-</span> article.header[<span class="dv">1</span>] <span class="sc">%&gt;%</span> <span class="fu">str_extract</span>(<span class="st">&quot;^[A-z0-9_]+&quot;</span>) <span class="co"># athuor</span></span>
<span id="cb21-2"><a href="creating-corpus.html#cb21-2" aria-hidden="true" tabindex="-1"></a>article.title <span class="ot">&lt;-</span> article.header[<span class="dv">3</span>] <span class="co"># title</span></span>
<span id="cb21-3"><a href="creating-corpus.html#cb21-3" aria-hidden="true" tabindex="-1"></a>article.datetime <span class="ot">&lt;-</span> article.header[<span class="dv">4</span>] <span class="co"># time stamp</span></span>
<span id="cb21-4"><a href="creating-corpus.html#cb21-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-5"><a href="creating-corpus.html#cb21-5" aria-hidden="true" tabindex="-1"></a>article.author</span></code></pre></div>
<pre class="Rout"><code>[1] &quot;yata4547&quot;</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb23-1"><a href="creating-corpus.html#cb23-1" aria-hidden="true" tabindex="-1"></a>article.title</span></code></pre></div>
<pre class="Rout"><code>[1] &quot;[問卦] 才3月為什麼就停電&quot;</code></pre>
<div class="sourceCode" id="cb25"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb25-1"><a href="creating-corpus.html#cb25-1" aria-hidden="true" tabindex="-1"></a>article.datetime</span></code></pre></div>
<pre class="Rout"><code>[1] &quot;Fri Mar  4 07:48:09 2022&quot;</code></pre>
<ul>
<li>Now we extract the main contents of the article</li>
</ul>
<div class="sourceCode" id="cb27"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb27-1"><a href="creating-corpus.html#cb27-1" aria-hidden="true" tabindex="-1"></a>article.content <span class="ot">&lt;-</span> temp.html <span class="sc">%&gt;%</span></span>
<span id="cb27-2"><a href="creating-corpus.html#cb27-2" aria-hidden="true" tabindex="-1"></a>        <span class="fu">html_nodes</span>( <span class="co"># article body</span></span>
<span id="cb27-3"><a href="creating-corpus.html#cb27-3" aria-hidden="true" tabindex="-1"></a>          <span class="at">xpath =</span> <span class="st">&#39;//div[@id=&quot;main-content&quot;]/node()[not(self::div|self::span[@class=&quot;f2&quot;])]&#39;</span></span>
<span id="cb27-4"><a href="creating-corpus.html#cb27-4" aria-hidden="true" tabindex="-1"></a>        ) <span class="sc">%&gt;%</span></span>
<span id="cb27-5"><a href="creating-corpus.html#cb27-5" aria-hidden="true" tabindex="-1"></a>        <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> <span class="co"># extract texts</span></span>
<span id="cb27-6"><a href="creating-corpus.html#cb27-6" aria-hidden="true" tabindex="-1"></a>        <span class="fu">str_c</span>(<span class="at">collapse =</span> <span class="st">&quot;&quot;</span>) <span class="co"># combine all lines into one</span></span>
<span id="cb27-7"><a href="creating-corpus.html#cb27-7" aria-hidden="true" tabindex="-1"></a>article.content</span></code></pre></div>
<pre class="Rout"><code>[1] &quot;現在才3月 很少人開冷氣\n\n用電量應該不大才對\n\n那等到夏天\n\n家家戶戶都開著冷氣\n\n那不就完了\n\n反正喊個抗中保台 騙騙賤民 亂搞也沒差\n\n--&quot;</code></pre>
<div class="info">
<p>
<code>XPath</code> (or XML Path Language) is a query language which is useful for addressing and extracting particular elements from XML/HTML documents. XPath allows you to exploit more features of the hierarchical tree that an HTML file represents in locating the relevant HTML elements. For more information, please see <span class="citation"><span class="citation"><a href="#ref-munzert2014" role="doc-biblioref">Munzert et al.</a> (<a href="#ref-munzert2014" role="doc-biblioref">2014</a>)</span></span>, Chapter 4.
</p>
<p>
In the above example, the <code>XPath</code> identifies the nodes <em>under</em> <code>&lt;div id = “main-content”&gt;</code>, but excludes sister nodes that are <code>&lt;div&gt;</code> or <code>&lt;span class=“f2”&gt;</code>.
</p>
<p>
These children <code>&lt;div&gt;</code> or <code>&lt;span class=“f2”&gt;</code> of the <code>&lt;div id = “main-content”&gt;</code> include the push comments (推文) of the article, which are not the main content of the article.
</p>
</div>
<ul>
<li>Now we can combine all information related to the article into a data frame</li>
</ul>
<div class="sourceCode" id="cb29"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb29-1"><a href="creating-corpus.html#cb29-1" aria-hidden="true" tabindex="-1"></a>article.table <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb29-2"><a href="creating-corpus.html#cb29-2" aria-hidden="true" tabindex="-1"></a>      <span class="at">datetime =</span> article.datetime,</span>
<span id="cb29-3"><a href="creating-corpus.html#cb29-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">title =</span> article.title,</span>
<span id="cb29-4"><a href="creating-corpus.html#cb29-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">author =</span> article.author,</span>
<span id="cb29-5"><a href="creating-corpus.html#cb29-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">content =</span> article.content,</span>
<span id="cb29-6"><a href="creating-corpus.html#cb29-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">url =</span> article.url</span>
<span id="cb29-7"><a href="creating-corpus.html#cb29-7" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-8"><a href="creating-corpus.html#cb29-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-9"><a href="creating-corpus.html#cb29-9" aria-hidden="true" tabindex="-1"></a>article.table</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["datetime"],"name":[1],"type":["chr"],"align":["left"]},{"label":["title"],"name":[2],"type":["chr"],"align":["left"]},{"label":["author"],"name":[3],"type":["chr"],"align":["left"]},{"label":["content"],"name":[4],"type":["chr"],"align":["left"]},{"label":["url"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"Fri Mar  4 07:48:09 2022","2":"[問卦] 才3月為什麼就停電","3":"yata4547","4":"現在才3月 很少人開冷氣\\n\\n用電量應該不大才對\\n\\n那等到夏天\\n\\n家家戶戶都開著冷氣\\n\\n那不就完了\\n\\n反正喊個抗中保台 騙騙賤民 亂搞也沒差\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<ul>
<li>Next we extract the push comments at the end of the article</li>
</ul>
<div class="sourceCode" id="cb30"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb30-1"><a href="creating-corpus.html#cb30-1" aria-hidden="true" tabindex="-1"></a>article.push <span class="ot">&lt;-</span> temp.html <span class="sc">%&gt;%</span> </span>
<span id="cb30-2"><a href="creating-corpus.html#cb30-2" aria-hidden="true" tabindex="-1"></a>        <span class="fu">html_nodes</span>(<span class="at">xpath =</span> <span class="st">&quot;//div[@class = &#39;push&#39;]&quot;</span>)</span>
<span id="cb30-3"><a href="creating-corpus.html#cb30-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-4"><a href="creating-corpus.html#cb30-4" aria-hidden="true" tabindex="-1"></a>article.push</span></code></pre></div>
<pre class="Rout"><code>{xml_nodeset (18)}
 [1] &lt;div class=&quot;push&quot;&gt;\n&lt;span class=&quot;f1 hl push-tag&quot;&gt;噓 &lt;/span&gt;&lt;span class=&quot;f ...
 [2] &lt;div class=&quot;push&quot;&gt;\n&lt;span class=&quot;hl push-tag&quot;&gt;推 &lt;/span&gt;&lt;span class=&quot;f3 h ...
 [3] &lt;div class=&quot;push&quot;&gt;\n&lt;span class=&quot;hl push-tag&quot;&gt;推 &lt;/span&gt;&lt;span class=&quot;f3 h ...
 [4] &lt;div class=&quot;push&quot;&gt;\n&lt;span class=&quot;hl push-tag&quot;&gt;推 &lt;/span&gt;&lt;span class=&quot;f3 h ...
 [5] &lt;div class=&quot;push&quot;&gt;\n&lt;span class=&quot;hl push-tag&quot;&gt;推 &lt;/span&gt;&lt;span class=&quot;f3 h ...
 [6] &lt;div class=&quot;push&quot;&gt;\n&lt;span class=&quot;hl push-tag&quot;&gt;推 &lt;/span&gt;&lt;span class=&quot;f3 h ...
 [7] &lt;div class=&quot;push&quot;&gt;\n&lt;span class=&quot;hl push-tag&quot;&gt;推 &lt;/span&gt;&lt;span class=&quot;f3 h ...
 [8] &lt;div class=&quot;push&quot;&gt;\n&lt;span class=&quot;f1 hl push-tag&quot;&gt;→ &lt;/span&gt;&lt;span class=&quot;f ...
 [9] &lt;div class=&quot;push&quot;&gt;\n&lt;span class=&quot;f1 hl push-tag&quot;&gt;→ &lt;/span&gt;&lt;span class=&quot;f ...
[10] &lt;div class=&quot;push&quot;&gt;\n&lt;span class=&quot;f1 hl push-tag&quot;&gt;→ &lt;/span&gt;&lt;span class=&quot;f ...
[11] &lt;div class=&quot;push&quot;&gt;\n&lt;span class=&quot;hl push-tag&quot;&gt;推 &lt;/span&gt;&lt;span class=&quot;f3 h ...
[12] &lt;div class=&quot;push&quot;&gt;\n&lt;span class=&quot;f1 hl push-tag&quot;&gt;→ &lt;/span&gt;&lt;span class=&quot;f ...
[13] &lt;div class=&quot;push&quot;&gt;\n&lt;span class=&quot;hl push-tag&quot;&gt;推 &lt;/span&gt;&lt;span class=&quot;f3 h ...
[14] &lt;div class=&quot;push&quot;&gt;\n&lt;span class=&quot;hl push-tag&quot;&gt;推 &lt;/span&gt;&lt;span class=&quot;f3 h ...
[15] &lt;div class=&quot;push&quot;&gt;\n&lt;span class=&quot;hl push-tag&quot;&gt;推 &lt;/span&gt;&lt;span class=&quot;f3 h ...
[16] &lt;div class=&quot;push&quot;&gt;\n&lt;span class=&quot;hl push-tag&quot;&gt;推 &lt;/span&gt;&lt;span class=&quot;f3 h ...
[17] &lt;div class=&quot;push&quot;&gt;\n&lt;span class=&quot;f1 hl push-tag&quot;&gt;→ &lt;/span&gt;&lt;span class=&quot;f ...
[18] &lt;div class=&quot;push&quot;&gt;\n&lt;span class=&quot;f1 hl push-tag&quot;&gt;→ &lt;/span&gt;&lt;span class=&quot;f ...</code></pre>
<ul>
<li><p>We then extract relevant information from each push nodes <code>article.push</code>.</p>
<ul>
<li>push types</li>
<li>push authors</li>
<li>push contents</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb32"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb32-1"><a href="creating-corpus.html#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># push tags</span></span>
<span id="cb32-2"><a href="creating-corpus.html#cb32-2" aria-hidden="true" tabindex="-1"></a>push.table.tag <span class="ot">&lt;-</span> article.push <span class="sc">%&gt;%</span> </span>
<span id="cb32-3"><a href="creating-corpus.html#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="st">&quot;span.push-tag&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb32-4"><a href="creating-corpus.html#cb32-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>) <span class="co"># push types (like or dislike)</span></span>
<span id="cb32-5"><a href="creating-corpus.html#cb32-5" aria-hidden="true" tabindex="-1"></a>push.table.tag</span></code></pre></div>
<pre class="Rout"><code> [1] &quot;噓&quot; &quot;推&quot; &quot;推&quot; &quot;推&quot; &quot;推&quot; &quot;推&quot; &quot;推&quot; &quot;→&quot;  &quot;→&quot;  &quot;→&quot;  &quot;推&quot; &quot;→&quot;  &quot;推&quot; &quot;推&quot; &quot;推&quot;
[16] &quot;推&quot; &quot;→&quot;  &quot;→&quot; </code></pre>
<div class="sourceCode" id="cb34"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb34-1"><a href="creating-corpus.html#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># push authors</span></span>
<span id="cb34-2"><a href="creating-corpus.html#cb34-2" aria-hidden="true" tabindex="-1"></a>push.table.author <span class="ot">&lt;-</span> article.push <span class="sc">%&gt;%</span> </span>
<span id="cb34-3"><a href="creating-corpus.html#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="st">&quot;span.push-userid&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb34-4"><a href="creating-corpus.html#cb34-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>) <span class="co"># author</span></span>
<span id="cb34-5"><a href="creating-corpus.html#cb34-5" aria-hidden="true" tabindex="-1"></a>push.table.author</span></code></pre></div>
<pre class="Rout"><code> [1] &quot;Roooz&quot;        &quot;hatephubbing&quot; &quot;ots625&quot;       &quot;greensaru&quot;    &quot;pureworld&quot;   
 [6] &quot;ymib&quot;         &quot;gginin7878&quot;   &quot;rererere147&quot;  &quot;s999132&quot;      &quot;kcclasaki&quot;   
[11] &quot;g1254501&quot;     &quot;g1254501&quot;     &quot;tonyian&quot;      &quot;swanc&quot;        &quot;cat5672&quot;     
[16] &quot;daphney2266&quot;  &quot;snow3804&quot;     &quot;Lowpapa&quot;     </code></pre>
<div class="sourceCode" id="cb36"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb36-1"><a href="creating-corpus.html#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># push contents</span></span>
<span id="cb36-2"><a href="creating-corpus.html#cb36-2" aria-hidden="true" tabindex="-1"></a>push.table.content <span class="ot">&lt;-</span> article.push <span class="sc">%&gt;%</span> </span>
<span id="cb36-3"><a href="creating-corpus.html#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="st">&quot;span.push-content&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb36-4"><a href="creating-corpus.html#cb36-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>)</span>
<span id="cb36-5"><a href="creating-corpus.html#cb36-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-6"><a href="creating-corpus.html#cb36-6" aria-hidden="true" tabindex="-1"></a>push.table.content</span></code></pre></div>
<pre class="Rout"><code> [1] &quot;: 反核就是ㄏ&quot;                           
 [2] &quot;: 太陽罷工&quot;                             
 [3] &quot;: 事先演練&quot;                             
 [4] &quot;: ATM壞掉惹，錢領不出來，嘻嘻&quot;          
 [5] &quot;: 缺電&quot;                                 
 [6] &quot;: 電都被藏起來了&quot;                       
 [7] &quot;: https://youtu.be/gbEhkA46mDk&quot;         
 [8] &quot;: 不是停電 是人為疏失&quot;                  
 [9] &quot;: 窩不知道&quot;                             
[10] &quot;: 坐等班班有冷氣的到來&quot;                 
[11] &quot;: 4%仔不造謠會死膩？是沒有太陽 不是缺電&quot;
[12] &quot;: ！&quot;                                   
[13] &quot;: https://i.imgur.com/yV3D8p1.jpg&quot;      
[14] &quot;: 窩不知道&quot;                             
[15] &quot;: https://imgur.com/VGRCVJF.jpg&quot;        
[16] &quot;: 還有班班有冷氣的到來...&quot;              
[17] &quot;: 先讓你習慣&quot;                           
[18] &quot;: 太陽&quot;                                 </code></pre>
<div class="sourceCode" id="cb38"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb38-1"><a href="creating-corpus.html#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># push time</span></span>
<span id="cb38-2"><a href="creating-corpus.html#cb38-2" aria-hidden="true" tabindex="-1"></a>push.table.datetime <span class="ot">&lt;-</span> article.push <span class="sc">%&gt;%</span> </span>
<span id="cb38-3"><a href="creating-corpus.html#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="st">&quot;span.push-ipdatetime&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb38-4"><a href="creating-corpus.html#cb38-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>) <span class="co"># push time stamp</span></span>
<span id="cb38-5"><a href="creating-corpus.html#cb38-5" aria-hidden="true" tabindex="-1"></a>push.table.datetime</span></code></pre></div>
<pre class="Rout"><code> [1] &quot;114.137.73.98 03/04 07:49&quot;  &quot;111.71.20.72 03/04 07:49&quot;  
 [3] &quot;114.47.58.54 03/04 07:49&quot;   &quot;223.137.213.87 03/04 07:49&quot;
 [5] &quot;136.52.32.183 03/04 07:49&quot;  &quot;1.200.41.224 03/04 07:49&quot;  
 [7] &quot;111.251.62.141 03/04 07:50&quot; &quot;101.9.239.82 03/04 07:51&quot;  
 [9] &quot;36.237.44.200 03/04 07:51&quot;  &quot;180.217.213.98 03/04 07:51&quot;
[11] &quot;111.83.1.103 03/04 07:52&quot;   &quot;111.83.1.103 03/04 07:52&quot;  
[13] &quot;39.9.229.252 03/04 07:52&quot;   &quot;49.217.177.133 03/04 07:54&quot;
[15] &quot;49.216.47.100 03/04 07:55&quot;  &quot;140.127.221.10 03/04 07:55&quot;
[17] &quot;1.164.187.94 03/04 07:56&quot;   &quot;61.228.93.108 03/04 07:57&quot; </code></pre>
<ul>
<li>Finally, we combine all into one Push data frame.</li>
</ul>
<div class="sourceCode" id="cb40"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb40-1"><a href="creating-corpus.html#cb40-1" aria-hidden="true" tabindex="-1"></a>push.table <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb40-2"><a href="creating-corpus.html#cb40-2" aria-hidden="true" tabindex="-1"></a>      <span class="at">tag =</span> push.table.tag,</span>
<span id="cb40-3"><a href="creating-corpus.html#cb40-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">author =</span> push.table.author,</span>
<span id="cb40-4"><a href="creating-corpus.html#cb40-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">content =</span> push.table.content,</span>
<span id="cb40-5"><a href="creating-corpus.html#cb40-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">datetime =</span> push.table.datetime,</span>
<span id="cb40-6"><a href="creating-corpus.html#cb40-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">url =</span> article.url)</span>
<span id="cb40-7"><a href="creating-corpus.html#cb40-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-8"><a href="creating-corpus.html#cb40-8" aria-hidden="true" tabindex="-1"></a>push.table</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["tag"],"name":[1],"type":["chr"],"align":["left"]},{"label":["author"],"name":[2],"type":["chr"],"align":["left"]},{"label":["content"],"name":[3],"type":["chr"],"align":["left"]},{"label":["datetime"],"name":[4],"type":["chr"],"align":["left"]},{"label":["url"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"噓","2":"Roooz","3":": 反核就是ㄏ","4":"114.137.73.98 03/04 07:49","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"},{"1":"推","2":"hatephubbing","3":": 太陽罷工","4":"111.71.20.72 03/04 07:49","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"},{"1":"推","2":"ots625","3":": 事先演練","4":"114.47.58.54 03/04 07:49","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"},{"1":"推","2":"greensaru","3":": ATM壞掉惹，錢領不出來，嘻嘻","4":"223.137.213.87 03/04 07:49","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"},{"1":"推","2":"pureworld","3":": 缺電","4":"136.52.32.183 03/04 07:49","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"},{"1":"推","2":"ymib","3":": 電都被藏起來了","4":"1.200.41.224 03/04 07:49","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"},{"1":"推","2":"gginin7878","3":": https://youtu.be/gbEhkA46mDk","4":"111.251.62.141 03/04 07:50","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"},{"1":"→","2":"rererere147","3":": 不是停電 是人為疏失","4":"101.9.239.82 03/04 07:51","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"},{"1":"→","2":"s999132","3":": 窩不知道","4":"36.237.44.200 03/04 07:51","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"},{"1":"→","2":"kcclasaki","3":": 坐等班班有冷氣的到來","4":"180.217.213.98 03/04 07:51","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"},{"1":"推","2":"g1254501","3":": 4%仔不造謠會死膩？是沒有太陽 不是缺電","4":"111.83.1.103 03/04 07:52","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"},{"1":"→","2":"g1254501","3":": ！","4":"111.83.1.103 03/04 07:52","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"},{"1":"推","2":"tonyian","3":": https://i.imgur.com/yV3D8p1.jpg","4":"39.9.229.252 03/04 07:52","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"},{"1":"推","2":"swanc","3":": 窩不知道","4":"49.217.177.133 03/04 07:54","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"},{"1":"推","2":"cat5672","3":": https://imgur.com/VGRCVJF.jpg","4":"49.216.47.100 03/04 07:55","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"},{"1":"推","2":"daphney2266","3":": 還有班班有冷氣的到來...","4":"140.127.221.10 03/04 07:55","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"},{"1":"→","2":"snow3804","3":": 先讓你習慣","4":"1.164.187.94 03/04 07:56","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"},{"1":"→","2":"Lowpapa","3":": 太陽","4":"61.228.93.108 03/04 07:57","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div id="functional-programming" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> Functional Programming</h2>
<p>It should now be clear that there are several routines that we need to do again and again if we want to collect text data in large amounts:</p>
<ul>
<li>For each index page, we need to extract all the article hyperlinks of the page.</li>
<li>For each article hyperlink, we need to extract the article content, metadata, and the push comments.</li>
</ul>
<p>So, it would be great if we can wrap these two routines into two functions.</p>
<div id="extract_art_links" class="section level3" number="3.3.1">
<h3><span class="header-section-number">3.3.1</span> <code>extract_art_links()</code></h3>
<ul>
<li><code>extract_art_links()</code>: This function takes an HTML session <code>session</code> and an index page of the PTT Gossiping <code>index_page</code> as the arguments and extract all article links from the index page. It returns a vector of article links.</li>
</ul>
<div class="sourceCode" id="cb41"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb41-1"><a href="creating-corpus.html#cb41-1" aria-hidden="true" tabindex="-1"></a>extract_art_links <span class="ot">&lt;-</span> <span class="cf">function</span>(index_page, session){</span>
<span id="cb41-2"><a href="creating-corpus.html#cb41-2" aria-hidden="true" tabindex="-1"></a>  links.article <span class="ot">&lt;-</span> session <span class="sc">%&gt;%</span></span>
<span id="cb41-3"><a href="creating-corpus.html#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">session_jump_to</span>(index_page) <span class="sc">%&gt;%</span></span>
<span id="cb41-4"><a href="creating-corpus.html#cb41-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="st">&quot;a&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb41-5"><a href="creating-corpus.html#cb41-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_attr</span>(<span class="st">&quot;href&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb41-6"><a href="creating-corpus.html#cb41-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_subset</span>(<span class="st">&quot;[A-z]</span><span class="sc">\\</span><span class="st">.[0-9]+</span><span class="sc">\\</span><span class="st">.[A-z]</span><span class="sc">\\</span><span class="st">.[A-z0-9]+</span><span class="sc">\\</span><span class="st">.html&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb41-7"><a href="creating-corpus.html#cb41-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_c</span>(<span class="st">&quot;https://www.ptt.cc&quot;</span>,.)</span>
<span id="cb41-8"><a href="creating-corpus.html#cb41-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-9"><a href="creating-corpus.html#cb41-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(links.article)</span>
<span id="cb41-10"><a href="creating-corpus.html#cb41-10" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>For example, we can extract all the article links from the most recent index page:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb42-1"><a href="creating-corpus.html#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get index page</span></span>
<span id="cb42-2"><a href="creating-corpus.html#cb42-2" aria-hidden="true" tabindex="-1"></a>cur_index_page <span class="ot">&lt;-</span> <span class="fu">str_c</span>(ptt.url, <span class="st">&quot;/index&quot;</span>, page.latest, <span class="st">&quot;.html&quot;</span>)</span>
<span id="cb42-3"><a href="creating-corpus.html#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Get all article links from the most recent index page</span></span>
<span id="cb42-4"><a href="creating-corpus.html#cb42-4" aria-hidden="true" tabindex="-1"></a>cur_art_links <span class="ot">&lt;-</span><span class="fu">extract_art_links</span>(cur_index_page, gossiping)</span>
<span id="cb42-5"><a href="creating-corpus.html#cb42-5" aria-hidden="true" tabindex="-1"></a>cur_art_links</span></code></pre></div>
<pre class="Rout"><code> [1] &quot;https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html&quot;
 [2] &quot;https://www.ptt.cc/bbs/Gossiping/M.1646351387.A.5F9.html&quot;
 [3] &quot;https://www.ptt.cc/bbs/Gossiping/M.1646351400.A.06D.html&quot;
 [4] &quot;https://www.ptt.cc/bbs/Gossiping/M.1646351508.A.3DA.html&quot;
 [5] &quot;https://www.ptt.cc/bbs/Gossiping/M.1646351590.A.719.html&quot;
 [6] &quot;https://www.ptt.cc/bbs/Gossiping/M.1646351706.A.7B1.html&quot;
 [7] &quot;https://www.ptt.cc/bbs/Gossiping/M.1646351742.A.459.html&quot;
 [8] &quot;https://www.ptt.cc/bbs/Gossiping/M.1646351759.A.D79.html&quot;
 [9] &quot;https://www.ptt.cc/bbs/Gossiping/M.1646351773.A.329.html&quot;
[10] &quot;https://www.ptt.cc/bbs/Gossiping/M.1646351864.A.759.html&quot;
[11] &quot;https://www.ptt.cc/bbs/Gossiping/M.1646351918.A.594.html&quot;
[12] &quot;https://www.ptt.cc/bbs/Gossiping/M.1646351928.A.42C.html&quot;
[13] &quot;https://www.ptt.cc/bbs/Gossiping/M.1646351960.A.831.html&quot;
[14] &quot;https://www.ptt.cc/bbs/Gossiping/M.1646352057.A.FE4.html&quot;
[15] &quot;https://www.ptt.cc/bbs/Gossiping/M.1646352067.A.914.html&quot;
[16] &quot;https://www.ptt.cc/bbs/Gossiping/M.1646352080.A.F11.html&quot;
[17] &quot;https://www.ptt.cc/bbs/Gossiping/M.1646352097.A.7D9.html&quot;
[18] &quot;https://www.ptt.cc/bbs/Gossiping/M.1646352127.A.BE8.html&quot;
[19] &quot;https://www.ptt.cc/bbs/Gossiping/M.1646352138.A.46B.html&quot;
[20] &quot;https://www.ptt.cc/bbs/Gossiping/M.1646352194.A.38C.html&quot;</code></pre>
</div>
<div id="extract_article_push_tables" class="section level3" number="3.3.2">
<h3><span class="header-section-number">3.3.2</span> <code>extract_article_push_tables()</code></h3>
<ul>
<li><code>extract_article_push_tables()</code>: This function takes an article link <code>link</code> as the argument and extracts the metadata, textual contents, and pushes of the article. It returns a <em>list</em> of two elements—article and push data frames.</li>
</ul>
<div class="sourceCode" id="cb44"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb44-1"><a href="creating-corpus.html#cb44-1" aria-hidden="true" tabindex="-1"></a>extract_article_push_tables <span class="ot">&lt;-</span> <span class="cf">function</span>(link){</span>
<span id="cb44-2"><a href="creating-corpus.html#cb44-2" aria-hidden="true" tabindex="-1"></a>  article.url <span class="ot">&lt;-</span> link</span>
<span id="cb44-3"><a href="creating-corpus.html#cb44-3" aria-hidden="true" tabindex="-1"></a>  temp.html <span class="ot">&lt;-</span> gossiping <span class="sc">%&gt;%</span> <span class="fu">session_jump_to</span>(article.url) <span class="co"># link to the www</span></span>
<span id="cb44-4"><a href="creating-corpus.html#cb44-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># article header</span></span>
<span id="cb44-5"><a href="creating-corpus.html#cb44-5" aria-hidden="true" tabindex="-1"></a>  article.header <span class="ot">&lt;-</span> temp.html <span class="sc">%&gt;%</span></span>
<span id="cb44-6"><a href="creating-corpus.html#cb44-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_nodes</span>(<span class="st">&quot;span.article-meta-value&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># meta info regarding the article</span></span>
<span id="cb44-7"><a href="creating-corpus.html#cb44-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_text</span>()</span>
<span id="cb44-8"><a href="creating-corpus.html#cb44-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb44-9"><a href="creating-corpus.html#cb44-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># article meta</span></span>
<span id="cb44-10"><a href="creating-corpus.html#cb44-10" aria-hidden="true" tabindex="-1"></a>  article.author <span class="ot">&lt;-</span> article.header[<span class="dv">1</span>] <span class="sc">%&gt;%</span> <span class="fu">str_extract</span>(<span class="st">&quot;^[A-z0-9_]+&quot;</span>) <span class="co"># athuor</span></span>
<span id="cb44-11"><a href="creating-corpus.html#cb44-11" aria-hidden="true" tabindex="-1"></a>  article.title <span class="ot">&lt;-</span> article.header[<span class="dv">3</span>] <span class="co"># title</span></span>
<span id="cb44-12"><a href="creating-corpus.html#cb44-12" aria-hidden="true" tabindex="-1"></a>  article.datetime <span class="ot">&lt;-</span> article.header[<span class="dv">4</span>] <span class="co"># time stamp</span></span>
<span id="cb44-13"><a href="creating-corpus.html#cb44-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb44-14"><a href="creating-corpus.html#cb44-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># article content</span></span>
<span id="cb44-15"><a href="creating-corpus.html#cb44-15" aria-hidden="true" tabindex="-1"></a>  article.content <span class="ot">&lt;-</span> temp.html <span class="sc">%&gt;%</span></span>
<span id="cb44-16"><a href="creating-corpus.html#cb44-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_nodes</span>( <span class="co"># article body</span></span>
<span id="cb44-17"><a href="creating-corpus.html#cb44-17" aria-hidden="true" tabindex="-1"></a>      <span class="at">xpath =</span> <span class="st">&#39;//div[@id=&quot;main-content&quot;]/node()[not(self::div|self::span[@class=&quot;f2&quot;])]&#39;</span></span>
<span id="cb44-18"><a href="creating-corpus.html#cb44-18" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb44-19"><a href="creating-corpus.html#cb44-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb44-20"><a href="creating-corpus.html#cb44-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_c</span>(<span class="at">collapse =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb44-21"><a href="creating-corpus.html#cb44-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb44-22"><a href="creating-corpus.html#cb44-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Merge article table </span></span>
<span id="cb44-23"><a href="creating-corpus.html#cb44-23" aria-hidden="true" tabindex="-1"></a>  article.table <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb44-24"><a href="creating-corpus.html#cb44-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">datetime =</span> article.datetime,</span>
<span id="cb44-25"><a href="creating-corpus.html#cb44-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> article.title,</span>
<span id="cb44-26"><a href="creating-corpus.html#cb44-26" aria-hidden="true" tabindex="-1"></a>        <span class="at">author =</span> article.author,</span>
<span id="cb44-27"><a href="creating-corpus.html#cb44-27" aria-hidden="true" tabindex="-1"></a>        <span class="at">content =</span> article.content,</span>
<span id="cb44-28"><a href="creating-corpus.html#cb44-28" aria-hidden="true" tabindex="-1"></a>        <span class="at">url =</span> article.url</span>
<span id="cb44-29"><a href="creating-corpus.html#cb44-29" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb44-30"><a href="creating-corpus.html#cb44-30" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb44-31"><a href="creating-corpus.html#cb44-31" aria-hidden="true" tabindex="-1"></a>  <span class="co"># push nodes</span></span>
<span id="cb44-32"><a href="creating-corpus.html#cb44-32" aria-hidden="true" tabindex="-1"></a>  article.push <span class="ot">&lt;-</span> temp.html <span class="sc">%&gt;%</span> </span>
<span id="cb44-33"><a href="creating-corpus.html#cb44-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_nodes</span>(<span class="at">xpath =</span> <span class="st">&quot;//div[@class = &#39;push&#39;]&quot;</span>) <span class="co"># extracting pushes</span></span>
<span id="cb44-34"><a href="creating-corpus.html#cb44-34" aria-hidden="true" tabindex="-1"></a>    <span class="co"># </span><span class="al">NOTE</span><span class="co">: If CSS is used, div.push does a lazy match (extracting div.push.... also)</span></span>
<span id="cb44-35"><a href="creating-corpus.html#cb44-35" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb44-36"><a href="creating-corpus.html#cb44-36" aria-hidden="true" tabindex="-1"></a>  <span class="co"># push tags    </span></span>
<span id="cb44-37"><a href="creating-corpus.html#cb44-37" aria-hidden="true" tabindex="-1"></a>  push.table.tag <span class="ot">&lt;-</span> article.push <span class="sc">%&gt;%</span> </span>
<span id="cb44-38"><a href="creating-corpus.html#cb44-38" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_nodes</span>(<span class="st">&quot;span.push-tag&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb44-39"><a href="creating-corpus.html#cb44-39" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>) <span class="co"># push types (like or dislike)</span></span>
<span id="cb44-40"><a href="creating-corpus.html#cb44-40" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb44-41"><a href="creating-corpus.html#cb44-41" aria-hidden="true" tabindex="-1"></a>  <span class="co"># push author id</span></span>
<span id="cb44-42"><a href="creating-corpus.html#cb44-42" aria-hidden="true" tabindex="-1"></a>  push.table.author <span class="ot">&lt;-</span> article.push <span class="sc">%&gt;%</span> </span>
<span id="cb44-43"><a href="creating-corpus.html#cb44-43" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_nodes</span>(<span class="st">&quot;span.push-userid&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb44-44"><a href="creating-corpus.html#cb44-44" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>) <span class="co"># author</span></span>
<span id="cb44-45"><a href="creating-corpus.html#cb44-45" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb44-46"><a href="creating-corpus.html#cb44-46" aria-hidden="true" tabindex="-1"></a>  <span class="co"># push content    </span></span>
<span id="cb44-47"><a href="creating-corpus.html#cb44-47" aria-hidden="true" tabindex="-1"></a>  push.table.content <span class="ot">&lt;-</span> article.push <span class="sc">%&gt;%</span> </span>
<span id="cb44-48"><a href="creating-corpus.html#cb44-48" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_nodes</span>(<span class="st">&quot;span.push-content&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb44-49"><a href="creating-corpus.html#cb44-49" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>)</span>
<span id="cb44-50"><a href="creating-corpus.html#cb44-50" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb44-51"><a href="creating-corpus.html#cb44-51" aria-hidden="true" tabindex="-1"></a>  <span class="co"># push datetime      </span></span>
<span id="cb44-52"><a href="creating-corpus.html#cb44-52" aria-hidden="true" tabindex="-1"></a>  push.table.datetime <span class="ot">&lt;-</span> article.push <span class="sc">%&gt;%</span> </span>
<span id="cb44-53"><a href="creating-corpus.html#cb44-53" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_nodes</span>(<span class="st">&quot;span.push-ipdatetime&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb44-54"><a href="creating-corpus.html#cb44-54" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>) <span class="co"># push time stamp</span></span>
<span id="cb44-55"><a href="creating-corpus.html#cb44-55" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb44-56"><a href="creating-corpus.html#cb44-56" aria-hidden="true" tabindex="-1"></a>  <span class="co"># merge push table</span></span>
<span id="cb44-57"><a href="creating-corpus.html#cb44-57" aria-hidden="true" tabindex="-1"></a>  push.table <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb44-58"><a href="creating-corpus.html#cb44-58" aria-hidden="true" tabindex="-1"></a>          <span class="at">tag =</span> push.table.tag,</span>
<span id="cb44-59"><a href="creating-corpus.html#cb44-59" aria-hidden="true" tabindex="-1"></a>          <span class="at">author =</span> push.table.author,</span>
<span id="cb44-60"><a href="creating-corpus.html#cb44-60" aria-hidden="true" tabindex="-1"></a>          <span class="at">content =</span> push.table.content,</span>
<span id="cb44-61"><a href="creating-corpus.html#cb44-61" aria-hidden="true" tabindex="-1"></a>          <span class="at">datetime =</span> push.table.datetime,</span>
<span id="cb44-62"><a href="creating-corpus.html#cb44-62" aria-hidden="true" tabindex="-1"></a>          <span class="at">url =</span> article.url</span>
<span id="cb44-63"><a href="creating-corpus.html#cb44-63" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb44-64"><a href="creating-corpus.html#cb44-64" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb44-65"><a href="creating-corpus.html#cb44-65" aria-hidden="true" tabindex="-1"></a>  <span class="co"># return</span></span>
<span id="cb44-66"><a href="creating-corpus.html#cb44-66" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb44-67"><a href="creating-corpus.html#cb44-67" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">list</span>(<span class="at">article.table =</span> article.table, </span>
<span id="cb44-68"><a href="creating-corpus.html#cb44-68" aria-hidden="true" tabindex="-1"></a>              <span class="at">push.table =</span> push.table))</span>
<span id="cb44-69"><a href="creating-corpus.html#cb44-69" aria-hidden="true" tabindex="-1"></a>}<span class="co">#endfunc</span></span></code></pre></div>
<p>For example, we can get the <code>article</code> and <code>push</code> tables from the first article link:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb45-1"><a href="creating-corpus.html#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">extract_article_push_tables</span>(cur_art_links[<span class="dv">1</span>])</span></code></pre></div>
<pre class="Rout"><code>$article.table
# A tibble: 1 × 5
  datetime                 title                    author   content     url    
  &lt;chr&gt;                    &lt;chr&gt;                    &lt;chr&gt;    &lt;chr&gt;       &lt;chr&gt;  
1 Fri Mar  4 07:48:09 2022 [問卦] 才3月為什麼就停電 yata4547 &quot;現在才3月… https:…

$push.table
# A tibble: 18 × 5
   tag   author       content                                 datetime   url    
   &lt;chr&gt; &lt;chr&gt;        &lt;chr&gt;                                   &lt;chr&gt;      &lt;chr&gt;  
 1 噓    Roooz        : 反核就是ㄏ                            114.137.7… https:…
 2 推    hatephubbing : 太陽罷工                              111.71.20… https:…
 3 推    ots625       : 事先演練                              114.47.58… https:…
 4 推    greensaru    : ATM壞掉惹，錢領不出來，嘻嘻           223.137.2… https:…
 5 推    pureworld    : 缺電                                  136.52.32… https:…
 6 推    ymib         : 電都被藏起來了                        1.200.41.… https:…
 7 推    gginin7878   : https://youtu.be/gbEhkA46mDk          111.251.6… https:…
 8 →     rererere147  : 不是停電 是人為疏失                   101.9.239… https:…
 9 →     s999132      : 窩不知道                              36.237.44… https:…
10 →     kcclasaki    : 坐等班班有冷氣的到來                  180.217.2… https:…
11 推    g1254501     : 4%仔不造謠會死膩？是沒有太陽 不是缺電 111.83.1.… https:…
12 →     g1254501     : ！                                    111.83.1.… https:…
13 推    tonyian      : https://i.imgur.com/yV3D8p1.jpg       39.9.229.… https:…
14 推    swanc        : 窩不知道                              49.217.17… https:…
15 推    cat5672      : https://imgur.com/VGRCVJF.jpg         49.216.47… https:…
16 推    daphney2266  : 還有班班有冷氣的到來...               140.127.2… https:…
17 →     snow3804     : 先讓你習慣                            1.164.187… https:…
18 →     Lowpapa      : 太陽                                  61.228.93… https:…</code></pre>
</div>
<div id="streamline-the-codes" class="section level3" number="3.3.3">
<h3><span class="header-section-number">3.3.3</span> Streamline the Codes</h3>
<p>Now we can simplify our codes quite a bit:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb47-1"><a href="creating-corpus.html#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get index page</span></span>
<span id="cb47-2"><a href="creating-corpus.html#cb47-2" aria-hidden="true" tabindex="-1"></a>cur_index_page <span class="ot">&lt;-</span> <span class="fu">str_c</span>(ptt.url, <span class="st">&quot;/index&quot;</span>, page.latest, <span class="st">&quot;.html&quot;</span>)</span>
<span id="cb47-3"><a href="creating-corpus.html#cb47-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-4"><a href="creating-corpus.html#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Scrape all article.tables and push.tables from each article hyperlink</span></span>
<span id="cb47-5"><a href="creating-corpus.html#cb47-5" aria-hidden="true" tabindex="-1"></a>cur_index_page <span class="sc">%&gt;%</span></span>
<span id="cb47-6"><a href="creating-corpus.html#cb47-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">extract_art_links</span>(<span class="at">session =</span> gossiping) <span class="sc">%&gt;%</span></span>
<span id="cb47-7"><a href="creating-corpus.html#cb47-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(extract_article_push_tables) <span class="ot">-&gt;</span> ptt_data</span></code></pre></div>
<div class="sourceCode" id="cb48"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb48-1"><a href="creating-corpus.html#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># number of articles on this index page</span></span>
<span id="cb48-2"><a href="creating-corpus.html#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(ptt_data)</span></code></pre></div>
<pre class="Rout"><code>[1] 20</code></pre>
<div class="sourceCode" id="cb50"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb50-1"><a href="creating-corpus.html#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check the first contents of 1st hyperlink</span></span>
<span id="cb50-2"><a href="creating-corpus.html#cb50-2" aria-hidden="true" tabindex="-1"></a>ptt_data[[<span class="dv">1</span>]]<span class="sc">$</span>article.table</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["datetime"],"name":[1],"type":["chr"],"align":["left"]},{"label":["title"],"name":[2],"type":["chr"],"align":["left"]},{"label":["author"],"name":[3],"type":["chr"],"align":["left"]},{"label":["content"],"name":[4],"type":["chr"],"align":["left"]},{"label":["url"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"Fri Mar  4 07:48:09 2022","2":"[問卦] 才3月為什麼就停電","3":"yata4547","4":"現在才3月 很少人開冷氣\\n\\n用電量應該不大才對\\n\\n那等到夏天\\n\\n家家戶戶都開著冷氣\\n\\n那不就完了\\n\\n反正喊個抗中保台 騙騙賤民 亂搞也沒差\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="sourceCode" id="cb51"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb51-1"><a href="creating-corpus.html#cb51-1" aria-hidden="true" tabindex="-1"></a>ptt_data[[<span class="dv">1</span>]]<span class="sc">$</span>push.table</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["tag"],"name":[1],"type":["chr"],"align":["left"]},{"label":["author"],"name":[2],"type":["chr"],"align":["left"]},{"label":["content"],"name":[3],"type":["chr"],"align":["left"]},{"label":["datetime"],"name":[4],"type":["chr"],"align":["left"]},{"label":["url"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"噓","2":"Roooz","3":": 反核就是ㄏ","4":"114.137.73.98 03/04 07:49","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"},{"1":"推","2":"hatephubbing","3":": 太陽罷工","4":"111.71.20.72 03/04 07:49","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"},{"1":"推","2":"ots625","3":": 事先演練","4":"114.47.58.54 03/04 07:49","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"},{"1":"推","2":"greensaru","3":": ATM壞掉惹，錢領不出來，嘻嘻","4":"223.137.213.87 03/04 07:49","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"},{"1":"推","2":"pureworld","3":": 缺電","4":"136.52.32.183 03/04 07:49","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"},{"1":"推","2":"ymib","3":": 電都被藏起來了","4":"1.200.41.224 03/04 07:49","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"},{"1":"推","2":"gginin7878","3":": https://youtu.be/gbEhkA46mDk","4":"111.251.62.141 03/04 07:50","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"},{"1":"→","2":"rererere147","3":": 不是停電 是人為疏失","4":"101.9.239.82 03/04 07:51","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"},{"1":"→","2":"s999132","3":": 窩不知道","4":"36.237.44.200 03/04 07:51","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"},{"1":"→","2":"kcclasaki","3":": 坐等班班有冷氣的到來","4":"180.217.213.98 03/04 07:51","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"},{"1":"推","2":"g1254501","3":": 4%仔不造謠會死膩？是沒有太陽 不是缺電","4":"111.83.1.103 03/04 07:52","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"},{"1":"→","2":"g1254501","3":": ！","4":"111.83.1.103 03/04 07:52","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"},{"1":"推","2":"tonyian","3":": https://i.imgur.com/yV3D8p1.jpg","4":"39.9.229.252 03/04 07:52","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"},{"1":"推","2":"swanc","3":": 窩不知道","4":"49.217.177.133 03/04 07:54","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"},{"1":"推","2":"cat5672","3":": https://imgur.com/VGRCVJF.jpg","4":"49.216.47.100 03/04 07:55","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"},{"1":"推","2":"daphney2266","3":": 還有班班有冷氣的到來...","4":"140.127.221.10 03/04 07:55","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"},{"1":"→","2":"snow3804","3":": 先讓你習慣","4":"1.164.187.94 03/04 07:56","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"},{"1":"→","2":"Lowpapa","3":": 太陽","4":"61.228.93.108 03/04 07:57","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<ul>
<li>Finally, the last thing we can do is to combine all article tables from each index page into one; and all push tables into one for later analysis.</li>
</ul>
<div class="sourceCode" id="cb52"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb52-1"><a href="creating-corpus.html#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge all article.tables into one</span></span>
<span id="cb52-2"><a href="creating-corpus.html#cb52-2" aria-hidden="true" tabindex="-1"></a>article.table.all <span class="ot">&lt;-</span> ptt_data <span class="sc">%&gt;%</span> </span>
<span id="cb52-3"><a href="creating-corpus.html#cb52-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="cf">function</span>(x) x<span class="sc">$</span>article.table) <span class="sc">%&gt;%</span></span>
<span id="cb52-4"><a href="creating-corpus.html#cb52-4" aria-hidden="true" tabindex="-1"></a>  bind_rows</span>
<span id="cb52-5"><a href="creating-corpus.html#cb52-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-6"><a href="creating-corpus.html#cb52-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge all push.tables into one</span></span>
<span id="cb52-7"><a href="creating-corpus.html#cb52-7" aria-hidden="true" tabindex="-1"></a>push.table.all <span class="ot">&lt;-</span> ptt_data <span class="sc">%&gt;%</span></span>
<span id="cb52-8"><a href="creating-corpus.html#cb52-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="cf">function</span>(x) x<span class="sc">$</span>push.table) <span class="sc">%&gt;%</span></span>
<span id="cb52-9"><a href="creating-corpus.html#cb52-9" aria-hidden="true" tabindex="-1"></a>  bind_rows</span>
<span id="cb52-10"><a href="creating-corpus.html#cb52-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-11"><a href="creating-corpus.html#cb52-11" aria-hidden="true" tabindex="-1"></a>article.table.all</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["datetime"],"name":[1],"type":["chr"],"align":["left"]},{"label":["title"],"name":[2],"type":["chr"],"align":["left"]},{"label":["author"],"name":[3],"type":["chr"],"align":["left"]},{"label":["content"],"name":[4],"type":["chr"],"align":["left"]},{"label":["url"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"Fri Mar  4 07:48:09 2022","2":"[問卦] 才3月為什麼就停電","3":"yata4547","4":"現在才3月 很少人開冷氣\\n\\n用電量應該不大才對\\n\\n那等到夏天\\n\\n家家戶戶都開著冷氣\\n\\n那不就完了\\n\\n反正喊個抗中保台 騙騙賤民 亂搞也沒差\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"},{"1":"Fri Mar  4 07:49:39 2022","2":"[問卦] 禮拜五要做什麼才cool","3":"Firstshadow","4":"嗨嗨\\n\\n大家早上好壓壓ka~\\n\\n\\n就是喇\\n\\n小魯弟妹今天睡醒後才發現\\n\\n原來今天是禮拜五\\n\\n難怪身體整個都懶懶散散噠！！\\n\\n\\n抬頭看窗外\\n\\n今天天氣也噗錯\\n\\n搭配著這個一週的最後一天工作日\\n\\n要做什摸才cool呢！\\n\\n\\n有沒有禮拜五要做什摸才cool的八卦喇！！\\n\\n\\nわたし、気になります~http://i.imgur.com/n1VzFhV.jpg(づ′・ω・）づ ~\\n\\n--\\nSent from my Pixel 6 XL.\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351387.A.5F9.html"},{"1":"Fri Mar  4 07:49:58 2022","2":"[新聞] 蔡阿嘎驚覺喉嚨痛就醫！　「咽喉紅腫起","3":"LIN9","4":"1.媒體來源:ETtoday\\n\\n\\n2.記者署名:黃庠棻\\n\\n\\n3.完整新聞標題:蔡阿嘎驚覺喉嚨痛就醫！　「咽喉紅腫起水泡」習慣竟藏罹癌風險\\n\\n\\n4.完整新聞內文:\\n記者黃庠棻／綜合報導\\n\\nYouTuber蔡阿嘎以「愛台灣」形象打開知名度，拍攝主題多元，親民又幽默的性格累積大\\n票粉絲，和老婆「二伯」結婚後，陸續迎來2個兒子「蔡桃貴」、「蔡波能」，私下常在\\n社群平台分享日常，沒想到３日晚間在社群網站上發文，透露有喉嚨痛症狀，緊急就醫後\\n才發現真正的原因，引起熱議。\\n\\n蔡阿嘎在3日晚間於社群網站上更新近況，一開頭就寫下「實在是有點蠢，夜路走多遇到\\n鬼了」，這才透露自己發現有喉嚨痛症狀，原本以為是感冒，結果就醫檢查後，才被醫生\\n告知是「喉嚨燙傷」，原來是他平時就愛喝「燒滾滾」的熱湯，前兩天猛喝了麻辣燙的湯\\n後，又辣又燙的飲食讓他的喉嚨出狀況。\\n\\n而蔡阿嘎被醫生診斷出「喉嚨燙傷」，咽喉整個紅腫又起了水泡，他更曬出一張張大嘴巴\\n讓兒子蔡桃貴檢查的照片，只見蔡桃貴一臉擔心地看著他的嘴巴，似乎相當擔心父親的傷\\n勢，而他也藉機給兒子機會教育一番，「喝湯要先吹涼才不會像爸爸一樣受傷喔」。\\n\\n對此，蔡阿嘎喝熱湯意外燙傷喉嚨的消息曝光後，也吸引許多網友討論，紛紛留言「祝阿\\n嘎早日康復」、「喝湯真的要小心，很容易會食道癌喔」、「貴董的表情看起來很擔心你\\n耶」、「阿嘎真的要注意，湯不要喝太熱的」、「紅腫起水泡，聽起來很嚴重欸」，引起\\n熱議。\\n\\n\\n5.完整新聞連結 (或短網址)https://reurl.cc/oe4Ebj6.備註:--","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351400.A.06D.html"},{"1":"Fri Mar  4 07:51:46 2022","2":"Re: [問卦] 2000-2016年有大規模全台停電嗎？","3":"g10","4":": 到了今年2022回想起陳水扁跟馬英九的時代才知道: ，那根本是台灣的盛世啊是跳電 不是缺電\\n是台電的問題\\n民進黨也是努力擦國民黨的屎\\n不要只會網路嘴炮 可憐4%\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351508.A.3DA.html"},{"1":"Fri Mar  4 07:53:07 2022","2":"[問卦] 如果孫立人在基輔會怎麼打這場突圍仗？？","3":"NuCat","4":"如題　誠心發問\\n\\n公認的國軍戰神　用兵如神\\n\\n外號東方隆梅爾　叢林之狐　\\n\\n當年統率新一軍打得林彪抱頭鼠竄　\\n\\n\\n如果他今天在烏克蘭防守基輔　\\n\\n\\n會怎麼打這場絕望的戰役？\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351590.A.719.html"},{"1":"Fri Mar  4 07:55:02 2022","2":"[問卦] 為何國民黨線人安插台電民進黨不抓？","3":"GreenMay22","4":"RT，\\n這幾次跳電都是人為疏失，\\n關電夠不夠根本無關，\\n如果法院真的是八卦版肥宅邏輯說的民進黨開的，\\n那民進黨法院為什麼不把這些國民黨安插去台電的線人，\\n抓起來手穿鐵絲、槍殺處理？\\n\\n要放任這些跟販賣私菸同等罪刑的垃圾逍遙法外？\\n\\n還讓這些線人繼續在台電作惡多端、禍國殃民啊？\\n\\n八卦版邏輯到底有多差，才會相信這種言論？\\n\\n--\\n棺材？散了！\\n屍首？不見了！\\n師父？被捕了！\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351706.A.7B1.html"},{"1":"Fri Mar  4 07:55:40 2022","2":"Re: [問卦] 台灣的電力到底是哪裡出了問題","3":"mynewid","4":"就基載電力呀\\n本來規劃說用深澳取代核能\\n核能有好有壞請詳閱公開說明書\\n總之乾淨煤被中国国民党跟鄉民嗆爆\\n公投否決\\n如果沒那個公投\\n現在已經上線爽用了\\n沒有深澳之後\\n急就章要用大潭\\n好死不死\\n弄到藻礁\\n又被靠夭\\n只好再退縮\\n一退下去又是幾年\\n只能說還好上次中国国民党力推的藻礁公投沒過\\n大概再3年就有機會ok\\n不然這下大概要再拖個10年\\n中国国民党就那樣\\n至於什麼風電綠能喔\\n那些只是大發財的工具\\n你各位不要想太多\\n嘻嘻: 如題: 我記得有記憶以來台灣基本上除了大型颱風還是地震 不然根本沒有停過電: 不過最近幾年卻全台各種花式停電: https://i.imgur.com/hHXaZRh.jpg: 我還特別去找了一下 發現2017之前就是2002了: 所以為什麼這15年都可以相安無事: 這篇能不能釣到什麼電學專家回答我的疑惑--","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351742.A.459.html"},{"1":"Fri Mar  4 07:55:57 2022","2":"[問卦] 菜鳥報到第四天 禮拜五晚餐要吃啥慶祝","3":"BigOwl","4":"大家好 我是報到第四天的阿肥啦\\n\\n今天是阿肥人生第一份正職工作第四天報到\\n\\n禮拜五晚餐 要吃什麼慶祝一下呢 ？\\n\\n有沒有推薦的 乳題 有沒有八卦\\n\\n-----\\nSent from JPTT on my Sony J9110.\\n\\n--閣下癖好很特殊哦昨天吃了 預計今天吃大戶屋","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351759.A.D79.html"},{"1":"Fri Mar  4 07:56:11 2022","2":"[問卦] 有沒有破壞風水的八卦？","3":"remora","4":"https://www.ettoday.net/amp/amp_news.php7?news_id=508617美指中國破壞南海「風水」　全真道士：跟貧道談風水？\\n\\n美國人也會看風水了？美國人是不是找不到理由，連風水都拿來凹了？有沒有造島破壞風\\n水的八卦？\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351773.A.329.html"},{"1":"Fri Mar  4 07:57:41 2022","2":"[新聞] 王美花不發雞排「我來發啦！」林為洲經","3":"xiemark","4":"1.媒體來源:\\n東森新聞雲\\n\\n2.記者署名:\\n鄒鎮宇\\n\\n3.完整新聞標題:\\n王美花不發雞排「我來發啦！」林為洲經濟部門口送303份師園雞排\\n\\n\\n4.完整新聞內文:\\n\\n記者鄒鎮宇／綜合報導\\n\\n鴻海創辦人郭台銘去年因四大公投未過關而說「明年一定缺電」，當時經濟部長王美花曾\\n在節目中跟郭台銘對賭雞排，直言台灣不缺電。沒想到，3日發生全台大停電事件，王美\\n花在記者會上表示「不是缺電問題」，因此拒發雞排。對此，立法委員林為洲表示，「部\\n長不發，我來發啦！」\\n\\n立法委員林為洲3日多次發文關心停電議題，也呼籲王美花「如果不下台，欠的雞排請記\\n得還」；他認為，台電在2日深夜停電影響6000多戶時，就該審慎面對並找出原因，沒想\\n到3日還是發生全台停電的情況，「短短10個月內台灣發生三起大停電事件，請問總統蔡\\n英文、蘇貞昌院長、經濟部王美花部長、台灣電力公司，這次停電事件誰要負責？」\\n\\n面對王美花3日晚間的回應，林為洲深夜在臉書直言「部長不發，我來發啦！」，表示他4\\n日下午會在經濟部門口、台北市福州街15號發放303份師園雞排，「發完爲止」、「歡迎\\n明天來領！」\\n\\n該文曝光後吸引不少網友留言，「讚啦」、「要切要辣」、「要來興達電廠門口發啦，這\\n樣高雄人才卡到得位置啊」、「希望明天不要再跳電」、「排隊排起來」、「拜託台中也\\n要」、「深夜發這種文，不講武德」、「發雞蛋啦」、「看來我該去排隊了」。\\n\\n\\n\\n\\n5.完整新聞連結 (或短網址)需放媒體原始連結，不可用轉載媒體連結:https://www.ettoday.net/news/20220304/2200780.htm6.備註:\\n王美花不發?\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351864.A.759.html"},{"1":"Fri Mar  4 07:58:34 2022","2":"Re: [新聞] 蔡英文：維持供電穩定   跟上全球","3":"a520","4":"複習當時蔡的豪洨https://i.imgur.com/Pp9qPWa.gif說實在的講很容易做了什麼\\n\\n配套措施在哪裡\\n\\n怎麼樣應對電廠分配電力問題\\n\\n甚至是空污問題\\n\\n只有空話........讓人民有希望\\n\\n到現在很絕望https://i.imgur.com/I0iAk6c.jpg絕對不是缺點是輪流用電\\n\\n暖市可以用一下邁味燈https://i.imgur.com/y1oKPtV.jpg南電北送不合理\\n\\n既然南部很愛不乾淨的發電\\n\\n請用不乾淨的價格付電費\\n\\n而北部大部分支持核能\\n\\n所以電費相對便宜\\n\\n這比較合理https://i.imgur.com/OhdPKEv.jpg未開先猜死忠的\\n\\n會先爆氣翻肚https://i.imgur.com/1CRfgKn.jpg死忠的\\n\\n一條龍全力護駕\\n\\n新聞媒體整個安安靜靜當作沒停電過\\n\\n網軍側翼公關洗起來護航護起來\\n\\n製圖部開始趕工洗起來！！！！！！\\n\\n科科\\n\\n我比較好奇大砲張主播現在會說什麼\\n\\n遇到某些團體就乖乖不用檢討對吧\\n\\n呵呵\\n\\n停電0容忍\\n綠能你不能\\n\\n-----\\nSent from JPTT on my Samsung SM-G9910.\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351918.A.594.html"},{"1":"Fri Mar  4 07:58:46 2022","2":"[問卦] 台灣會不會發生南北戰爭?","3":"awestricken","4":"南部人救了台灣一次又一次\\n\\n除了上次讓北部人免於遭受核災的風險之外\\n\\n這次又犧牲自己，浪漫到晚上吃燭光晚餐\\n\\n換來台灣提早達成非核家園\\n\\n結果北部人無情的嘲笑、嘲諷\\n\\n會不會哪天南部人直接脾氣上來\\n\\n直接發動百萬山豬大軍，一人騎一隻山豬進攻北台灣\\n\\n就問北部的人怕不怕\\n\\n美國南北戰爭解放的是黑奴\\n\\n台灣南北戰爭能夠解放菸奴嗎?\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351928.A.42C.html"},{"1":"Fri Mar  4 07:59:16 2022","2":"Re: [新聞] 台電補償方案出爐！工業及家庭用電費95折","3":"e741000","4":"我生意人啦\\n台電這樣停電\\n一停一供我家精密儀表出問題\\n被啟動電流燒了\\n可以跟台電求償嗎\\n我打191X都忙線\\n這種要怎麼辦\\n台電績效年終可以歸0嗎\\n賠錢還敢領喔\\n\\n-----\\nSent from JPTT on my Samsung SM-G975F.\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351960.A.831.html"},{"1":"Fri Mar  4 08:00:55 2022","2":"[問卦] 皮卡丘的電哪裡來的","3":"Flitz","4":"如題\\n\\n皮卡丘可以從臉頰發電\\n\\n是不是裡面有藏電池\\n\\n要另外充電嗎\\n\\n皮卡丘的電是從哪來的\\n\\n有無八卦\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1646352057.A.FE4.html"},{"1":"Fri Mar  4 08:01:05 2022","2":"[問卦] 好想兔真的很紅？","3":"pp771017","4":"以前我還真不知道有這個東西\\n\\n直到我一個朋友有在收藏才知道\\n\\n甚至連高捷都有合作\\n\\n他的公仔也不便宜\\n\\n但我真的體會不出他的萌點\\n\\n這東西到底多紅啊？\\n\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1646352067.A.914.html"},{"1":"Fri Mar  4 08:01:18 2022","2":"[問卦] 肥宅運動減肥瘦了10公斤有加分嗎？","3":"s66449","4":"如果肥宅每天持續不停的運動\\n\\n不管是跑步、有氧等等\\n\\n每天都流出大量辛苦的汗水o’_’o\\n\\n最後終於瘦下10公斤了\\n\\n\\n\\n\\n這種肥宅有加分嗎？\\n\\n會比較容易交到女朋友或是砲友嗎？\\n\\n\\n\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1646352080.A.F11.html"},{"1":"Fri Mar  4 08:01:34 2022","2":"[新聞] 國防部首度證實 將量產雄昇飛彈","3":"Happybuddha","4":"備註請放最後面 違者新聞文章刪除\\n\\n1.媒體來源:\\n中國時報\\n\\n2.記者署名:\\n2022/03/04 中國時報 呂昭隆\\n\\n3.完整新聞標題:\\n國防部首度證實 將量產雄昇飛彈\\n\\n4.完整新聞內文:\\n國防部最新送交立法院的書面報告，首度證實代號「雄昇飛彈」為地對地巡弋飛彈，屬遠\\n距精準武器。報告也首度透露，中科院去年已順利製造各型飛彈約500枚，擴建的飛彈廠\\n房將於今年6月底前完成，各型飛彈年產能將大幅增加；另指出2024年是量產高峰期，全\\n年生產各型飛彈數量，是2019年5倍。\\n\\n\\n立法院審查通過「海空戰力提升計畫採購特別預算案」，金額約2370億元，籌獲8項10種\\n武器裝備，期程為今年至2026年，分5年執行。\\n\\n上個會期審查海空戰力特別預算，國防部以機密為由，對「雄昇飛彈」守口如瓶，今始證\\n實是地對地巡弋飛彈。但雄昇飛彈預訂量產多少枚？年產能究竟是多少？國防部只在報告\\n中指出雄昇飛彈與雄二飛彈是共用生產線，兩者合計的年產能目前為81枚，未來年產能合\\n計可提高到131枚。因此，雄昇飛彈量產的數量，很技巧性隱藏於報告內容中。\\n\\n據了解，雄昇飛彈就是外界通稱的雄二E巡弋飛彈，射程估計1000公里，甚至更遠，打擊\\n範圍可達中國大陸內陸，具有源頭打擊戰力，估計未來5年的量產數至少100枚以上。\\n\\n此外，報告指出，中科院新型飛彈量產廠房在今年6月完工啟用後，雄三超音速反艦飛彈\\n，由年產20枚提升為70枚；陸射／海射型劍二飛彈系統，原本年產40枚，現年產能將達\\n150枚；天弓三型防空飛彈的年產能48枚，也將提升為96枚。\\n\\n在反制作戰武器系統部分，報告指出，萬劍彈年產能現為18枚，可提升至每年50枚；至於\\n無人攻擊載具（劍翔無人機）每年則量產48架。\\n\\n具長時間滯空能力的劍翔無人機可搭載反輻射飛彈，以摧毀敵軍防空雷達，提升我遠距作\\n戰效能。中科院在2019年曾公開展示，包括無人機及發射車，一輛發射車可裝載12架無人\\n機。\\n\\n\\n\\n5.完整新聞連結https://www.chinatimes.com/newspapers/20220304000391-260118?chdtv6.備註:\\n\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1646352097.A.7D9.html"},{"1":"Fri Mar  4 08:02:05 2022","2":"[問卦] 扳倒俄羅斯，下一個就中國了吧？","3":"lamigo520","4":"美國收烏克蘭當小弟，用這個小弟去挑釁俄羅斯，逼迫俄羅斯出手，再以輿論來招呼旗下民\\n主小弟用捍衛民主自由的名義圍攻俄羅斯。\\n\\n等到扳倒俄羅斯，下一個就是中國了吧？\\n\\n那麼，用來擔任敢死隊的小弟人選，應該就是彎彎了，嘻嘻\\n\\n有八卦？\\n\\n--\\n推 DevilHotel: 五樓靠賣屁股致富的啊 問他 223.136.200.32 01/20 10:46\\n推 key123987: 夾起來穿女裝\\n36.225.226.225 01/20 10:46\\n→ DevilHotel: 五樓外加成立愛滋共存聯盟 223.136.200.32 01/20 10:46\\n推 DOOT: 你貼自己照片五樓幫你鑒定220.134.131.232 01/20 10:46\\n→ leoqqqoel: 可以 五樓靠他的嫩穴名揚四海 116.241.59.52 01/20 10\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1646352127.A.BE8.html"},{"1":"Fri Mar  4 08:02:15 2022","2":"[問卦] 誰是台灣的諸葛孔明呢？","3":"howlongbing","4":"小弟阿肥拉，\\n\\n最近很迷三國，\\n\\n看到諸葛亮從加入劉備陣營後幫劉備拿了荊州、益州\\n\\n整頓了當時沒怎麼開發的益州，\\n\\n就算中期關羽被偷襲掉了荊州，劉備送大量人頭給吳，\\n\\n但從沒資源，發展到可以跟占據兩邊的魏吳抗衡，\\n\\n有這樣的人物可以救台灣嗎?\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1646352138.A.46B.html"},{"1":"Fri Mar  4 08:03:12 2022","2":"Re: [新聞] 台電補償方案出爐！工業及家庭用電費95折","3":"werqq","4":"小妹覺得啦\\n\\n之前台電不是說\\n\\n因為鵝羅斯烏克蘭戰爭\\n\\n導致天然氣價格 石油飆高\\n\\n3月底還要開會議討論漲價\\n\\n484這次漲完就沒差啊？\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1646352194.A.38C.html"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="sourceCode" id="cb53"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb53-1"><a href="creating-corpus.html#cb53-1" aria-hidden="true" tabindex="-1"></a>push.table.all</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["tag"],"name":[1],"type":["chr"],"align":["left"]},{"label":["author"],"name":[2],"type":["chr"],"align":["left"]},{"label":["content"],"name":[3],"type":["chr"],"align":["left"]},{"label":["datetime"],"name":[4],"type":["chr"],"align":["left"]},{"label":["url"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"噓","2":"Roooz","3":": 反核就是ㄏ","4":"114.137.73.98 03/04 07:49","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"},{"1":"推","2":"hatephubbing","3":": 太陽罷工","4":"111.71.20.72 03/04 07:49","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"},{"1":"推","2":"ots625","3":": 事先演練","4":"114.47.58.54 03/04 07:49","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"},{"1":"推","2":"greensaru","3":": ATM壞掉惹，錢領不出來，嘻嘻","4":"223.137.213.87 03/04 07:49","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"},{"1":"推","2":"pureworld","3":": 缺電","4":"136.52.32.183 03/04 07:49","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"},{"1":"推","2":"ymib","3":": 電都被藏起來了","4":"1.200.41.224 03/04 07:49","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"},{"1":"推","2":"gginin7878","3":": https://youtu.be/gbEhkA46mDk","4":"111.251.62.141 03/04 07:50","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"},{"1":"→","2":"rererere147","3":": 不是停電 是人為疏失","4":"101.9.239.82 03/04 07:51","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"},{"1":"→","2":"s999132","3":": 窩不知道","4":"36.237.44.200 03/04 07:51","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"},{"1":"→","2":"kcclasaki","3":": 坐等班班有冷氣的到來","4":"180.217.213.98 03/04 07:51","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"},{"1":"推","2":"g1254501","3":": 4%仔不造謠會死膩？是沒有太陽 不是缺電","4":"111.83.1.103 03/04 07:52","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"},{"1":"→","2":"g1254501","3":": ！","4":"111.83.1.103 03/04 07:52","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"},{"1":"推","2":"tonyian","3":": https://i.imgur.com/yV3D8p1.jpg","4":"39.9.229.252 03/04 07:52","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"},{"1":"推","2":"swanc","3":": 窩不知道","4":"49.217.177.133 03/04 07:54","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"},{"1":"推","2":"cat5672","3":": https://imgur.com/VGRCVJF.jpg","4":"49.216.47.100 03/04 07:55","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"},{"1":"推","2":"daphney2266","3":": 還有班班有冷氣的到來...","4":"140.127.221.10 03/04 07:55","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"},{"1":"→","2":"snow3804","3":": 先讓你習慣","4":"1.164.187.94 03/04 07:56","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"},{"1":"→","2":"Lowpapa","3":": 太陽","4":"61.228.93.108 03/04 07:57","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351291.A.5A1.html"},{"1":"推","2":"rererere147","3":": 巡視電廠","4":"101.9.239.82 03/04 07:50","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351387.A.5F9.html"},{"1":"推","2":"TatsuyaShiba","3":": 樓下對裸體八十歲阿嬤幹嘛","4":"42.74.49.252 03/04 07:50","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351387.A.5F9.html"},{"1":"推","2":"kcclasaki","3":": 推文字眼沒有肛門、大便、做愛 我就","4":"180.217.213.98 03/04 07:50","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351387.A.5F9.html"},{"1":"噓","2":"k385476916","3":": 在家睡覺","4":"27.242.231.23 03/04 07:50","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351387.A.5F9.html"},{"1":"推","2":"arc332890","3":": 去電廠作秀 安慰一下死忠仔","4":"124.10.19.97 03/04 07:50","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351387.A.5F9.html"},{"1":"→","2":"greensaru","3":": 尻","4":"223.137.213.87 03/04 07:51","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351387.A.5F9.html"},{"1":"→","2":"heyd","3":": 拉在褲子上","4":"36.232.127.24 03/04 07:51","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351387.A.5F9.html"},{"1":"→","2":"milkBK","3":": i","4":"114.34.189.70 03/04 07:52","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351387.A.5F9.html"},{"1":"→","2":"buwa56","3":": 肛自己","4":"111.71.45.4 03/04 07:52","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351387.A.5F9.html"},{"1":"推","2":"ghostl40809","3":": 跟樓下在西門紅樓約會啊","4":"1.162.44.251 03/04 07:52","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351387.A.5F9.html"},{"1":"→","2":"mikemagic88","3":": 我曾經以為你是我認識的人==","4":"111.242.222.225 03/04 07:53","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351387.A.5F9.html"},{"1":"→","2":"leon771170","3":": 跟著老酥穿皮衣…","4":"125.224.217.173 03/04 07:53","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351387.A.5F9.html"},{"1":"→","2":"showdoggy","3":": 肛核能電廠","4":"223.140.6.229 03/04 07:53","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351387.A.5F9.html"},{"1":"→","2":"bigcho","3":": 修法改名啊","4":"211.20.251.205 03/04 07:54","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351387.A.5F9.html"},{"1":"推","2":"coffee112","3":": 吃肥宅餐啊","4":"101.9.2.7 03/04 07:56","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351387.A.5F9.html"},{"1":"噓","2":"k44754","3":": https://i.imgur.com/d1pMMox.jpg","4":"49.215.21.186 03/04 07:58","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351387.A.5F9.html"},{"1":"噓","2":"mikemagic88","3":": rap","4":"111.242.222.225 03/04 07:50","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351400.A.06D.html"},{"1":"→","2":"headcase","3":": 恭喜 食道癌","4":"39.10.128.108 03/04 07:50","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351400.A.06D.html"},{"1":"推","2":"tontonplus","3":": 菜花電燒一下就好了","4":"175.182.18.211 03/04 07:50","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351400.A.06D.html"},{"1":"噓","2":"s999132","3":": 是喜事啊","4":"36.237.44.200 03/04 07:50","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351400.A.06D.html"},{"1":"推","2":"heyd","3":": 這次怎麼不曬小孩了？","4":"36.232.127.24 03/04 07:50","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351400.A.06D.html"},{"1":"噓","2":"awestricken","3":": 死了再告訴我","4":"36.228.198.150 03/04 07:50","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351400.A.06D.html"},{"1":"噓","2":"dalaba7788","3":": http://i.imgur.com/0Q33T2M.jpg","4":"1.161.25.223 03/04 07:51","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351400.A.06D.html"},{"1":"噓","2":"leocean9816","3":": 死了再報導","4":"116.241.227.203 03/04 07:51","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351400.A.06D.html"},{"1":"噓","2":"poqwiuer","3":": 喝湯燙到 這也要上新聞？","4":"111.71.101.11 03/04 07:51","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351400.A.06D.html"},{"1":"噓","2":"k385476916","3":": 死了再來報","4":"27.242.231.23 03/04 07:51","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351400.A.06D.html"},{"1":"→","2":"kcclasaki","3":": Rap","4":"180.217.213.98 03/04 07:51","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351400.A.06D.html"},{"1":"噓","2":"milkBK","3":": 您值得一個噓","4":"114.34.189.70 03/04 07:52","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351400.A.06D.html"},{"1":"噓","2":"ITIL","3":": 好好沒事為什麼一定要PO蔡阿嘎","4":"223.140.132.195 03/04 07:52","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351400.A.06D.html"},{"1":"噓","2":"bbflisky","3":": :3","4":"111.255.28.46 03/04 07:52","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351400.A.06D.html"},{"1":"噓","2":"ken52037g","3":": 煩不煩","4":"180.217.132.43 03/04 07:52","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351400.A.06D.html"},{"1":"噓","2":"sixis","3":": 討噓","4":"223.136.18.52 03/04 07:52","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351400.A.06D.html"},{"1":"→","2":"flavorBZ","3":": 可惜","4":"180.217.209.145 03/04 07:53","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351400.A.06D.html"},{"1":"噓","2":"s762ok","3":": 死了再報導 好嗎？","4":"104.156.111.181 03/04 07:53","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351400.A.06D.html"},{"1":"噓","2":"showdoggy","3":": 死了再報好嗎","4":"223.140.6.229 03/04 07:53","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351400.A.06D.html"},{"1":"噓","2":"inwuge","3":": 死了再告訴我","4":"111.82.134.96 03/04 07:53","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351400.A.06D.html"},{"1":"噓","2":"Kang0911","3":": 那趕快!","4":"180.176.26.188 03/04 07:53","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351400.A.06D.html"},{"1":"噓","2":"maximu","3":": 沒空管你啦","4":"36.237.21.128 03/04 07:53","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351400.A.06D.html"},{"1":"→","2":"hackfox","3":": 甘我屁事","4":"116.241.227.58 03/04 07:54","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351400.A.06D.html"},{"1":"噓","2":"abbei","3":": 喔","4":"223.137.9.28 03/04 07:54","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351400.A.06D.html"},{"1":"噓","2":"shiaumei","3":": 死","4":"223.140.42.49 03/04 07:54","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351400.A.06D.html"},{"1":"噓","2":"mij","3":": 垃圾報導","4":"111.240.111.142 03/04 07:55","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351400.A.06D.html"},{"1":"推","2":"kaka0426","3":": 係鶴","4":"36.234.51.169 03/04 07:56","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351400.A.06D.html"},{"1":"推","2":"s1018131","3":": 值得一噓","4":"223.139.90.160 03/04 07:56","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351400.A.06D.html"},{"1":"噓","2":"Rufou","3":": 煩","4":"111.82.142.88 03/04 07:57","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351400.A.06D.html"},{"1":"噓","2":"obdv","3":": 死忠好了啦","4":"114.46.213.25 03/04 07:58","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351400.A.06D.html"},{"1":"噓","2":"sj4","3":": 嗯嗯","4":"61.220.105.185 03/04 07:58","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351400.A.06D.html"},{"1":"噓","2":"fdboy","3":": 到底花了多少廣告費 真的是廢到笑","4":"114.41.31.42 03/04 08:00","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351400.A.06D.html"},{"1":"→","2":"flavorBZ","3":": https://youtu.be/XtQqJwh9tD4","4":"180.217.209.145 03/04 07:52","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351508.A.3DA.html"},{"1":"推","2":"didihouse","3":": 火力不要 核能不要 太陽能晚上又廢掉","4":"111.83.40.162 03/04 07:53","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351508.A.3DA.html"},{"1":"→","2":"didihouse","3":":  不停電很難啦","4":"111.83.40.162 03/04 07:53","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351508.A.3DA.html"},{"1":"→","2":"ioofish","3":": 真的！昨天一堆南部人崩潰笑死！抓到好","4":"101.10.15.21 03/04 07:53","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351508.A.3DA.html"},{"1":"→","2":"ioofish","3":": 多8卦5毛4%郭柯侯韓昌粉支那同路人XDDDD","4":"101.10.15.21 03/04 07:53","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351508.A.3DA.html"},{"1":"→","2":"ioofish","3":": DD","4":"101.10.15.21 03/04 07:53","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351508.A.3DA.html"},{"1":"推","2":"skywolf1106","3":": 這個反串給過","4":"180.217.118.252 03/04 07:57","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351508.A.3DA.html"},{"1":"→","2":"skywolf1106","3":": 深得死忠的精髓","4":"180.217.118.252 03/04 07:57","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351508.A.3DA.html"},{"1":"推","2":"heyd","3":": 逃去美國ㄅ","4":"36.232.127.24 03/04 07:53","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351590.A.719.html"},{"1":"→","2":"flavorBZ","3":": 照民進黨選戰這樣打就贏了","4":"180.217.209.145 03/04 07:53","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351590.A.719.html"},{"1":"→","2":"flavorBZ","3":": 抓到了！普丁有瑞士銀行帳戶！","4":"180.217.209.145 03/04 07:54","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351590.A.719.html"},{"1":"推","2":"ansfan","3":": 一樣會輸","4":"106.1.225.126 03/04 07:54","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351590.A.719.html"},{"1":"→","2":"flavorBZ","3":": 幾個蒙面的俄羅斯人（其實烏克蘭反正也","4":"180.217.209.145 03/04 07:55","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351590.A.719.html"},{"1":"→","2":"flavorBZ","3":": 分不出來）","4":"180.217.209.145 03/04 07:55","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351590.A.719.html"},{"1":"→","2":"flavorBZ","3":": 秀帳戶，真的叫普丁！","4":"180.217.209.145 03/04 07:55","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351590.A.719.html"},{"1":"推","2":"samvii","3":": 會帶完整的部隊躲到別國，然後裝備全新武","4":"223.136.86.196 03/04 07:56","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351590.A.719.html"},{"1":"→","2":"samvii","3":": 器跟訓練好再反殺回來","4":"223.136.86.196 03/04 07:56","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351590.A.719.html"},{"1":"→","2":"junping1232","3":": 沒看台灣新聞喔 烏克蘭都快打到莫斯","4":"180.217.14.26 03/04 07:56","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351590.A.719.html"},{"1":"→","2":"junping1232","3":": 科了","4":"180.217.14.26 03/04 07:56","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351590.A.719.html"},{"1":"推","2":"senma","3":": 會在基輔開孫立人餐廳","4":"1.160.21.251 03/04 07:56","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351590.A.719.html"},{"1":"→","2":"flavorBZ","3":": 之後，原來是木材行老闆叫普丁貿易需要","4":"180.217.209.145 03/04 07:57","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351590.A.719.html"},{"1":"→","2":"flavorBZ","3":": 瑞士帳戶","4":"180.217.209.145 03/04 07:57","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351590.A.719.html"},{"1":"推","2":"sd09090","3":": 戰神","4":"1.200.251.88 03/04 07:57","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351590.A.719.html"},{"1":"推","2":"chachayu","3":": 軟禁","4":"101.137.137.124 03/04 07:58","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351590.A.719.html"},{"1":"→","2":"samvii","3":": 可能會帶個幾千人的部隊躲到波蘭，然後接","4":"223.136.86.196 03/04 07:59","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351590.A.719.html"},{"1":"→","2":"samvii","3":": 受美械跟組織流亡烏克蘭人，半年之後帶著","4":"223.136.86.196 03/04 07:59","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351590.A.719.html"},{"1":"→","2":"samvii","3":": 美軍正規軍等級的裝甲師殺回去","4":"223.136.86.196 03/04 07:59","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351590.A.719.html"},{"1":"→","2":"k385476916","3":": 樓下今天晚餐要跟我ㄘ什麼","4":"27.242.231.23 03/04 07:56","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351759.A.D79.html"},{"1":"推","2":"brianuser","3":": 主管的精液","4":"1.172.213.103 03/04 07:56","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351759.A.D79.html"},{"1":"→","2":"brianuser","3":": 一起來吃啊操","4":"1.172.213.103 03/04 07:56","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351759.A.D79.html"},{"1":"推","2":"bwwang10","3":": 二樓口味真重","4":"39.10.41.5 03/04 07:57","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351759.A.D79.html"},{"1":"噓","2":"toomtoom","3":": 二樓 嘔嘔嘔嘔嘔","4":"150.116.232.6 03/04 07:57","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351759.A.D79.html"},{"1":"推","2":"maximu","3":": 爭鮮阿嘻嘻","4":"36.237.21.128 03/04 07:58","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351759.A.D79.html"},{"1":"推","2":"kawazakiz2","3":": 二樓真是懂吃","4":"59.124.84.31 03/04 07:58","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351759.A.D79.html"},{"1":"→","2":"leon771170","3":": https://i.imgur.com/BGn2UvC.jpg","4":"125.224.217.173 03/04 07:58","5":"https://www.ptt.cc/bbs/Gossiping/M.1646351759.A.D79.html"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="danger">
<p>
There is still one problem with the Push data frame. Right now it is still not very clear how we can match the pushes to the articles from which they were extracted. The only shared index is the <code>url</code>. It would be better if all the articles in the data frame have their own unique indices and in the Push data frame each push comment corresponds to a particular article index.
</p>
</div>
<hr />
<p>The following graph summarizes our work flowchart for PTT Gossipping Scraping:</p>
<p><img src="images/ptt-crawling.png" width="90%" /></p>
</div>
</div>
<div id="save-corpus" class="section level2" number="3.4">
<h2><span class="header-section-number">3.4</span> Save Corpus</h2>
<p>You can easily save your scraped texts in a <code>CSV</code> format.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb54-1"><a href="creating-corpus.html#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Save ------</span></span>
<span id="cb54-2"><a href="creating-corpus.html#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(article.table, <span class="at">path =</span> <span class="st">&quot;PTT_GOSSIPPING_ARTICLE.csv&quot;</span>)</span>
<span id="cb54-3"><a href="creating-corpus.html#cb54-3" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(push.table, <span class="at">path =</span> <span class="st">&quot;PTT_GOSSIPPING_PUSH.csv&quot;</span>)</span></code></pre></div>
</div>
<div id="additional-resources" class="section level2" number="3.5">
<h2><span class="header-section-number">3.5</span> Additional Resources</h2>
<p>Collecting texts and digitizing them into machine-readable files is only the initial step for corpus construction. There are many other things that need to be considered to ensure the effectiveness and the sustainability of the corpus data. In particular, I would like to point you to a very useful resource, <a href="http://icar.cnrs.fr/ecole_thematique/contaci/documents/Baude/wynne.pdf">Developing Linguistic Corpora: A Guide to Good Practice</a>, compiled by Martin Wynne. Other important issues in corpus creation include:</p>
<ol style="list-style-type: decimal">
<li>Adding linguistic <strong>annotations</strong> to the corpus data (cf. Leech’s Chapter 2)</li>
<li><strong>Metadata</strong> representation of the documents (cf. Burnard’s Chapter 4)</li>
<li>Spoken corpora (cf. Thompson’s Chapter 5)</li>
<li>Technical parts for corpus creation (cf. Sinclair’s Appendix)</li>
</ol>
</div>
<div id="final-remarks" class="section level2" number="3.6">
<h2><span class="header-section-number">3.6</span> Final Remarks</h2>
<ol style="list-style-type: decimal">
<li>Please pay attention to the ethical aspects involved in the process of web crawling (esp. with personal private matters).</li>
<li>If the website has their own API built specifically for one to gather data, use it instead of scraping.</li>
<li>Always read the terms and conditions provided by the website regarding data gathering.</li>
<li>Always be gentle with the data scraping (e.g., off-peak hours, spacing out the requests)</li>
<li>Value the data you gather and treat the data with respect.</li>
</ol>
<hr />

<div class="exercise">
<span id="exr:wcex1" class="exercise"><strong>Exercise 3.1  </strong></span>Can you modify the R codes so that the script can automatically scrape more than one index page?
</div>

<div class="exercise">
<p><span id="exr:unnamed-chunk-42" class="exercise"><strong>Exercise 3.2  </strong></span>Please utilize the code from Exercise <a href="creating-corpus.html#exr:wcex1">3.1</a> and collect all texts on <code>PTT/Gossipings</code> from <strong>3</strong> index pages. Please have the articles saved in <code>PTT_GOSSIPING_ARTICLE.csv</code> and the pushes saved in <code>PTT_GOSSIPING_PUSH.csv</code> under your working directory.</p>
<p>Also, at the end of your code, please also output in the Console the corpus size, including both the articles and the pushes. Please provide the total number of <em>characters</em> of all your PTT text data collected (Note: You DO NOT have to do the word segmentation yet. Please use the characters as the base unit for corpus size.)</p>
Hint: <code>nchar()</code>
</div>
<p><em>Your script may look something like:</em></p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb55-1"><a href="creating-corpus.html#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I define my own `scrapePTT()` function:</span></span>
<span id="cb55-2"><a href="creating-corpus.html#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="co"># ptt_url: specify the board to scrape texts from</span></span>
<span id="cb55-3"><a href="creating-corpus.html#cb55-3" aria-hidden="true" tabindex="-1"></a><span class="co"># num_index_page: specify the number of index pages to be scraped</span></span>
<span id="cb55-4"><a href="creating-corpus.html#cb55-4" aria-hidden="true" tabindex="-1"></a><span class="co"># return: list(article, push)</span></span>
<span id="cb55-5"><a href="creating-corpus.html#cb55-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-6"><a href="creating-corpus.html#cb55-6" aria-hidden="true" tabindex="-1"></a>PTT_data <span class="ot">&lt;-</span><span class="fu">scrapePTT</span>(<span class="at">ptt_url =</span> <span class="st">&quot;https://www.ptt.cc/bbs/Gossiping&quot;</span>, <span class="at">num_index_page =</span> <span class="dv">3</span>)</span>
<span id="cb55-7"><a href="creating-corpus.html#cb55-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-8"><a href="creating-corpus.html#cb55-8" aria-hidden="true" tabindex="-1"></a>PTT_data<span class="sc">$</span>article <span class="sc">%&gt;%</span> head</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["datetime"],"name":[1],"type":["chr"],"align":["left"]},{"label":["title"],"name":[2],"type":["chr"],"align":["left"]},{"label":["author"],"name":[3],"type":["chr"],"align":["left"]},{"label":["content"],"name":[4],"type":["chr"],"align":["left"]},{"label":["url"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"Fri Mar  4 06:47:28 2022","2":"[問卦] 川普大哥如果出現在基輔","3":"nbarepeat","4":"我大哥川普雖然現在不是美國總統\\n但是還是影響力很大\\n如果川普大哥現在出現在基輔\\n靠霸氣十足的外露\\n是不是普丁的軍隊就會被嚇到回到俄羅斯去\\n-----\\nSent from JPTT on my iPhone\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1646347650.A.01D.html"},{"1":"Fri Mar  4 06:50:35 2022","2":"[問卦] 有人也是一起床鼻子塞住嗎？","3":"bigbowl","4":"這幾天天氣回暖\\n小妹睡覺時換上比較薄的棉被跟衣物\\n結果今天又變冷了\\n鬧鐘還沒叫 小妹就因為無法用鼻子呼吸醒來\\n\\n有人也是天生鼻子過敏嗎？\\n很痛苦對不對？\\nQQ\\n\\n現在頭昏腦脹的 又睡不著\\n噴鼻藥已經噴了\\n一邊等它起作用 一邊用嘴巴呼吸\\n\\n最討厭每年換季的時候了\\n再怎麼小心注意天氣 還是會鼻子過敏\\n要麼就是衣服穿太多\\n要麼就是衣服穿太少…\\n\\n之前冬天時 還因為鼻水倒流到喉嚨 無法呼吸而失眠…\\n\\n黑眼圈就更不用說了\\n以前同學都問我是不是有吸毒…QQ\\n\\n也有人飽受鼻子過敏之苦嗎？\\n來取暖一下QQ\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1646347837.A.8EF.html"},{"1":"Fri Mar  4 07:02:09 2022","2":"[新聞] 午餐點臭豆腐　外送員空手出現「沒帶」！","3":"gnest","4":"不管是上班族還是學生，都很愛利用外送平臺訂購餐點，一名女網友表示，中午叫外送午\\n餐，外送員表示已到樓下，但她卻發現對方「兩手空空」，她詢問「食物呢？」結果對方\\n回答「太忙了，所以沒帶」，下一秒就騎着車離開，還按下「完成訂單」，讓她超傻眼。\\n貼文曝光，網友們覺得扯。\\n\\n一名女網友在臉書「匿名公社」發文，外送員工作很辛苦她能給予體諒，但是有些外送員\\n的行徑卻讓她很錯愕，早上叫外送點了滷蛋、燙青菜、臭豆腐以及焢肉飯，怎料，外送員\\n騎車到家門口時，告知「因爲太忙了，所以餐點沒帶」，她便反問「那妳來這裡幹嗎?妳\\n要回去取餐嗎?」\\n\\n沒想到對方僅回了「痾...」下一秒就騎車走了，2分鐘過後，原PO的外送訂單便顯示「完\\n成訂單」，讓她超傻眼，一切都太荒唐。\\n\\n貼文一出，網友們表示，「這也太扯了」、「其實她吃掉了」、「可以回報客服，他們會\\n處理」、「她送了個寂寞，圖自己溫飽」、「奇葩」、「這哪來的詭異天兵」、「下次選\\n現金支付比較保險」、「她要吃你的餐吧，無言」、「外送員是有多想吃臭豆腐」、「爲\\n什麼覺得那個畫面有點好笑」。\\n\\n外送員騎車離開後，竟按下完成訂單。\\n\\n記者施怡妏／綜合報導\\n\\n午餐點臭豆腐　外送員空手出現「太忙所以沒帶」！下秒1舉動她傻了https://tinyurl.com/27kh482j--","5":"https://www.ptt.cc/bbs/Gossiping/M.1646348533.A.35D.html"},{"1":"Fri Mar  4 07:03:49 2022","2":"[問卦] Youtuber[老婆]，她結婚了沒啊？= =","3":"cycutom","4":"日前小帥帥心血來潮\\n\\n\\n想去釣蝦（人生從沒釣過蝦）\\n\\n\\n上YT找教學\\n\\n\\n一找就是找到這個叫「老婆」的youtuber\\n\\n\\n看第一支影片時，還以為跟在她旁邊的男的，應該是她老公\\n\\n（因為她的YOUTUBER名字就叫老婆）\\n\\n\\n然後看越多支影片越覺得不對，簡單來說，她搞不好還沒結婚？ = =\\n\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1646348631.A.41B.html"},{"1":"Fri Mar  4 07:08:02 2022","2":"[新聞] 范瑋琪不躲了！神隱2年「突曝震撼喜訊」","3":"zzyyxx77","4":"范瑋琪不躲了！神隱2年「突曝震撼喜訊」　徐若瑄也力挺\\n\\n編輯 呂欣芷 報導\\n\\nTvbs\\n\\n\\n女星范瑋琪（范范）過去因失言風波重創形象，近年來將重心轉往家庭，卻陸續被抓包非法\\n使用安博盒子、與回國應進行自主健康管理的王力宏聚餐等行為惹議。沉寂2年多的她，今\\n（1）日無預警宣布將回歸歌壇，令粉絲相當期待。\\n\\n\\n范瑋琪稍早在臉書拋出喜訊，透露將發行新歌〈恰如其分的自己〉，更開心表示「是明天」\\n，證實重返演藝圈的消息。據悉，〈恰如其分的自己〉原本是她出道20週年的紀念作品，不\\n過當時因口罩失言風波飽受外界撻伐，後來又陸續惹出一連串爭議事件，讓她與老公黑人（\\n陳建州）形象重挫，復出之路遙遙無期。\\n\\n如今范瑋琪親自宣布明（2）日將發表新歌，黑人不忘大力為愛妻宣傳，表示「終於可以讓\\n大家聽到新歌了」，就連好友徐若瑄也開心回應「終於！等了好久」。演藝事業再現曙光，\\n不少粉絲十分驚喜，紛紛湧入留言處為她加油打氣。https://news.tvbs.com.tw/entertainment/1728288--","5":"https://www.ptt.cc/bbs/Gossiping/M.1646348884.A.3DF.html"},{"1":"Fri Mar  4 07:13:35 2022","2":"Re: [問卦] 台灣的電力到底是哪裡出了問題","3":"Fortran","4":"台電：沒有核四會缺電喔！\\n政客：幹你娘！台電藏電！\\n\\n\\n台電：....？？？？？\\n政客：現在沒有核四，還不是有電？台電藏電啦！！！\\n\\n\\n台電：....不是這樣，因為...\\n政客：（打斷）幹你娘啦！藏電！\\n\\n\\n台電：......\\n\\n\\n過了一段時間\\n\\n\\n台電：核四不運轉，電力會不夠\\n政客：幹你娘！藏電！恐嚇人民！\\n\\n\\n台電：........\\n\\n\\n\\n\\n以上的過程持續N次之後\\n\\n\\n\\n\\n政客：電力絕對夠用喔！你說是不是！\\n台電：嗯（已懶得多說什麼了）\\n\\n政客：哈哈哈！\\n\\n\\n\\n\\n\\n先前已有專家持續警告電力不夠，但沒人重視，只會怪專家亂講、恐嚇、藏電\\n\\n\\n\\n台電：怪我囉？\\n\\n--","5":"https://www.ptt.cc/bbs/Gossiping/M.1646349217.A.CF3.html"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="sourceCode" id="cb56"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb56-1"><a href="creating-corpus.html#cb56-1" aria-hidden="true" tabindex="-1"></a>PTT_data<span class="sc">$</span>push <span class="sc">%&gt;%</span> head</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["tag"],"name":[1],"type":["chr"],"align":["left"]},{"label":["author"],"name":[2],"type":["chr"],"align":["left"]},{"label":["content"],"name":[3],"type":["chr"],"align":["left"]},{"label":["datetime"],"name":[4],"type":["chr"],"align":["left"]},{"label":["url"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"推","2":"somanyee","3":": 沒空，我看他最近忙輔選","4":"114.40.144.240 03/04 06:49","5":"https://www.ptt.cc/bbs/Gossiping/M.1646347650.A.01D.html"},{"1":"推","2":"vviiccttoorr","3":": 布丁會嚇死","4":"180.217.22.189 03/04 06:57","5":"https://www.ptt.cc/bbs/Gossiping/M.1646347650.A.01D.html"},{"1":"→","2":"chugliang","3":": 川普會對普丁喊 You are fire!","4":"220.135.107.50 03/04 06:58","5":"https://www.ptt.cc/bbs/Gossiping/M.1646347650.A.01D.html"},{"1":"推","2":"CKRO","3":": 大哥不會輸 他會保護所有人","4":"114.136.228.61 03/04 07:00","5":"https://www.ptt.cc/bbs/Gossiping/M.1646347650.A.01D.html"},{"1":"→","2":"atoto","3":": 我川威武","4":"101.9.32.182 03/04 07:01","5":"https://www.ptt.cc/bbs/Gossiping/M.1646347650.A.01D.html"},{"1":"推","2":"horseface","3":": 他沒有那個勇氣啦","4":"23.241.114.109 03/04 07:10","5":"https://www.ptt.cc/bbs/Gossiping/M.1646347650.A.01D.html"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="sourceCode" id="cb57"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb57-1"><a href="creating-corpus.html#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># corpus size</span></span>
<span id="cb57-2"><a href="creating-corpus.html#cb57-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-3"><a href="creating-corpus.html#cb57-3" aria-hidden="true" tabindex="-1"></a>PTT_data<span class="sc">$</span>article<span class="sc">$</span>content <span class="sc">%&gt;%</span> nchar <span class="sc">%&gt;%</span> sum</span></code></pre></div>
<pre class="Rout"><code>[1] 24039</code></pre>
<div class="exercise">
<p><span id="exr:unlabeled-div-1" class="exercise"><strong>Exercise 3.3  </strong></span>Please choose a website (other than PTT) you are interested in and demonstrate how you can use R to retrieve textual data from the site. The final scraped text collection could be from only one static web page. The purpose of this exercise is to show that you know how to parse the HTML structure of the web page and retrieve the data you need from the website.</p>
</div>
<!-- ```{exercise} -->
<!-- Now you should have basic ideas how we can crawl data from the Internet. Sometimes, we not only collect texts but statistics as well. Please try to collect the statistics of COVID-19 outbreak from the [Wikipedia 2019–20 coronavirus pandemic](https://en.wikipedia.org/wiki/2019%E2%80%9320_coronavirus_pandemic). Specifically, write a short script to automatically get the table included in the Wiki page, where the numbers of confirmed cases, deaths, and recoveries for each country are recorded. Your script should output a data frame as follows. Please name the columns of your data frame as follows as well. (Note: The numbers may vary because of the constant updates of the wiki page.) [*needs updating*] -->
<!-- ``` -->

</div>
</div>
<h3> References</h3>
<div id="refs" class="references csl-bib-body hanging-indent" line-spacing="2">
<div id="ref-munzert2014" class="csl-entry">
Munzert, S., Rubba, C., Meißner, P., &amp; Nyhuis, D. (2014). <em>Automated data collection with <span>R</span>: A practical guide to web scraping and text mining</em>. John Wiley &amp; Sons.
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="r-fundamentals.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="corpus-analysis-a-start.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
